<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENCHAR_DATE_TIME_FIELDS_VALIDITY -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenchar_date_time_fields_validity.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:47 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="Validity of Date Fields and Time Fields">
<title>
Validity of Date Fields and Time Fields - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenchar_date_time_fields_validity.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenchar_date_time_fields_validity.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendate_time_processing.html')" class="blue">Date and Time Processing</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencharacter_date_time.html')" class="blue">Date Fields and Time Fields</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
Validity of Date Fields and Time Fields
</span></p>
<p>
Date fields and time fields of the types <span class="qtext">d</span> and <span class="qtext">t</span> can contain any alphanumeric characters.
</p>
<ul class="disc">
<li>Valid values for the type <span class="qtext">d</span>, however, are only those digits that are
valid dates according to the calendar rules in the format <span class="qtext400">"yyyymmdd"</span>:
<span class="qtext400">"yyyy"</span> (year): 0001 to 9999, <span class="qtext400">"mm"</span> (month):  01 to 12, <span class="qtext400">"dd"</span> (day): 01 to 31.</li>
</ul>
<ul class="disc">
<li>Valid values for the type <span class="qtext">t</span>, however, are only those digits that are
interpreted as times in the 24-hour clock format <span class="qtext400">"hhmmss"</span>. <span class="qtext400">"hh"</span>
(hours): 00 to 23, <span class="qtext400">"mm"</span> (minutes): 00 to 59, <span class="qtext400">"ss"</span> (seconds): 00 to 59.</li>
</ul>
<p>
The ABAP runtime environment checks the validity at the following points:
</p>
<ul class="disc">
<li>Date fields and time fields with invalid values raise an exception when used as a
<a href="javascript:call_link('abenmove_exact_elementary_valid.html')" class="blue">source field</a> of a
<a href="javascript:call_link('abenlossless_assignment_glosry.html')" class="grey" title="Glossary Entry">lossless assignment</a>. Conversely, source fields of other types may not produce any invalid values in date fields and time fields as
<a href="javascript:call_link('abenmove_exact_elementary_fit.html')" class="blue">target fields</a> in a lossless assignment.</li>
</ul>
<ul class="disc">
<li>Invalid values cannot be converted to <a href="javascript:call_link('abentime_stamps.html')" class="blue">time stamps</a>
by using the statements <a href="javascript:call_link('abapconvert_date_utclong.html')" class="blue"><span class="qtext">CONVERT
INTO UTCLONG</span></a> and <a href="javascript:call_link('abapconvert_date_time-stamp.html')" class="blue"><span class="qtext">CONVERT INTO TIME STAMP</span></a>.</li>
</ul>
<ul class="disc">
<li>In a regular assignment to numeric fields, <a href="javascript:call_link('abenconversion_type_d.html')" class="blue">date fields</a> and
<a href="javascript:call_link('abenconversion_type_t.html')" class="blue">target fields</a> with invalid values produce the value 0, with the following exceptions:</li>
</ul>
<ul class="circlem2">
<li>For a source field of the type <span class="qtext">d</span>, the values from 10/5/1582 to 10/14/1582,
missing due to the conversion from the Julian to Gregorian calendar, are handled either as invalid values or like the valid values from 10/15/1582 to 10/24/1582, depending on the operand position.</li>
</ul>
<ul class="circlem2">
<li>For a source field of the type <span class="qtext">t</span> that contains only digits, the numeric value is calculated using the formula hh*3600+mm*60+ss, even if the times are invalid.</li>
</ul>
<ul class="disc">
<li>For regular assignments of <a href="javascript:call_link('abennumeric_source_fields.html')" class="blue">numeric fields</a>
to date fields and time fields, the numeric fields must be within the value range of the data type <span class="qtext">i</span> and comply with the following special rules:</li>
</ul>
<ul class="circlem2">
<li>When number values are assigned to date fields, and these fields cannot be produced by the reverse conversion, the date field is initialized</li>
</ul>
<ul class="circlem2">
<li>Any number values can be assigned to time fields. When converted, the number value is divided by 86400 and only the integer remainder of the division is respected. This always produces a valid time in hours.</li>
</ul>
<p>
No checks are generally made on other assignments to date fields and time fields not mapped to assignments
of numeric values, nor to other operand positions. As a consequence, invalid values are produced easily by date fields and time fields, and then processed further.
</p>
<A name="@@ITOC@@ABENCHAR_DATE_TIME_FIELDS_VALIDITY_1"></A>
<p><span class="h3">
Initial Value of Date Fields
</span></p>
<p>
The initial value "00000000" of the data type <span class="qtext">d</span> and the date 01.01.0001 have a special part to play here.
</p>
<ul class="disc">
<li>The initial value "00000000" of data type <span class="qtext">d</span> is not a valid date. A conversion
of the initial value "00000000" to a numeric data type produces, like all invalid values, the value
0. Conversely, the conversion of the number 0 to a date field of the type <span class="qtext">d</span>
always produces the invalid date "00000000". Negative and oversized numbers also produce the invalid date "00000000".</li>
</ul>
<ul class="disc">
<li>A conversion of a valid date to a field of the type <span class="qtext">d</span> produces the number
of days since 01.01.0001, which makes this date the zero point for date calculations. A conversion of
a date field of the type <span class="qtext">d</span> with the value "00010101" to a numeric value produces
the value 0, like the conversion of the initial value or any other invalid value, and the conversion cannot be reversed.</li>
</ul>
<p>
1 is the smallest number that is converted to a valid date, 02.01.0001, when assigning to a date field
of type <span class="qtext">d</span>. Assignments between valid date fields and numeric fields can be reversed only from this date.
</p>
<p>
In <a href="javascript:call_link('abenlossless_assignment_glosry.html')" class="grey" title="Glossary Entry">lossless assignments</a>,
invalid values in source fields raise exceptions instead of producing the value 0 or "00000000". Here,
the value "00010101", which is really part of the value range, is regarded as invalid, while "00000000",
not actually part of the value range, is regarded as valid. This means that the initial value "00000000"
can be used by lossless assignments and all valid assignments between date fields and numeric fields can be reversed.
</p>
<p>
<a href="javascript:call_link('abenopen_sql_glosry.html')" class="grey" title="Glossary Entry">ABAP SQL</a> is excluded from
this rule. Here, the value "00010101" is also accepted as a valid date and treated like the initial value "00000000" in operand positions for which values must satisfy the rules for lossless assignments.
</p>
<p><span class="h4">
Note
</span></p>
<p>
The validity of the content of date fields and time fields must be verified before they are accessed.
</p>
<p><span class="h4">
Example
</span></p>
<p>
Identify an invalid date by a comparison with the value 0. For the comparison, the date field is converted
to an integer field of type <span class="qtext">i</span>, where an invalid date produces the value 0. The valid date "00010101", which would also produce the value 0, is handled separately beforehand.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(date) = CONV d( '20160231' ). <br> <br>date = COND #( WHEN date = '00010101' OR date &lt;> 0 THEN date <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ELSE THROW cx_sy_conversion_no_date( ) ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Identify an invalid time by a comparison with the value 0. For the comparison, the time field is converted
to an integer field of type <span class="qtext">i</span>, where an invalid time produces the value 0. The valid time "000000", which would also produce the value 0, is handled separately beforehand.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(time) = CONV t( 'XXXXXX' ). <br> <br>time = COND #( WHEN time = '000000' OR time &lt;> 0 THEN time <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ELSE THROW cx_sy_conversion_no_time( ) ).
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenchar_date_time_fields_validity.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:47 GMT -->
</html>
