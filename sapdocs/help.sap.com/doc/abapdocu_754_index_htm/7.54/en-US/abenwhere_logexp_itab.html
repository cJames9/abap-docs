<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENWHERE_LOGEXP_ITAB -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenwhere_logexp_itab.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:49 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="SELECT - FOR ALL ENTRIES">
<title>
SELECT - FOR ALL ENTRIES - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenwhere_logexp_itab.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenwhere_logexp_itab.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">ABAP SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_reading.html')" class="blue">ABAP SQL - Reads</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenselect_clauses.html')" class="blue">SELECT clauses</a>&nbsp;&rarr;&nbsp;
</span>
<p>
<a href="javascript:call_link('abapselect_shortref.html')" class="blue">Quick Reference</a>
</p>
<A NAME="@@FOR ALL ENTRIES@@SELECT@@"></A>
<p><span class="h1">
SELECT - FOR ALL ENTRIES
</span></p>
<A name="@@ITOC@@ABENWHERE_LOGEXP_ITAB_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext">... FOR ALL ENTRIES IN @itab WHERE ... col <a href="javascript:call_link('abenwhere_logexp_compare.html')" class="blue">operator</a> @itab-comp ...</span>
</p>
<p><span class="h4">
Effect
</span></p>
<p>
If the addition <span class="qtext">FOR ALL ENTRIES</span> is specified in front of the language element
<a href="javascript:call_link('abapwhere.html')" class="blue"><span class="qtext">WHERE</span></a> of the statement <span class="qtext">SELECT</span> of a
<a href="javascript:call_link('abenmainquery_glosry.html')" class="grey" title="Glossary Entry">main query</a>, the components <span class="qtext">comp</span> of the internal table
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">itab</a> specified as a
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variable</a> here can be used in
<a href="javascript:call_link('abenwhere_logexp.html')" class="blue">relational expressions</a> within <span class="qtext">
<a href="javascript:call_link('abenwhere_logexp.html')" class="blue">sql_cond</a></span> on the right side of comparisons of a
<a href="javascript:call_link('abenwhere_logexp_compare.html')" class="blue">relational operator</a> in comparisons with a
<a href="javascript:call_link('abenopen_sql_columns.html')" class="blue">column</a> <span class="qtext">col</span>. The specified
component <span class="qtext">comp</span> must be compatible with the column <span class="qtext">col</span>.
The internal table <span class="qtext">itab</span> can have a structured or an elementary row type. For an elementary row type, the
<a href="javascript:call_link('abenpseudo_component_glosry.html')" class="grey" title="Glossary Entry">pseudo component</a> <span class="qtext">table_line</span> must be specified for <span class="qtext">comp</span>.
</p>
<p>
The entire logical expression <a href="javascript:call_link('abenwhere_logexp.html')" class="blue"><span class="qtext">sql_cond</span></a>
is evaluated for each individual row of the internal table <span class="qtext">itab</span>. The results
set of the <span class="qtext">SELECT</span> statement is the union set of the results sets produced
by the individual evaluations. Rows that occur more than once are removed from the results set automatically. The full content of a row is considered here.
</p>
<p>
If the internal table <span class="qtext">itab</span> is empty, the entire <span class="qtext">WHERE</span>
condition is ignored. This means that none of the rows in the database table are skipped and are placed in the results set (once any duplicate rows are removed).
</p>
<p>
The logical expression <a href="javascript:call_link('abenasql_cond.html')" class="blue"><span class="qtext">sql_cond</span></a> of the <span class="qtext">WHERE</span> condition can comprise multiple
<a href="javascript:call_link('abenwhere_logexp.html')" class="blue">relational expressions</a> using
<span class="qtext">AND</span> and <span class="qtext">OR</span>. However, if <span class="qtext">FOR ALL ENTRIES</span> is specified, there must be at least one
<a href="javascript:call_link('abenwhere_logexp_compare.html')" class="blue">comparison</a> with a column of the internal table <span class="qtext">itab</span> that can be specified statically or dynamically.
</p>
<P>
The following restrictions apply when using the addition <span class="qtext">FOR ALL ENTRIES</span> with other additions:
</P>
<ul class="disc">
<li>The addition <span class="qtext">FOR ALL ENTRIES</span> is only possible in front of <span class="qtext">WHERE</span>
conditions in a standalone <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a> statement or in the
<a href="javascript:call_link('abenmainquery_glosry.html')" class="grey" title="Glossary Entry">main query</a> after <a href="javascript:call_link('abapopen_cursor.html')" class="blue">
<span class="qtext">OPEN CURSOR</span></a>, if no common table expressions are defined using <a href="javascript:call_link('abapwith.html')" class="blue"><span class="qtext">WITH</span></a>.</li>
</ul>
<ul class="disc">
<li>The addition <span class="qtext">FOR ALL ENTRIES</span> cannot be used with the addition <a href="javascript:call_link('abapselect_single.html')" class="blue"><span class="qtext">SINGLE</span></a>.</li>
</ul>
<ul class="disc">
<li>The addition <span class="qtext">FOR ALL ENTRIES</span> cannot be used in combination with
<a href="javascript:call_link('abapsql_expr.html')" class="blue">SQL expressions</a>, except for columns specified individually or an aggregate expression <span class="qtext">COUNT( * )</span> specified individually.</li>
</ul>
<ul class="disc">
<li>If the addition <span class="qtext">FOR ALL ENTRIES</span> is used, no
<a href="javascript:call_link('abenselect_into_lob_handles.html')" class="blue">LOB handles</a> can be created as
<a href="javascript:call_link('abenreader_stream_glosry.html')" class="grey" title="Glossary Entry">reader streams</a> or as
<a href="javascript:call_link('abenlocator_glosry.html')" class="grey" title="Glossary Entry">locators</a> in the
<a href="javascript:call_link('abapinto_clause.html')" class="blue">target area</a> of a standalone <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a> statement.</li>
</ul>
<ul class="disc">
<li>The addition <span class="qtext">FOR ALL ENTRIES</span> cannot be combined with <a href="javascript:call_link('abapunion.html')" class="blue"><span class="qtext">UNION</span></a>.</li>
</ul>
<ul class="disc">
<li>In a <span class="qtext">SELECT</span> statement with <span class="qtext">FOR ALL ENTRIES</span>, no aggregate expressions except for <span class="qtext">COUNT( *
)</span> can be used in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span>
list</a>. In cases like these, the aggregate expression is not evaluated in the database, but is emulated on the AS ABAP.</li>
</ul>
<ul class="disc">
<li>The addition <span class="qtext">FOR ALL ENTRIES</span> should not be used with the addition <a href="javascript:call_link('abapgroupby_clause.html')" class="blue">
<span class="qtext">GROUP BY</span></a>. The addition <span class="qtext">GROUP BY</span> has no effect if <span class="qtext">FOR ALL ENTRIES</span> is used.</li>
</ul>
<ul class="disc">
<li>In a <span class="qtext">SELECT</span> statement with <span class="qtext">FOR ALL ENTRIES</span>,
the addition <a href="javascript:call_link('abaporderby_clause.html')" class="blue"><span class="qtext">ORDER BY</span></a> can
only be used with the addition <span class="qtext">PRIMARY KEY</span> and can only be used to access
a single table or view. In this case, all columns of the primary key (except for the client column in
client-specific tables) must be in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> list</a>.</li>
</ul>
<ul class="disc">
<li>No <a href="javascript:call_link('abenopen_sql_path.html')" class="blue">path expressions</a> can be used in a <span class="qtext">SELECT</span> statement with <span class="qtext">FOR ALL ENTRIES</span>.</li>
</ul>
<ul class="disc">
<li>If the addition <span class="qtext">FOR ALL ENTRIES</span> is used, no database fields of the built-in
types STRING, RAWSTRING, and GEOM_EWKB plus LCHR and LRAW should occur in the <a href="javascript:call_link('abapselect_list.html')" class="blue">
<span class="qtext">SELECT</span> list</a>. These data types prevent rows that occur more than once
on the database system from being removed. These rows are only removed from the results set on the AS
ABAP. If specified in the <span class="qtext">SELECT</span> list, a syntax check warning is raised that can be hidden by a pragma.</li>
</ul>
<p>
The internal table <span class="qtext">itab</span> is evaluated once for each query. Any changes made
to the content of the internal table in a <span class="qtext">SELECT</span> loop or <span class="qtext">WITH</span> loop are ignored by the logical expression.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>The same internal table can be specified after <span class="qtext">FOR ALL ENTRIES</span> and after
<a href="javascript:call_link('abapinto_clause.html')" class="blue"><span class="qtext">INTO</span></a>. The content of the table
is evaluated by <span class="qtext">FOR ALL ENTRIES</span> and then overwritten by the <a href="javascript:call_link('abapinto_clause.html')" class="blue"><span class="qtext">INTO</span> clause</a>.</li>
</ul>
<ul class="disc">
<li>A comparison with a column of an internal table can also be performed using the <span class="qtext">WHERE</span> condition of a
<a href="javascript:call_link('abensubquery_glosry.html')" class="grey" title="Glossary Entry">subquery</a> for the same <a href="javascript:call_link('abapselect_data_source.html')" class="blue">data source</a>.</li>
</ul>
<ul class="disc">
<li>With respect to rows occurring more than once in the results set, the addition <span class="qtext">FOR
ALL ENTRIES</span> has the same effect as when the addition <a href="javascript:call_link('abapselect_clause.html')" class="blue"><span class="qtext">
DISTINCT</span></a> is specified in the definition of the selection set. Unlike <span class="qtext">DISTINCT</span>,
the rows are not always deleted from the database system but instead are sometimes first deleted from
the results set on AS ABAP. The duplicate rows are then removed from the database system if the <span class="qtext">
SELECT</span> statement can be passed to the database system as a single SQL statement. The addition
<span class="qtext">DISTINCT</span> is supported here.  If the <span class="qtext">SELECT</span> statement
needs to be distributed to multiple SQL statements before it is passed or if columns of the types STRING
and RAWSTRING plus LCHR and LRAW are specified in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> list</a>, the rows are aggregated on AS ABAP.</li>
</ul>
<ul class="disc">
<li>If duplicate rows are first removed from AS ABAP, all rows specified by the <span class="qtext">WHERE</span> condition (in some cases) are passed to an internal system table and then aggregated.  The
<a href="javascript:call_link('abenmemory_consumption_2.html')" class="blue">maximum size</a> of this system table is restricted
to that of normal internal tables. More specifically, the system table is always required if one of
the additions <a href="javascript:call_link('abapinto_clause.html')" class="blue"><span class="qtext">PACKAGE SIZE</span></a>
or <a href="javascript:call_link('abapselect_up_to_offset.html')" class="blue"><span class="qtext">UP TO</span>, <span class="qtext">OFFSET</span></a>
is used simultaneously. These then have no effect on the number of rows passed from the database server
to AS ABAP, but are only used when the rows are passed from the system table to the actual target area. If the maximum size of the internal system table is exceeded, a runtime error occurs.</li>
</ul>
<ul class="disc">
<li>The addition <span class="qtext">FOR ALL ENTRIES</span> bypasses
<a href="javascript:call_link('abensap_buffering_glosry.html')" class="grey" title="Glossary Entry">table buffering</a> for tables
with generic buffering if the condition after <span class="qtext">FOR ALL ENTRIES</span> prevents a single generic area from being specified exactly.</li>
</ul>
<dl><dd>
In all other cases, table buffering is used and the addition <span class="qtext">FOR ALL ENTRIES</span> can be a more efficient alternative to
<a href="javascript:call_link('abenjoin_expression_glosry.html')" class="grey" title="Glossary Entry">join expressions</a>.
</dd></dl>
<ul class="disc">
<li>Before using an internal table <span class="qtext">itab</span> after <span class="qtext">FOR ALL
ENTRIES</span>, always check that the internal table is not initial. In an initial internal tables,
all rows are read from the database regardless of any further conditions specified after <span class="qtext">WHERE</span>. This is not usually the required behavior.</li>
</ul>
<ul class="disc">
<li>If the full <span class="qtext">WHERE</span> condition is ignored because the internal table <span class="qtext">
itab</span> is empty, the implicit <span class="qtext400">WHERE</span> condition for the current client
or the client specified using <a href="javascript:call_link('abapselect_client.html')" class="blue"><span class="qtext">USING CLIENT</span></a> is not affected (if
<a href="javascript:call_link('abenopen_sql_client_handling.html')" class="blue">implicit client handling</a> is enabled). This means that all data is only read from the current client. If
<a href="javascript:call_link('abenopen_sql_client_handling.html')" class="blue">implicit client handling</a> is disabled using
the obsolete addition <a href="javascript:call_link('abapselect_client_obsolete.html')" class="blue"><span class="qtext">CLIENT
SPECIFIED</span></a>, no implicit <span class="qtext">WHERE</span> condition exists for the client.
Any <span class="qtext">WHERE</span> condition specified explicitly for the client column is ignored
with the full condition if the internal table <span class="qtext">itab</span> is empty and the data from all clients is read.</li>
</ul>
<ul class="disc">
<li>If, in a <a href="javascript:call_link('abenopensql_strict_modes.html')" class="blue">strict mode of the syntax check</a>,
<span class="qtext">FOR ALL ENTRIES</span> is specified together with columns of the types STRING and
RAWSTRING plus LCHR and LRAW in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> list</a>, the syntax check is executed in
<a href="javascript:call_link('abenopensql_strict_mode_752.html')" class="blue"> strict mode from Release 7.52</a>.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Gets all flight data for a specified departure city. The relevant airlines and flight numbers are first
passed to an internal table <span class="qtext">entry_tab</span>, which is evaluated in the <span class="qtext">WHERE</span>
condition of the subsequent <span class="qtext">SELECT</span> statement. This selection could also be
carried out in a single <span class="qtext">SELECT</span> statement by using a join in the <a href="javascript:call_link('abapfrom_clause.html')" class="blue">
<span class="qtext">FROM</span> clause</a>. Make sure that the table <span class="qtext">entry_tab</span>
is not initial before the <span class="qtext">SELECT</span> statement is executed using <span class="qtext">FOR ALL ENTRIES</span>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA city TYPE spfli-cityfrom VALUE 'FRANKFURT'. <br>cl_demo_input=>request( CHANGING field = city ). <br>
 <br>SELECT carrid, connid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM spfli <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE cityfrom = @( to_upper( city ) ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(entry_tab). <br> <br>IF entry_tab IS NOT INITIAL. <br>
&nbsp;&nbsp;SELECT carrid, connid, fldate <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM sflight <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FOR ALL ENTRIES IN @entry_tab <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE carrid = @entry_tab-carrid AND <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connid = @entry_tab-connid <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ORDER BY PRIMARY KEY <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(result_tab). <br>&nbsp;&nbsp;cl_demo_output=>display( result_tab ). <br>ENDIF.
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Uses <span class="qtext">FOR ALL ENTRIES</span> with an empty internal table. All rows of the database
table are respected. The number of read rows is usually, however, smaller in the first <span class="qtext">SELECT</span>
statement than in the second statement. This is because only one column is read and hence more duplicate
rows can be removed. The second <span class="qtext">SELECT</span> statement, on the other hand, moves all rows of the database table to the results set, since their structure covers the full table key.
</p>
<p class="qtextml1">
<span class="qtext">
DATA carriers TYPE TABLE OF scarr. <br> <br>SELECT carrid, connid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM spfli <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FOR ALL ENTRIES IN @carriers <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE carrid = @carriers-carrid <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(result1). <br>cl_demo_output=>write( result1 ). <br>
 <br>SELECT carrid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM spfli <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FOR ALL ENTRIES IN @carriers <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE carrid = @carriers-carrid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(result2). <br>cl_demo_output=>display( result2 ).
</span>
</p>
<p>

</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenwhere_logexp_itab.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:49 GMT -->
</html>
