<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPOPEN_DATASET_LINEFEED -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapopen_dataset_linefeed.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:09 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="OPEN DATASET - WITH LINEFEED">
<meta name="keywords" content="ABAP, End of Line Marking">
<title>
OPEN DATASET - WITH LINEFEED - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapopen_dataset_linefeed.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapopen_dataset_linefeed.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_files.html')" class="blue">ABAP File Interface</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenfile_interface_statements.html')" class="blue">Statements for the ABAP File Interface</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapopen_dataset.html')" class="blue">OPEN DATASET</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue">OPEN DATASET - mode</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@WITH LINEFEED@@OPEN DATASET@@"></A>
<p><span class="h1">
OPEN DATASET - WITH LINEFEED <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapopen_dataset_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... WITH <i class=bn>{</i> NATIVE <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>|</i> SMART <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>|</i> UNIX <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>|</i> WINDOWS <i class=bn>}</i> LINEFEED ...</span> <br><br>
</P>
<p><span class="h2">
Alternatives:
</span></p>
<P>
   <A HREF="#!ABAP_ALTERNATIVE_1@1@" class="blue"> 1. <span class="qtext">... WITH NATIVE LINEFEED</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_2@2@" class="blue"> 2. <span class="qtext">... WITH SMART LINEFEED</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_3@3@" class="blue"> 3. <span class="qtext">... WITH UNIX LINEFEED</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_4@4@" class="blue"> 4. <span class="qtext">... WITH WINDOWS LINEFEED</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
These additions determine which line end marker is used for
<a href="javascript:call_link('abentext_file_glosry.html')" class="grey" title="Glossary Entry">text files</a> or
<a href="javascript:call_link('abenlegacy_file_glosry.html')" class="grey" title="Glossary Entry">legacy</a> text files. If these additions are used, the
<a href="javascript:call_link('abenprofile_parameter_glosry.html')" class="grey" title="Glossary Entry">profile parameter</a>
<span class="lnkgrey">abap/NTfmode</span> is ignored. The two values <span class="qtext400">"UNIX"</span>
or <span class="qtext400">"NT"</span> cannot both be specified in the addition <a href="javascript:call_link('abapopen_dataset_os_addition.html')" class="blue"><span class="qtext">TYPE</span></a> at the same time.
</P>
<P>
If these additions are not used, the line end marker is determined as follows, depending on the operating system of the current
<a href="javascript:call_link('abenapplication_server_glosry.html')" class="grey" title="Glossary Entry">AS Instance</a> <a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>:
</P>
<ul class="disc">
<li>
The line end marker for Unix is <span class="qtext400">"LF"</span>. On Unix, OS/390, and IBM i5/OS (previously known as OS/400), only <span class="qtext400">"LF"</span> is used for reading and writing. <br>
<br></li>
<li>
The line end marker for MS Windows is <span class="qtext400">"CRLF"</span>. On MS Windows, however, the values of the
<a href="javascript:call_link('abenprofile_parameter_glosry.html')" class="grey" title="Glossary Entry">profile parameter</a>
<span class="lnkgrey">abap/NTfmode</span> can also be used to specify whether new files are handled
according to Unix conventions or Windows conventions. If the profile parameter has the value "b", the
Unix line end marker <span class="qtext400">"LF"</span> is used. If the profile parameter has the value
"t" or is initial, the Windows line end marker <span class="qtext400">"CRLF"</span> is used. The setting
in the profile parameter can be overridden with the addition <a href="javascript:call_link('abapopen_dataset_os_addition.html')" class="blue">
<span class="qtext">TYPE</span></a> and the value <span class="qtext400">"UNIX"</span> or <span class="qtext400">"NT"</span>.
If an existing file is opened without the addition <span class="qtext">TYPE</span>, this file is searched for the first line end marker
(<span class="qtext400">"LF"</span> or <span class="qtext400">"CRLF"</span>), and this is used for the
whole file. If no line end marker is found, the profile parameter is used. This applies particularly
if an existing file is completely overwritten with <a href="javascript:call_link('abapopen_dataset_access.html')" class="blue"><span class="qtext">FOR OUTPUT</span></a>. <br><br>
<br></li>
</ul>
<P>
If an addition <span class="qtext">WITH NATIVE<i class=bn>|</i>SMART<i class=bn>|</i>UNIX<i class=bn>|</i>WINDOWS
LINEFEED</span> is used, this setting can be changed for the open file using the statement <a href="javascript:call_link('abapset_dataset.html')" class="blue">
<span class="qtext">SET DATASET</span></a>. If neither of the additions is used, the line end marker cannot be changed using <span class="qtext">SET DATASET</span> either. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Without the use of an addition <span class="qtext">WITH LINEFEED</span>, the line end marker is dependent on various implicit factors such as the operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>, a profile
parameter, and line end markings that are already used. For this reason, the explicit use of <span class="qtext">WITH
LINEFEED</span> is recommended, which renders the use of the addition <a href="javascript:call_link('abapopen_dataset_os_addition.html')" class="blue"><span class="qtext">TYPE</span></a> for setting the line end marker obsolete.
<br><br></li>
<li>
The line end marker that is currently used can be determined for every open file using <a href="javascript:call_link('abapget_dataset.html')" class="blue"><span class="qtext">GET DATASET</span></a>. <br><br>
<br></li>
</ul>
<A NAME="@@WITH NATIVE LINEFEED@@OPEN DATASET@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_1@1@"></A> <span class="bold">Alternative 1</span>
</span></p>
<P>
<span class="qtext">... WITH NATIVE LINEFEED</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This addition defines the line end marker independently of the
<a href="javascript:call_link('abapopen_dataset_access.html')" class="blue">access type</a> in accordance with the operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>, in other
words <span class="qtext400">"LF&#x201D;</span> for Unix, OS/390, and IBM i5/OS (previously known as OS/400), and <span class="qtext400">"CRLF&#x201D;</span> for MS Windows.
</P>
<P>
The line end marker is interpreted in accordance with the current code page. If a code page is specified
explicitly using the addition <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext">CODE
PAGE</span></a>, the control characters of the line end marker must be available or be written according to this code page. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
The addition <span class="qtext">WITH NATIVE LINEFEED</span> is intended for editing files on a host
computer that can also be accessed by other means. The addition receives the appropriate line end marker without the program needing to know the operating system. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
The following example shows the UTF 8 representation of the current line end marking. Comparisons with the corresponding control characters in
<a href="javascript:call_link('abenstring_template_glosry.html')" class="grey" title="Glossary Entry">string templates</a> ensure that it is either <span class="qtext400">"LF"</span> or <span class="qtext400">"CRLF"</span>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(dset) = 'test.dat'. <br> <br>OPEN DATASET dset FOR OUTPUT IN TEXT MODE ENCODING DEFAULT <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NATIVE LINEFEED. <br>
TRANSFER 'abc' TO dset. <br>CLOSE DATASET dset. <br> <br>DATA xstr TYPE xstring. <br>OPEN DATASET dset FOR INPUT IN BINARY MODE. <br>
READ DATASET dset INTO xstr. <br>CLOSE DATASET dset. <br> <br>SHIFT xstr BY 3 PLACES LEFT IN BYTE MODE. <br>
 <br>cl_demo_output=>display( xstr ). <br> <br>DELETE DATASET dset. <br> <br>ASSERT xstr = cl_abap_conv_codepage=>create_out( )->convert( |\n| ) OR <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xstr = cl_abap_conv_codepage=>create_out( )->convert( |\r\n| ). <br><br>
</span>
</p>
<A NAME="@@WITH SMART LINEFEED@@OPEN DATASET@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_2@2@"></A> <span class="bold">Alternative 2</span>
</span></p>
<P>
<span class="qtext">... WITH SMART LINEFEED</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This addition depends on the <a href="javascript:call_link('abapopen_dataset_access.html')" class="blue">access type</a>:
</P>
<ul class="disc">
<li>
In files that are opened for reading using <span class="qtext">FOR INPUT</span>, both <span class="qtext400">"LF"</span>
and <span class="qtext400">"CRLF"</span> are interpreted as a line end marker. When opening an EBCDIC
file with the addition <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext">CODEPAGE</span></a>,
the corresponding ASCII control characters are recognized alongside the <span class="qtext400">"LF"</span>,
<span class="qtext400">"CRLF"</span>, and EBCDIC control characters. In addition, the EBCDIC control characters <span class="qtext400">"NL"</span> (line separator) is also interpreted as a line end marker. <br>
<br></li>
<li>
In files opened for appending or changing with <span class="qtext">FOR APPENDING</span> or <span class="qtext">FOR
UPDATE</span>, the program searches for a line end marker that is already used in the file. The end
of the file is identified first. If no line end marker is found here, a number of characters at the
beginning is analyzed. If a line end marker is found, this is used when writing to the file. This is
also affected by the addition <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext">CODE
PAGE</span></a>. For example, ASCII line end markers are recognized and used in a file opened with EBCDIC,
but not the other way round. If no line end marker is found or no search is possible (for example, if
the file is opened with the addition <a href="javascript:call_link('abapopen_dataset_os_addition.html')" class="blue"><span class="qtext">FILTER</span></a>), the line end marker is defined in accordance with the operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>, as with the addition <span class="qtext">WITH NATIVE LINEFEED</span>. <br>
<br></li>
<li>
In files opened for writing using <span class="qtext">FOR OUTPUT</span>, the line end marker is determined in accordance with the operating system the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>, as with the addition <span class="qtext">WITH NATIVE LINEFEED</span>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Note
</span></p>
<P>
The addition <span class="qtext">WITH SMART LINEFEED</span> is intended for the generic editing of files
in heterogeneous environments. The line end marker is recognized and set for different formats. Using this addition is the best solution for most application cases. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
Writes a text file with the line end marking <span class="qtext400">"CRLF"</span>. Using the addition
<span class="qtext">WITH SMART LINEFEED</span> (open to read), this marking is also detected on platforms that expect <span class="qtext400">"LF"</span>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(dset) = 'test.dat'. <br> <br>OPEN DATASET dset FOR OUTPUT IN TEXT MODE ENCODING DEFAULT <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH WINDOWS LINEFEED. <br>
TRANSFER 'abc' TO dset. <br>TRANSFER 'def' TO dset. <br>CLOSE DATASET dset. <br> <br>DATA str TYPE string. <br>
OPEN DATASET dset FOR INPUT IN TEXT MODE ENCODING DEFAULT <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH SMART LINEFEED. <br>
DATA out TYPE string. <br>WHILE sy-subrc = 0. <br>&nbsp;&nbsp;READ DATASET dset INTO str. <br>&nbsp;&nbsp;out &amp;&amp;= str. <br>
ENDWHILE. <br>CLOSE DATASET dset. <br> <br>cl_demo_output=>display( out ). <br> <br>DELETE DATASET dset. <br><br>
</span>
</p>
<A NAME="@@WITH UNIX LINEFEED@@OPEN DATASET@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_3@3@"></A> <span class="bold">Alternative 3</span>
</span></p>
<P>
<span class="qtext">... WITH UNIX LINEFEED</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The line end marker is set to <a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">"LF"</a> regardless of the
<a href="javascript:call_link('abapopen_dataset_access.html')" class="blue">access type</a> and operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>.
</P>
<P>
The line end marker is interpreted in accordance with the current code page. If a code page is specified
explicitly using the addition <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext">CODE
PAGE</span></a>, the control character for the line end marker must be available or be written according to this code page. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
The addition <span class="qtext">WITH UNIX LINEFEED</span> is intended for editing Unix files in which the specific line end markers are to be retained, even if the operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a> is <a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">MS</a> Windows. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
The following example sets the line end marking to <span class="qtext400">"LF"</span>. This marking is detected after it is read to a binary file and compared with the corresponding control character in a
<a href="javascript:call_link('abenstring_template_glosry.html')" class="grey" title="Glossary Entry">string template</a>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(dset) = 'test.dat'. <br> <br>OPEN DATASET dset FOR OUTPUT IN TEXT MODE ENCODING DEFAULT <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH UNIX LINEFEED. <br>
TRANSFER 'abc' TO dset. <br>CLOSE DATASET dset. <br> <br>DATA xstr TYPE xstring. <br>OPEN DATASET dset FOR INPUT IN BINARY MODE. <br>
READ DATASET dset INTO xstr. <br>CLOSE DATASET dset. <br> <br>SHIFT xstr BY 3 PLACES LEFT IN BYTE MODE. <br>
 <br>cl_demo_output=>display( xstr ). <br> <br>DELETE DATASET dset. <br> <br>ASSERT xstr = cl_abap_conv_codepage=>create_out( )->convert( |\n| ). <br><br>
</span>
</p>
<A NAME="@@WITH WINDOWS LINEFEED@@OPEN DATASET@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_4@4@"></A> <span class="bold">Alternative 4</span>
</span></p>
<P>
<span class="qtext">... WITH WINDOWS LINEFEED</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The line end marker is set to <span class="qtext400">"CRLF"</span> regardless of the
<a href="javascript:call_link('abapopen_dataset_access.html')" class="blue">access type</a> and operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a>.
</P>
<P>
The line end marker is interpreted in accordance with the current code page. If a code page is specified
explicitly using the addition <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext">CODE
PAGE</span></a>, the control character for the line end marker must be available or be written according to this code page. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
The addition <span class="qtext">WITH WINDOWS LINEFEED</span> is intended for use with MS Windows files in which the specific line end marker is to be retained, even if the operating system of the current AS Instance
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a> is Unix, OS/390, or IBM i5/OS (previously known as OS/400). <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
The following example sets the line end marking to <span class="qtext400">"CRLF"</span>. This marking is detected after it is read to a binary file and compared with the corresponding control character in a
<a href="javascript:call_link('abenstring_template_glosry.html')" class="grey" title="Glossary Entry">string template</a>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(dset) = 'test.dat'. <br> <br>OPEN DATASET dset FOR OUTPUT IN TEXT MODE ENCODING DEFAULT <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH WINDOWS LINEFEED. <br>
TRANSFER 'abc' TO dset. <br>CLOSE DATASET dset. <br> <br>DATA xstr TYPE xstring. <br>OPEN DATASET dset FOR INPUT IN BINARY MODE. <br>
READ DATASET dset INTO xstr. <br>CLOSE DATASET dset. <br> <br>SHIFT xstr BY 3 PLACES LEFT IN BYTE MODE. <br>
 <br>cl_demo_output=>display( xstr ). <br> <br>DELETE DATASET dset. <br> <br>ASSERT xstr = cl_abap_conv_codepage=>create_out( )->convert( |\r\n| ).
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapopen_dataset_linefeed.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:09 GMT -->
</html>
