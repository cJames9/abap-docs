<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPTYPES_SECONDARY_KEY -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abaptypes_secondary_key.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:43 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="TYPES - secondary_key">
<meta name="keywords" content="ABAP, Secondary Key, Secondary Table Key">
<title>
TYPES - secondary_key - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abaptypes_secondary_key.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abaptypes_secondary_key.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendeclarations.html')" class="blue">Declarations</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_declarations.html')" class="blue">Declaration Statements</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentypes_and_objects.html')" class="blue">Data Types and Data Objects</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentypes_statements.html')" class="blue">Declaring Data Types</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abaptypes.html')" class="blue">TYPES</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abaptypes_itab.html')" class="blue">TYPES - TABLE OF</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abaptypes_keydef.html')" class="blue">TYPES - tabkeys</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@KEY@@TYPES@@"></A>
<A NAME="@@UNIQUE HASHED KEY@@TYPES@@"></A>
<A NAME="@@UNIQUE SORTED KEY@@TYPES@@"></A>
<A NAME="@@NON-UNIQUE SORTED KEY@@TYPES@@"></A>
<A NAME="@@COMPONENTS@@TYPES@@"></A>
<p><span class="h1">
TYPES - secondary_key <br><br>
</span></p>
<P>
<a href="javascript:call_link('abaptypes_shortref.html')" class="blue">Quick Reference</a> <br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>{</i>UNIQUE HASHED<i class=bn>}</i><i class=bn>|</i><i class=bn>{</i>UNIQUE SORTED<i
class=bn>}</i><i class=bn>|</i><i class=bn>{</i>NON-UNIQUE SORTED<i class=bn>}</i></span> <br><span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;KEY key_name COMPONENTS comp1 comp2 ...</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Defines a <a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a> with an internal table type. An internal table can have up to 15 secondary keys.
</P>
<P>
<span class="bold">Types of Secondary Keys</span>
</P>
<P>
Secondary keys are split into three types based on the type of access and their uniqueness:
</P>
<ul class="disc">
<li>
Unique secondary <a href="javascript:call_link('abenhash_key_glosry.html')" class="grey" title="Glossary Entry">hash keys</a> defined using <span class="qtext">UNIQUE HASHED</span> that are associated with table rows using a
<a href="javascript:call_link('abenhash_algorithm_glosry.html')" class="grey" title="Glossary Entry">hash algorithm</a> <br>
<br></li>
<li>
Unique secondary <a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted keys</a> defined using <span class="qtext">UNIQUE SORTED</span> that are associated with table rows using a
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a> (in which the key fields are sorted in ascending order) <br>
<br></li>
<li>
Non-unique secondary <a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted keys</a> defined using <span class="qtext">NON-UNIQUE SORTED</span> that are associated with table rows using a
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a> (in which the key fields are sorted in ascending order).
<br></li>
</ul>
<P>
<span class="bold">Names of Secondary Keys</span>
</P>
<P>
Each secondary key has a unique name with which it can be addressed. The name must be specified directly as <span class="qtext">key_name</span> and must comply with the
<a href="javascript:call_link('abennaming_conventions.html')" class="blue">naming conventions</a>. The name specified cannot
be one of the predefined names <span class="qtext">primary_key</span> or <span class="qtext">loop_key</span>. In addition, the names of secondary keys and any alias name used for the
<a href="javascript:call_link('abaptypes_primary_key.html')" class="blue">primary key</a> must be unique.
</P>
<P>
<span class="bold">Key Fields</span>
</P>
<P>
The key fields of the secondary key can be defined in the following ways; the order is significant:
</P>
<ul class="disc">
<li>
Individual components <span class="qtext">comp1 comp2 ...</span> of the row type are specified after
<span class="qtext">KEY</span>. The row type must be structured and the components cannot be table types nor can they contain table types as components. <br>
<br></li>
<li>
If the whole table row is to be defined as a key, the
<a href="javascript:call_link('abenpseudo_component_glosry.html')" class="grey" title="Glossary Entry">pseudo component</a> <span class="qtext">
table_line</span> can be specified as the only component <span class="qtext">comp</span> after <span class="qtext">
KEY</span>. This is possible for all row types that are not table types or that do not contain table types as components.
<br></li>
</ul>
<P>
In an operation that changes the content of individual rows of an internal table, the key fields of a secondary table key are read-only only if the secondary key is used during this operation. <br><br>
</P>
<p><span class="h4">
Programming Guideline
</span></p>
<P>
<a href="javascript:call_link('abensecondary_key_guidl.html')" class="lnkpurple" title="Guideline">Use secondary keys in a way that benefits the table.</a>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
When internal tables are accessed using the statements <a href="javascript:call_link('abapread_table.html')" class="blue"><span class="qtext">
READ TABLE itab</span></a>, <a href="javascript:call_link('abaploop_at_itab.html')" class="blue"><span class="qtext">LOOP AT
itab</span></a>, <a href="javascript:call_link('abapmodify_itab.html')" class="blue"><span class="qtext">MODIFY
itab</span></a>, and <a href="javascript:call_link('abapdelete_itab.html')" class="blue"><span class="qtext">DELETE itab</span></a> or in reads using
<a href="javascript:call_link('abentable_expressions.html')" class="blue">table expressions</a> and in
<a href="javascript:call_link('abaptypes_mesh.html')" class="blue">mesh types</a> and
<a href="javascript:call_link('abenmesh_pathes.html')" class="blue">mesh paths</a>, a secondary key can be used to specify the rows to be processed or the processing order. To do this, the additions <span class="qtext">WITH <i
class=bn>[</i>TABLE<i class=bn>]</i> KEY ... COMPONENTS</span> or <span class="qtext">USING KEY</span> must be specified. A secondary key is never used implicitly.
<br><br></li>
<li>
The statement <a href="javascript:call_link('abapinsert_itab.html')" class="blue"><span class="qtext">INSERT itab</span></a>
determines the insert position using the primary key and primary index only. A secondary key can be
specified only for the source table from which multiple rows are copied. The latter also applies to the statement <a href="javascript:call_link('abapappend.html')" class="blue"><span class="qtext">APPEND</span></a>.
<br><br></li>
<li>
A secondary key is never generic. When it is defined, all secondary fields and the uniqueness must be specified fully. An internal table type can, however, be generic with respect to its number of secondary keys.
<br><br></li>
<li>
<a href="javascript:call_link('abaptypes_primary_key.html')" class="blue"><span class="qtext">DEFAULT KEY</span></a> cannot be specified for secondary keys.
<br><br></li>
<li>
Structured components in particular can be specified as key fields, provided that the components meet the other requirements. When a structured key field is evaluated, the rules for
<a href="javascript:call_link('abenlogexp_rules_operands_struc.html')" class="blue">structure comparisons</a> apply.
<br><br></li>
<li>
If different table keys for an internal table contain the same components, the syntax check issues a warning (which can be hidden using a pragma).
<br><br></li>
<li>
With the exception of the restrictions outlined above, you can name secondary keys as you wish, but
should make sure that you do not use the component names of the internal table. The name <span class="qtext">loop_key</span>
is reserved for the explicitly specifying the key used for <a href="javascript:call_link('abaploop_at_itab.html')" class="blue"><span class="qtext">LOOP</span></a> processing.
<br><br></li>
<li>
Key fields can also have <a href="javascript:call_link('abenreference_type_glosry.html')" class="grey" title="Glossary Entry">reference
types</a>. However, particularly for sorted keys this is not recommended, as sorting reference variables
is questionable. For non-initial invalid references, no order is defined. A runtime error occurs if such a reference has to be compared within the framework of a key access.
<br><br></li>
<li>
The internal management of secondary keys in an internal table can involve significant
<a href="javascript:call_link('abenitab_key_memory.html')" class="blue">memory consumption</a> and
<a href="javascript:call_link('abenitab_key_secondary_update.html')" class="blue">updates</a>. For this reason, secondary keys should be used sparingly and only implemented if their benefits outweigh the costs. See, for example, the executable example
<a href="javascript:call_link('abendelete_itab_using_key_abexa.html')" class="blue">Deleting Rows Using Keys</a>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Defines a table type with a primary key and two secondary keys <span class="qtext">hash_key</span> and
<span class="qtext">sort_key</span>. The primary key in a standard table cannot be unique. The secondary
key <span class="qtext">hash_key</span> has the same components as the primary key and must be a unique
hash key. The sorted key <span class="qtext">sort_key</span> could also be defined as unique, but this
is not of benefit in the example shown here, since a customer ID can appear more than once in the reservation
table. The two syntax forms shown here differ by either specifying the name <span class="qtext">primary_key</span> for the primary key or not specifying it. They do, however, have the same meaning.
</P>
<P>
Syntax form without the name <span class="qtext">primary_key</span> specified:
</P>
<p class="qtextml1">
<span class="qtext">
TYPES sbook_tab <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE STANDARD TABLE <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OF sbook <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NON-UNIQUE KEY carrid connid fldate bookid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH UNIQUE HASHED KEY hash_key <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS carrid connid fldate bookid <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NON-UNIQUE SORTED KEY sort_key <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS customid.
</span>
</p>
<P>
Syntax form with the name <span class="qtext">primary_key</span> specified:
</P>
<p class="qtextml1">
<span class="qtext">
TYPES sbook_tab <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE STANDARD TABLE <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OF sbook <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NON-UNIQUE KEY primary_key <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS carrid connid fldate bookid <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH UNIQUE HASHED KEY hash_key <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS carrid connid fldate bookid <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NON-UNIQUE SORTED KEY sort_key <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS customid.
</span>
</p>
<p><span class="h4">
Example
</span></p>
<P>
The program <span class="lnkgrey">DEMO_SECONDARY_KEYS</span> demonstrates the declaration and use of a secondary table key and the resulting performance gains. <br><br>
</P>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abaptypes_secondary_key.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:43 GMT -->
</html>
