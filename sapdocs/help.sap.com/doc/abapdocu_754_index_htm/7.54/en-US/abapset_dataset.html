<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPSET_DATASET -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapset_dataset.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:36 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="SET DATASET">
<meta name="keywords" content="ABAP, SET DATASET">
<title>
SET DATASET - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapset_dataset.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapset_dataset.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_files.html')" class="blue">ABAP File Interface</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenfile_interface_statements.html')" class="blue">Statements for the ABAP File Interface</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@SET DATASET@@!ABAP_STATEMENT!@@"></A>
<p><span class="h1">
SET DATASET <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapset_dataset_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">SET DATASET dset <i class=bn>[</i>POSITION <i class=bn>{</i>pos<i class=bn>|</i><i class=bn>{</i>END OF FILE<i class=bn>}</i><i class=bn>}</i><i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>ATTRIBUTES attr<i class=bn>]</i>.</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... POSITION <i class=bn>{</i>pos<i class=bn>|</i><i class=bn>{</i>END OF FILE<i class=bn>}</i><i class=bn>}</i></span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... ATTRIBUTES attr</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This statement uses the addition <span class="qtext">POSITION</span> to determine the position of the
file pointer in the file specified in <span class="qtext">dset</span>. It uses the addition <span class="qtext">ATTRIBUTES</span>
to set additional attributes for the file. At least one of these two additions must be specified.
</P>
<P>
<span class="qtext">dset</span> expects a character-like data object containing the
<a href="javascript:call_link('abenphysical_filename_glosry.html')" class="grey" title="Glossary Entry">physical name</a> of the file. The file must already be open, otherwise a handleable exception is raised. <br><br>
</P>
<P>
<span class="bold">Return Value</span><br>
</P>
<P>
The statement <span class="qtext">SET DATASET</span> always sets <span class="qtext">sy-subrc</span> to the value 0 or raises an exception. <br><br>
</P>
<A NAME="@@POSITION@@SET DATASET@@"></A>
<A NAME="@@END OF FILE@@SET DATASET@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... POSITION <i class=bn>{</i>pos<i class=bn>|</i><i class=bn>{</i>END OF FILE<i class=bn>}</i><i class=bn>}</i></span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This addition sets the file pointer in the file, either in the position specified in <span class="qtext">pos</span>, or at the end of the file. <span class="qtext">pos</span> expects a numeric data object.
</P>
<P>
The position is specified in bytes; the start of the file corresponds to position 0. If the value of
<span class="qtext">pos</span> is -1, the file pointer is set at the end of the file. Other negative values are not permitted.
</P>
<P>
The following cases need to be distinguished:
</P>
<ol>
<li>
If the file is open for reads and the value of <span class="qtext">pos</span> is greater than the length
of the file, the file pointer is positioned outside the file. Unless the position is changed, no data can be read. <br>
<br></li>
<li>
If the file is opened for writes and the value of <span class="qtext">pos</span> is greater than the
length of the file, it is filled with hexadecimal 0s from the end of the file to the specified position the next time a write is performed on it. <br>
<br></li>
<li>
If the file is opened for appending, the position specified is ignored and the file pointer remains positioned at the end of the file. <br>
<br></li>
<li>
If the file is opened for changes, and the value of <span class="qtext">pos</span> is greater than the
length of the file, it is filled with hexadecimal 0s from the end of the file to the specified position the next time a write is performed on it.
<br></li>
</ol>
<P>
The addition <span class="qtext">POSITION</span> cannot be specified for files that have been opened
with the addition <a href="javascript:call_link('abapopen_dataset_os_addition.html')" class="blue"><span class="qtext">FILTER</span></a> of the statement <span class="qtext">OPEN DATASET</span>. This raises a handleable exception. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
For file sizes greater than 2 GB, a data object <span class="qtext">pos</span> of data type <span class="qtext">i</span> is not sufficient for entering all the possible positions of the file pointer.
<br><br></li>
<li>
Free position specifications are more suitable for binary files than for text files. In text files,
positions depend on the character format, line-end markers, and in UTF-8 files, also on a Byte Order
Mark (BOM). In text files, only place the file pointer in positions known precisely, for example positions obtained using <a href="javascript:call_link('abapget_dataset.html')" class="blue"><span class="qtext">GET DATASET</span></a>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
When writing, the file is read from the start of the file until the first end-of-line marker, and then
the new content is written starting from the end of the file. If the file pointer is not set explicitly
after a read, the last <a href="javascript:call_link('abaptransfer.html')" class="blue"><span class="qtext">TRANSFER</span></a> statements would overwrite the file after the first end-of-line marker.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: file TYPE string VALUE 'test1.dat', <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;&nbsp;TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text TYPE string. <br> <br>OPEN DATASET file FOR OUTPUT IN TEXT MODE <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ENCODING DEFAULT <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH SMART LINEFEED. <br>
 <br>TRANSFER: 'Line1' TO file, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Line2' TO file, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Line3' TO file. <br> <br>SET DATASET file POSITION 0. <br>
READ DATASET file INTO text. <br>SET DATASET file POSITION END OF FILE. <br> <br>TRANSFER: 'Line4' TO file, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Line5' TO file, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Line6' TO file. <br> <br>CLOSE DATASET file. <br><br>
</span>
</p>
<A NAME="@@ATTRIBUTES@@SET DATASET@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... ATTRIBUTES attr</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
 This addition can be used to change some of the attributes that were determined when the file was opened with the statement
 <a href="javascript:call_link('abapopen_dataset.html')" class="blue"><span class="qtext">OPENDATASET</span></a>. <span class="qtext">attr</span> expects a data object of type <span class="qtext">dset_changeable_attributes</span> from the
<a href="javascript:call_link('abentype_group_1_glosry.html')" class="grey" title="Glossary Entry">type group</a> <span class="lnkgrey">DSET</span>
(see the table below). The structure <span class="qtext">dset_changeable_attributes</span> corresponds
to the substructure <span class="qtext">changeable</span> of the structure <span class="qtext">dset_attributes</span>. Data objects of the structure <span class="qtext">dset_attributes</span> can be filled using the statement
 <a href="javascript:call_link('abapget_dataset.html')" class="blue"><span class="qtext">GET DATASET</span></a>. <br><br>
</P>
<table border>
<tr>
<td><span class="bold">Component</span></td>
<td><span class="bold">Meaning</span></td>
</tr>
<tr>
<td><span class="qtext">indicator</span></td>
<td>Structure with the components <span class="qtext">repl_char</span>, <span class="qtext">conv_errors</span>,
<span class="qtext">code_page</span>, <span class="qtext">endian</span>, and <span class="qtext">linefeed_mode</span>.
If these components contain the value <span class="qtext400">"X"</span> in <span class="qtext">attr</span>,
the values are used in the components with the same names in the structure <span class="qtext">dset_changeable_attributes</span> when changes are made.</td>
</tr>
<tr>
<td><span class="qtext">repl_char</span></td>
<td>In this component of <span class="qtext">attr</span>, a single-character character-like replacement
character can be specified to overwrite the replacement character specified when the file was opened
using the addition <a href="javascript:call_link('abapopen_dataset_error_handling.html')" class="blue"><span class="qtext">REPLACEMENT CHARACTER</span></a> of the statement <span class="qtext">OPEN DATASET</span>.</td>
</tr>
<tr>
<td><span class="qtext">conv_errors</span></td>
<td>In this component of <span class="qtext">attr</span>, the value <span class="qtext400">"I"</span>
or <span class="qtext400">"R"</span> can be specified to overwrite the setting made when the file was
opened using the addition <a href="javascript:call_link('abapopen_dataset_error_handling.html')" class="blue"><span class="qtext">IGNORING
CONVERSION ERRORS</span></a>. The value <span class="qtext400">"I"</span> suppresses the exceptions, <span class="qtext400">"R"</span> raises the exceptions.</td>
</tr>
<tr>
<td><span class="qtext">code_page</span></td>
<td>In this component of <span class="qtext">attr</span>, a
<a href="javascript:call_link('abencodepage_glosry.html')" class="grey" title="Glossary Entry">code page</a> from the column
CPCODEPAGE of the database table <span class="lnkgrey">TCP00</span> can be specified, to overwrite the
code page specified when the file was opened using the addition <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext">CODE PAGE</span></a> of the statement <span class="qtext">OPEN DATASET</span>.</td>
</tr>
<tr>
<td><span class="qtext">endian</span></td>
<td>In this component of <span class="qtext">attr</span>, the value <span class="qtext400">"B"</span>
or <span class="qtext400">"L"</span> can be specified to overwrite the setting made when the file was opened using the additions <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue"><span class="qtext"><i
class=bn>{</i>BIG<i class=bn>|</i>LITTLE<i class=bn>}</i> ENDIAN</span></a> of the statement <span class="qtext">OPEN
DATASET</span>. The value <span class="qtext400">"B"</span> sets the byte order to Big Endian, the value <span class="qtext400">"L"</span> sets it to Little Endian.</td>
</tr>
<tr>
<td><span class="qtext">linefeed_mode</span></td>
<td>In this component of <span class="qtext">attr</span>, one of the values <span class="qtext400">"N"</span>,
<span class="qtext400">"S"</span>, <span class="qtext400">"U"</span> or <span class="qtext400">"W"</span>
can be entered to overwrite the setting made using the addition <a href="javascript:call_link('abapopen_dataset_linefeed.html')" class="blue"><span class="qtext">WITH NATIVE<i
class=bn>|</i>SMART<i class=bn>|</i>UNIX<i class=bn>|</i>WINDOWS LINEFEED</span></a> of the statement <span class="qtext">OPEN DATASET</span> as appropriate.</td>
</tr>
</table><br>
<P>
For some components, the possible input values are defined as constants in the type group <span class="lnkgrey">DSET</span>.
</P>
<P>
The values entered in <span class="qtext">attr</span> must comply with the syntax rules for the relevant additions of the statement <span class="qtext">OPEN DATASET</span>, otherwise this raises a handleable exception:
</P>
<ul class="disc">
<li>
The components <span class="qtext">repl_char</span> and <span class="qtext">conv_errors</span> can only be used when making changes if the file is opened as a
<a href="javascript:call_link('abentext_file_glosry.html')" class="grey" title="Glossary Entry">text file</a>,
<a href="javascript:call_link('abenlegacy_file_glosry.html')" class="grey" title="Glossary Entry">legacy</a> text file, or
<a href="javascript:call_link('abenlegacy_file_glosry.html')" class="grey" title="Glossary Entry">legacy</a> binary file, but not if it is opened as a
<a href="javascript:call_link('abenbinary_file_glosry.html')" class="grey" title="Glossary Entry">binary file</a> <br>
<br></li>
<li>
The components <span class="qtext">code_page</span> and <span class="qtext">endian</span> can only be used when making changes if the file is opened as a legacy text file or a legacy binary file. <br>
<br></li>
<li>
The component <span class="qtext">linefeed_mode</span> can only be used when making changes if the file is opened as a
<a href="javascript:call_link('abentext_file_glosry.html')" class="grey" title="Glossary Entry">text file</a> or a
<a href="javascript:call_link('abenlegacy_file_glosry.html')" class="grey" title="Glossary Entry">legacy</a> text file and if
the line-end marker has been set explicitly using the addition <a href="javascript:call_link('abapopen_dataset_linefeed.html')" class="blue"><span class="qtext">WITH LINEFEED</span></a>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Note
</span></p>
<P>
The modifiable attributes do not affect the attributes of the file in the operating system, but rather the attributes with which the file is opened in ABAP, and which affect how it is handled in ABAP. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<P>
Depending on the non-modifiable attributes of the file <span class="qtext">test.dat</span>, some of its modifiable attributes are changed.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: dset TYPE string VALUE 'test.dat', <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attr TYPE dset_attributes. <br>
 <br>OPEN DATASET dset FOR INPUT IN LEGACY TEXT MODE <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NATIVE LINEFEED. <br>
 <br>... <br> <br>GET DATASET dset ATTRIBUTES attr. <br> <br>IF attr-fixed-mode = 'T' OR <br>&nbsp;&nbsp; attr-fixed-mode = 'LT'. <br>
&nbsp;&nbsp;attr-changeable = VALUE #( <br>&nbsp;&nbsp;&nbsp;&nbsp;indicator-conv_errors = 'X' <br>&nbsp;&nbsp;&nbsp;&nbsp;conv_errors = 'I' <br>
&nbsp;&nbsp;&nbsp;&nbsp;indicator-linefeed_mode = 'X' <br>&nbsp;&nbsp;&nbsp;&nbsp;linefeed_mode = 'S' ). <br>
&nbsp;&nbsp;IF attr-fixed-mode = 'LT'. <br>&nbsp;&nbsp;&nbsp;&nbsp;attr-changeable = VALUE #( BASE attr-changeable <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicator-code_page = 'X' <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code_page = '1100' ). <br>
&nbsp;&nbsp;ENDIF. <br>&nbsp;&nbsp;SET DATASET dset ATTRIBUTES attr-changeable. <br>ENDIF. <br> <br>CLOSE DATASET dset. <br><br>
</span>
</p>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span>
</P>
<P>
<span class="lnkgrey">CX_SY_CODEPAGE_CONVERTER_INIT</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The specified code page is not available for the current AS Instance. <br><span class="italic">Runtime error:</span> <span class="qtext">CONVT_CODEPAGE_INIT</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_CONVERSION_CODEPAGE</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The escape character cannot be displayed in the target code page.
 Escape characters and handling of conversion errors can only be changed in <span class="qtext">TEXT MODE</span> or in <span class="qtext">LEGACY ... MODE</span>. <br>
<span class="italic">Runtime error:</span> <span class="qtext">CONVT_CODEPAGE</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_OPEN_MODE</span>
</P>
<ul class="disc">
<li>
<span class="italic">Error Type:</span> READ_ONLY <br><span class="italic">Cause:</span> File is only open for reads. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_READ_ONLY</span>
<br><br></li>
<li>
<span class="italic">Error Type:</span> NOT_OPEN <br><span class="italic">Cause:</span> File is not open. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_NOT_OPEN</span>
<br><br></li>
<li>
<span class="italic">Error Type:</span> INCOMPATIBLE_MODE <br><span class="italic">Cause:</span> File opened in incompatible mode. <br>
<span class="italic">Runtime error:</span> <span class="qtext">DATASET_INCOMPATIBLE_MODE</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_POSITION</span>
</P>
<ul class="disc">
<li>
<span class="italic">Error Type:</span> SEEK_ERROR <br><span class="italic">Cause:</span> Error when positioning in file. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_SEEK_ERROR</span>
<br><br></li>
<li>
<span class="italic">Error Type:</span> TELL_ERROR <br><span class="italic">Cause:</span> No access to current writing/reading position in the file. <br>
<span class="italic">Runtime error:</span> <span class="qtext">DATASET_NO_POSITION</span>
<br><br></li>
<li>
<span class="italic">Error Type:</span> OFFSET_TOO_LARGE <br><span class="italic">Cause:</span> The specified offset for the file exceeds the defined <br>
system limit for the platform. <br>Runtime error: <span class="qtext">DATASET_OFFSET_TOO_LARGE</span> <br><br>
<br></li>
</ul>
<P>
<span class="bold">Non-Handleable Exceptions</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> An attempt was made to change the position in the case of a <span class="bold">pipe</span>. Pipes cannot, however, be positioned. <br>
<span class="italic">Runtime error:</span> <span class="qtext">DATASET_PIPE_POSITION</span> <br><br>
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapset_dataset.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:36 GMT -->
</html>
