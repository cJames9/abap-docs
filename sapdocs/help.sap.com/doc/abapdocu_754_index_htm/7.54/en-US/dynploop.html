<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- DYNPLOOP -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/dynploop.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:44 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="LOOP - WITH CONTROL">
<meta name="keywords" content="ABAP, Dynpro, LOOP - WITH CONTROL">
<title>
LOOP - WITH CONTROL - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=dynploop.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=dynploop.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_screens.html')" class="blue">SAP GUI User Dialogs</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_dynpros.html')" class="blue">General Dynpros</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_dynpros_dynpro_statements.html')" class="blue">Statements in the Dynpro Flow Logic</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendynp_table_controls.html')" class="blue">Table Controls</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@LOOP - WITH CONTROL@@!ABAP_DYNP_STATEMENT!@@"></A>
<p><span class="h1">
LOOP - WITH CONTROL <br><br>
</span></p>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">LOOP <i class=bn>[</i>AT itab <i class=bn>[</i>INTO wa<i class=bn>]</i> <i class=bn>[</i>CURSOR top_line<i
class=bn>]</i> <i class=bn>[</i>FROM n1<i class=bn>]</i> <i class=bn>[</i>TO n2<i class=bn>]</i><i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp; WITH CONTROL contrl.</span> <br><span class="qtext">&nbsp;&nbsp;...</span> <br><span class="qtext">ENDLOOP.</span> <br><br>
</P>
<p><span class="h2">
Variants:
</span></p>
<P>
   <A HREF="#!ABAP_VARIANT_1@1@" class="blue"> 1. <span class="qtext">LOOP WITH CONTROL contrl.</span> </A> <br>
<br><A HREF="#!ABAP_VARIANT_2@2@" class="blue"> 2. <span class="qtext">LOOP AT itab CURSOR cur <i class=bn>[</i>INTO wa<i class=bn>]</i></span> </A> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>CURSOR top_line<i class=bn>]</i> <i class=bn>[</i>FROM n1<i class=bn>]</i> <i class=bn>[</i>TO n2<i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH CONTROL contrl.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>

</P>
<P>
Definition of a loop in the <a href="javascript:call_link('abendynpro_flow_logic_glosry.html')" class="grey" title="Glossary Entry">dynpro flow logic</a> associated with a
<a href="javascript:call_link('abentable_control_glosry.html')" class="grey" title="Glossary Entry">table control</a> <span class="qtext">contrl</span>.
The loop sequentially processes the visible rows of the table control <span class="qtext">contrl</span>
by executing one loop pass for reach table control row. <span class="qtext">contrl</span> expects the
name of a table control of the dynpro. If the table control does not exist, the loop is ignored. The
statement block between <span class="qtext">LOOP</span> and <span class="qtext">ENDLOOP</span> can contain
the keywords <a href="javascript:call_link('dynpfield.html')" class="blue"><span class="qtext">FIELD</span></a>, <a href="javascript:call_link('dynpmodule.html')" class="blue">
<span class="qtext">MODULE</span></a>, <a href="javascript:call_link('dynpchain.html')" class="blue"><span class="qtext">CHAIN</span></a>,
and <a href="javascript:call_link('dynpendchain.html')" class="blue"><span class="qtext">ENDCHAIN</span></a> from the flow logic. Nesting of loops is not possible. Loops can be executed either with or without reference to an internal table.
</P>
<P>
If table controls are defined in a dynpro, one loop must be defined for each table control both in the
<a href="javascript:call_link('abenpbo_glosry.html')" class="grey" title="Glossary Entry">PBO</a> processing block and in the <a href="javascript:call_link('abenpai_glosry.html')" class="grey" title="Glossary Entry">PAI</a> processing block. <br><br>
</P>
<P>
<span class="bold">System Fields</span>
</P>
<P>
Within the loop pass, the system field <span class="qtext">sy-stepl</span> contains the number of the
current table control row, starting at the top visible row. The system field <span class="qtext">sy-loopc</span> contains the total number of table control rows displayed on the screen.
</P>
<p><span class="h4">
Note
</span></p>
<P>
 The loop is associated with a table control using the addition <span class="qtext">WITH CONTROL</span>.
The statement <a href="javascript:call_link('dynploop_obsolete.html')" class="blue"><span class="qtext">LOOP</span></a> without this addition processes standalone
<a href="javascript:call_link('abenstep_loop_glosry.html')" class="grey" title="Glossary Entry">step loops</a> and is obsolete. <br><br>
</P>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_1@1@"></A> <span class="bold">Variant 1</span>
</span></p>
<P>
<span class="qtext">LOOP WITH CONTROL contrl.</span> <br><span class="qtext">&nbsp;&nbsp;...</span><br><!-- /A --> <br><span class="qtext">ENDLOOP.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If the addition <span class="qtext">AT itab</span> is not specified, the content of the dynpro fields
of the current row of the table control <span class="qtext">contrl</span> is transported in a loop pass
from (at event PBO) or to (at event PAI) the data objects with the same names in the ABAP program. In
PBO processing, the transport is performed at the end of the loop pass and in PAI processing, at the start of the loop pass. The addition <span class="qtext">WITH CONTROL</span> must be specified both at PBO and PAI.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
For dynpro fields of the table control defined with a reference to flat structures in ABAP Dictionary,
the data objects with the same names in the ABAP program must be declared in the same way as regular
dynpro fields using <a href="javascript:call_link('abaptables.html')" class="blue"><span class="qtext">TABLES</span></a>; otherwise no data transport takes place.
<br><br></li>
<li>
In the loop, dialog modules can be called to process the relevant data objects of the ABAP program.
For example, data from an internal table can be read at PBO and written back to the table at PAI, after being processed on the screen. <br><br>
<br></li>
</ul>
<A NAME="@@CURSOR@@LOOP WITH CONTROL@@"></A>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_2@2@"></A> <span class="bold">Variant 2</span>
</span></p>
<P>
<span class="qtext">LOOP AT itab CURSOR cur <i class=bn>[</i>INTO wa<i class=bn>]</i></span> <br><span class="qtext">
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>CURSOR top_line<i class=bn>]</i> <i class=bn>[</i>FROM n1<i class=bn>]</i> <i class=bn>[</i>TO n2<i class=bn>]</i></span><br>
<!-- /A --> <br><span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp; WITH CONTROL contrl.</span> <br><span class="qtext">&nbsp;&nbsp;...</span> <br><span class="qtext">ENDLOOP.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If the addition <span class="qtext">AT itab</span> is specified, the internal table <span class="qtext">itab</span>
of the associated ABAP program is processed sequentially in parallel to the loop processing of the table
control. For each row of the table control, one row of the internal table is processed. The internal
table <span class="qtext">itab</span> must be an index table. The additions <span class="qtext">INTO</span>,
<span class="qtext">CURSOR</span>, <span class="qtext">FROM</span>, <span class="qtext">TO</span>, and
<span class="qtext">WITH CONTROL</span> can be specified only at PBO and not at PAI. At PAI, the internal table is used to create a reference to the table control.
</P>
<P>
The addition <span class="qtext">INTO</span> is used to specify a work area <span class="qtext">wa</span>
to which the current row of the internal table is assigned at PBO at the end of each loop pass. If the
addition <span class="qtext">wa</span> is not specified, an internal table with header line must be
used, which is then used implicitly instead of <span class="qtext">wa</span>. After the assignment,
the content of <span class="qtext">wa</span> or of the header line is transported to fields with the
same names in the current row of the table control. The work area <span class="qtext">wa</span> must
be a global data object of the ABAP program that matches the row type of the internal table. At PAI
time, only the work area <span class="qtext">wa</span> or the header line of the internal table is filled
with the content of the table control rows at the beginning of each loop pass. The content of the internal table is not modified automatically.
</P>
<P>
The syntax of the additions <span class="qtext">CURSOR</span>, <span class="qtext">FROM</span>, and <span class="qtext">TO</span> is the same as in the processing of
<a href="javascript:call_link('dynploop_obsolete.html')" class="blue">step loops</a>. In loops across table controls, additions
are possible but not necessary, because the table controls are designed to be controlled by the structure
of type CXTAB_CONTROL created using <a href="javascript:call_link('abapcontrols_tableview.html')" class="blue"><span class="qtext">CONTROLS</span></a>
in the ABAP program. Here, <span class="qtext">top_line</span> of component TOP_LINE corresponds to
this structure while the number of rows to be displayed can be controlled using the component LINES
instead of <span class="qtext">n1</span> and <span class="qtext">n2</span>. If <span class="qtext">n1</span>
is still specified for table controls, the content of component CURRENT_LINE is calculated as follows,
differing from the method shown at <a href="javascript:call_link('abapcontrols_tableview.html')" class="blue"><span class="qtext">CONTROLS</span></a>: <span class="qtext">sy-stepl</span>+ (TOP_LINE - 1) + (<span class="qtext">n1</span> - 1).
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
For dynpro fields of the table control defined with a reference to flat structures in ABAP Dictionary,
the data objects with the same names in the ABAP program must be declared in the same way as regular
dynpro fields using <a href="javascript:call_link('abaptables.html')" class="blue"><span class="qtext">TABLES</span></a>; otherwise no data transport takes place.
<br><br></li>
<li>
Between <span class="qtext">LOOP</span> and <span class="qtext">ENDLOOP</span>, no dialog module must
be called at PBO to read the data from the internal table. At PAI, however, this is necessary provided
the transported data needs to be evaluated. For example, the internal table can be modified in accordance with the user entries.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
If a table control FLIGHT_TAB is defined on the screen of a dynpro, the associated dynpro flow logic
may look like this. The loop is executed with reference to the internal table <span class="qtext">spfli_tab</span>.
At PBO, the loop calls a dialog module <span class="qtext">prepare_tab</span> to fill the internal table.
In the loop, no dialog module is called at PBO, because the table control in this case is filled automatically.
At PAI, a dialog module <span class="qtext">modify_tab</span> is called in the loop to save the changes
the user entered in the table control to the internal table. The associated programming section of the
ABAP program is in the example for <a href="javascript:call_link('abapcontrols_tableview.html')" class="blue"><span class="qtext">CONTROLS</span></a>.
</P>
<dl>

<dd>
<span class="qtext">PROCESS BEFORE OUTPUT.</span> <br><span class="qtext">&nbsp;&nbsp;MODULE prepare_tab.</span> <br>
<span class="qtext">&nbsp;&nbsp;LOOP AT spfli_tab INTO spfli WITH CONTROL flight_tab.</span> <br><span class="qtext">&nbsp;&nbsp;ENDLOOP.</span> <br>
<span class="qtext">PROCESS AFTER INPUT.</span> <br><span class="qtext">&nbsp;&nbsp;LOOP AT spfli_tab.</span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;MODULE modify_tab.</span> <br><span class="qtext">&nbsp;&nbsp;ENDLOOP.</span>
</dd>
</dl>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('dynpendloop.html')" class="blue">ENDLOOP</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/dynploop.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:44 GMT -->
</html>
