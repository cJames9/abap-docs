<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPCALL_FUNCTION_BACKGROUND_TASK -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapcall_function_background_task.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:34 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="CALL FUNCTION - IN BACKGROUND TASK">
<title>
CALL FUNCTION - IN BACKGROUND TASK - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapcall_function_background_task.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapcall_function_background_task.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_obsolete.html')" class="blue">Obsolete Language Elements</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenextern_obsolete.html')" class="blue">Obsolete Data and Communication Interfaces</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenrfc_obsolete.html')" class="blue">Obsolete Transactional RFC</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@IN BACKGROUND TASK@@CALL FUNCTION (obsolete)@@"></A>
<A NAME="@@DESTINATION@@CALL FUNCTION IN BACKGROUND TASK (obsolete)@@"></A>
<p><span class="h1">
CALL FUNCTION - IN BACKGROUND TASK <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapcall_function_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Obsolete Syntax</span>
</span></p>
<P>
<span class="qtext">CALL FUNCTION func IN BACKGROUND TASK</span> <br><span class="qtext">&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>AS SEPARATE UNIT<i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>DESTINATION dest<i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; <a href="javascript:call_link('abapcall_function_background_para.html')" class="blue">parameter_list</a></span>. <br><br>
</P>
<p><span class="h3">
Addition:
</span></p>
<P>
   <A HREF="#!ABAP_ONE_ADD@1@" class="blue"> <span class="qtext">... AS SEPARATE UNIT</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Transactional call (tRFC) of a <a href="javascript:call_link('abenremote_enabled_fm_glosry.html')" class="grey" title="Glossary Entry">remote-enabled function module</a> specified in <span class="qtext">func</span> using the
<a href="javascript:call_link('abenrfc_interface_glosry.html')" class="grey" title="Glossary Entry">RFC interface</a>. Using the addition <span class="qtext">DESTINATION</span>, a unique
<a href="javascript:call_link('abenrfc_destination.html')" class="blue">destination</a> can be specified in <span class="qtext">dest</span>.
If the destination is not specified, the destination <span class="qtext400">"NONE"</span> is used implicitly. <span class="qtext">func</span> and <span class="qtext">dest</span> expect character-like data objects.
</P>
<P>
The transactional call registers the name of the called function, together with the destination and
the actual parameters passed in <a href="javascript:call_link('abapcall_function_background_para.html')" class="blue"><span class="qtext">parameter_list</span></a> for the current
<a href="javascript:call_link('abensap_luw_glosry.html')" class="grey" title="Glossary Entry">SAP LUW</a> in the database tables <span class="lnkgrey">ARFCSSTATE</span> and <span class="lnkgrey">ARFCSDATA</span> of the current
<a href="javascript:call_link('abensap_nw_abap_glosry.html')" class="grey" title="Glossary Entry">AS ABAP</a> under a unique
transaction ID (abbreviated as TID, stored in a structure of type ARFCTID from ABAP Dictionary, viewed
using transaction <span class="lnkgrey">SM58</span>). After registration, the calling program is continued after the statement <span class="qtext">CALL FUNCTION</span>.
</P>
<P>
When the <a href="javascript:call_link('abapcommit.html')" class="blue"><span class="qtext">COMMIT WORK</span></a> statement
is executed, the function modules registered for the current SAP LUW are started in the order in which
they were registered. The statement <a href="javascript:call_link('abaprollback.html')" class="blue"><span class="qtext">ROLLBACK WORK</span></a> deletes all previous registrations for the current SAP LUW.
</P>
<P>
If the specified destination is not available when <span class="qtext">COMMIT WORK</span> is executed, an
<a href="javascript:call_link('abenexecutable_program_glosry.html')" class="grey" title="Glossary Entry">executable program</a> called RSARFCSE is started in
<a href="javascript:call_link('abenbackround_processing_glosry.html')" class="grey" title="Glossary Entry">background processing</a>.
By default, this tries to start the function modules registered for a SAP LUW in their destination every
15 minutes and up to 30 times. Changes can be made to these parameters using transaction <span class="lnkgrey">SM59</span>.
If the destination does not become available within the defined time, it is recorded in the database
table <span class="lnkgrey">ARFCSDATA</span> as the entry <span class="qtext400">"CPICERR"</span>. By default, this entry in database table <span class="lnkgrey">ARFCSSTATE</span> is deleted after eight days.
</P>
<p><span class="h4">
Note
</span></p>
<P>
<a href="javascript:call_link('abenbg_remote_function_glosry.html')" class="grey" title="Glossary Entry">background RFC (bgRFC)</a>
executed with the statement <a href="javascript:call_link('abapcall_function_background_unit.html')" class="blue"><span class="qtext">CALL
FUNCTION IN BACKGROUND UNIT</span></a> is the enhanced successor technology of transactional RFC (tRFC) and makes this technology obsolete. It is strongly recommended to use bgRFC instead of tRFC.
</P>
<P>
<span class="bold">More Information</span>
</P>
<P>
More information about tRFC can be found in the <span class="lnkgrey">RFC</span> documentation on <a href="http://help.sap.com/" target="blank" class="blue">SAP Help Portal</a>. <br><br>
</P>
<A NAME="@@AS SEPARATE UNIT@@CALL FUNCTION IN BACKGROUND TASK (obsolete)@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ONE_ADD@1@"></A> <span class="bold">Addition</span>
</span></p>
<P>
<span class="qtext">... AS SEPARATE UNIT</span> <!-- /A -->  <br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
When using the addition <span class="qtext">AS SEPARATE UNIT</span>, the relevant function module is executed in a separate
<a href="javascript:call_link('abenrfc_session_glosry.html')" class="grey" title="Glossary Entry">RFC session</a>, in which the
global data of the function group is not influenced by previous calls. Each function module that is
registered with the addition <span class="qtext">AS SEPARATE UNIT</span> is given a separate transaction ID. Without the addition <span class="qtext">AS SEPARATE UNIT</span>, the usual
<a href="javascript:call_link('abenrfc_context.html')" class="blue">description</a> applies to the
<a href="javascript:call_link('abenrfc_session_glosry.html')" class="grey" title="Glossary Entry">RFC session</a> of the called function modules. This means that, when using the same
<a href="javascript:call_link('abendestination_glosry.html')" class="grey" title="Glossary Entry">RFC destination</a> for multiple
calls of function modules belonging to the same function group, the global data of this function group is accessed collectively. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The function module <span class="lnkgrey">ID_OF_BACKGROUNDTASK</span> can be used after a transactional RFC to determine the transactional ID (TID) of the current
<a href="javascript:call_link('abensap_luw_glosry.html')" class="grey" title="Glossary Entry">SAP LUW</a>. <br>
<br></li>
<li>
The transactional RFC (tRFC) is suitable for realizing LUWs in distributed environments (a typical application is ALE). Note that, although the execution of the function modules within a transaction ID is specified, the order of the
<a href="javascript:call_link('abenluw_glosry.html')" class="grey" title="Glossary Entry">LUWs</a> on the RFC servers is not
necessarily the same as the order of the SAP LUWs on the RFC client. To ensure the same serialization is also used on RFC servers, the tRFC can be enhanced as
(<a href="javascript:call_link('abenqrfc_glosry.html')" class="grey" title="Glossary Entry">queued RFC (qRFC)</a>). For this,
the function module <span class="lnkgrey">TRFC_SET_QUEUE_NAME</span> can be called before a transactional RFC. More information about qRFC can be found in the <span class="lnkgrey">RFC</span> documentation on
<a href="http://help.sap.com/" target="blank" class="blue">SAP Help Portal</a>.
<br><br></li>
<li>
If <a href="javascript:call_link('abentrfc_2_glosry.html')" class="grey" title="Glossary Entry">tRFC</a> or
<a href="javascript:call_link('abenqrfc_glosry.html')" class="grey" title="Glossary Entry">qRFC</a> are registered in a
<a href="javascript:call_link('abendialog_module_object_glosry.html')" class="grey" title="Glossary Entry">dialog module</a>
and are not started with <span class="qtext">COMMIT WORK</span>, they are not executed by the <span class="qtext">COMMIT WORK</span> of the caller. <br>
<br></li>
<li>
The new variant <a href="javascript:call_link('abapcall_function_background_unit.html')" class="blue"><span class="qtext">CALL FUNCTION IN BACKGROUND UNIT</span></a>
(<a href="javascript:call_link('abenbgrfc_glosry.html')" class="grey" title="Glossary Entry">bgRFC</a>) includes and enhances the existing tRFC and qRFC variants. For this reason, we strongly recommend using bgRFC instead of tRFC. <br>
<br></li>
<li>
The statements <a href="javascript:call_link('abapcommit.html')" class="blue"><span class="qtext">COMMIT WORK</span></a> and
<a href="javascript:call_link('abaprollback.html')" class="blue"><span class="qtext">ROLLBACK WORK</span></a> must not be executed within a LUW. In addition, no implicit
<a href="javascript:call_link('abendatabase_commit_glosry.html')" class="grey" title="Glossary Entry">database commit</a> can be triggered there. <br>
<br></li>
<li>
When handling the registration entries in the database tables ARFCSSTATE and ARFCSDATA, note that they are subject to the regular administration rules for a
<a href="javascript:call_link('abendatabase_luw_glosry.html')" class="grey" title="Glossary Entry">database LUW</a>. For example, the database LUW is ended by a
<a href="javascript:call_link('abendatabase_rollback_glosry.html')" class="grey" title="Glossary Entry">database rollback</a>, all registration entries of the current database LUW are deleted.
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapcall_function_background_task.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:34 GMT -->
</html>
