<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPINSERT_ITAB_POSITION -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapinsert_itab_position.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:53 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="INSERT - itab_position">
<title>
INSERT - itab_position - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapinsert_itab_position.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapinsert_itab_position.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab.html')" class="blue">Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentable_processing_statements.html')" class="blue">Processing Statements for Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapinsert_itab.html')" class="blue">INSERT itab</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
INSERT - itab_position <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapinsert_itab_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>{</i>TABLE itab<i class=bn>}</i></span> <br><span class="qtext">&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i>itab INDEX idx<i class=bn>}</i></span> <br>
<span class="qtext">&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i>itab<i class=bn>}</i> ...</span> <br><br>
</P>
<p><span class="h2">
Alternatives:
</span></p>
<P>
   <A HREF="#!ABAP_ALTERNATIVE_1@1@" class="blue"> 1. <span class="qtext">... TABLE itab</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_2@2@" class="blue"> 2. <span class="qtext">... itab INDEX idx</span> </A> <br><br><A HREF="#!ABAP_ALTERNATIVE_3@3@" class="blue"> 3. <span class="qtext">... itab</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
These alternatives specify the position in the internal table <span class="qtext">itab</span> in which
rows are inserted. If the variant with the addition <span class="qtext">TABLE</span> is used, the position
of the insert is specified using the primary table key. If any of the other variants are used, a row number from the primary table index is used. The latter option can only be used for
<a href="javascript:call_link('abenindex_table_glosry.html')" class="grey" title="Glossary Entry">index tables</a>. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
The insert position is defined using either the <a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table key</a> or the
<a href="javascript:call_link('abenprimary_table_index_glosry.html')" class="grey" title="Glossary Entry">primary table index</a> only. For the
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table keys</a>
in the internal table, the system checks for uniqueness and adds the new table row to the corresponding
administrator (hash administration, secondary table index). In the case of secondary keys, the administrator
is updated before the table is accessed again; for non-unique secondary keys, it is updated before the secondary key is used again. <br><br>
</P>
<A NAME="@@TABLE@@INSERT itab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_1@1@"></A> <span class="bold">Alternative 1</span>
</span></p>
<P>
<span class="qtext">... TABLE itab</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The inserted rows <a href="javascript:call_link('abapinsert_itab_linespec.html')" class="blue"><span class="qtext">line_spec</span></a> must be
<a href="javascript:call_link('abencompatible_glosry.html')" class="grey" title="Glossary Entry">compatible</a> with the row type of the internal table. Depending on the table category, each row is inserted as follows:
</P>
<ul class="disc">
<li>
For <a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">standard tables</a>, each new row is appended as the last row in the internal table regardless of the primary table key. <br>
<br></li>
<li>
For <a href="javascript:call_link('abensorted_table_glosry.html')" class="grey" title="Glossary Entry">sorted tables</a>, each
new row is inserted into the sort order of the internal table in accordance with its key values with
respect to the primary key. The row numbers in the primary table index of the following rows are increased by one. If the internal table has a non-unique key, duplicate entries are inserted before the existing row. <br>
<br></li>
<li>
In <a href="javascript:call_link('abenhashed_table_glosry.html')" class="grey" title="Glossary Entry">hashed tables</a>, each
new row is inserted into the internal table by the hash administrator in accordance with its key values with respect to the primary key.
<br></li>
</ul>
<P>
If the internal table has one or more unique table keys, no entries are inserted that would produce
duplicate entries in one of the unique table keys. When single rows are inserted, <span class="qtext">sy-subrc</span>
is set to 4 if a duplicate entry with respect to the primary key were to be produced; also, a handleable
exception of the class CX_SY_ITAB_DUPLICATE_KEY is raised if a duplicate entry with respect to a secondary key would were to be produced. If multiple rows are inserted, a non-handleable exception is raised. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
If the primary table key is used, note that this key can be the
<a href="javascript:call_link('abenstandard_key_glosry.html')" class="grey" title="Glossary Entry">standard key</a> covering
all character-like and byte-like components if the row type is structured. An empty standard key is
possible only for standard tables. In these tables, <span class="qtext">INSERT</span> always works like <span class="qtext">APPEND</span> (in this variant). <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<P>
Fills an internal table <span class="qtext">connection_tab</span> with data from the database table
<span class="qtext">spfli</span>. Single rows are inserted using the primary table key and are filled
with the content of the work area <span class="qtext">connection</span>. Since the internal table has
a unique key, any duplicate entries are rejected. The better performing <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">
SELECT</span></a> statement, in which the internal table is specified directly after <a href="javascript:call_link('abapinto_clause.html')" class="blue">
<span class="qtext">INTO TABLE</span></a>, could raise an exception due to the uniqueness of the primary table key.
</P>
<p class="qtextml1">
<span class="qtext">
SELECT cityfrom, cityto, distid, distance <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM spfli <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO @DATA(connection). <br>
&nbsp;&nbsp;DATA connection_tab LIKE SORTED TABLE OF connection <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH UNIQUE KEY cityfrom cityto <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distid distance. <br>
&nbsp;&nbsp;INSERT connection INTO TABLE connection_tab. <br>ENDSELECT. <br><br>
</span>
</p>
<A NAME="@@INDEX@@INSERT itab@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_2@2@"></A> <span class="bold">Alternative 2</span>
</span></p>
<P>
<span class="qtext">... itab INDEX idx</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This variant can only be used for <a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">standard tables</a> and
<a href="javascript:call_link('abensorted_table_glosry.html')" class="grey" title="Glossary Entry">sorted tables</a>. Each of
the rows to be inserted <a href="javascript:call_link('abapinsert_itab_linespec.html')" class="blue"><span class="qtext">line_spec</span></a>
is inserted before the row with the row number <span class="qtext">idx</span> in the primary table index. The row numbers in the primary table index of the following rows are increased by one. <span class="qtext">idx</span> is a
<a href="javascript:call_link('abennumerical_expr_position_glosry.html')" class="grey" title="Glossary Entry">numeric expression position</a> of operand type <span class="qtext">i</span>.
</P>
<P>
If <span class="qtext">idx</span> contains a value equal to the number of existing table rows plus one,
the new row is appended as the last row in the internal table. If <span class="qtext">idx</span> contains a greater value, no row is inserted and <span class="qtext">sy-subrc</span> is set to 4.
</P>
<P>
A non-handleable exception is raised in the following cases:
</P>
<ul class="disc">
<li>
If <span class="qtext">idx</span> contains a value less than or equal to 0. <br>
<br></li>
<li>
If inserting a single row would produce a duplicate entry in a unique primary or secondary table key. <br>
<br></li>
<li>
If inserting a block of rows would produce a duplicate entry in a unique primary table key. <br>
<br></li>
<li>
If inserting a row would disrupt the sort order of a sorted table. <br> <br>Modifying the sort order
with respect to a sorted secondary key, however, never raises an exception. Instead, the associated secondary index is either updated directly
(<a href="javascript:call_link('abendirect_update_glosry.html')" class="grey" title="Glossary Entry">direct update</a>) or updated after a delay
(<a href="javascript:call_link('abenlazy_update_glosry.html')" class="grey" title="Glossary Entry">lazy update</a>).
<br></li>
</ul>
<P>
If inserting a single row produces a duplicate entry in a unique secondary table key, a handleable exception of the class CX_SY_ITAB_DUPLICATE_KEY is raised. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
Inserts a row after a found row.
</p>
<p class="qtextml1">
<span class="qtext">
DATA html TYPE TABLE OF string WITH EMPTY KEY. <br> <br>html = VALUE #( ( `&lt;html>` ) <br>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( `&lt;body>` ) <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( `&lt;/body>` ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( `&lt;/html>` ) ). <br>
 <br>FIND `&lt;body>` IN TABLE html MATCH LINE DATA(idx). <br> <br>INSERT `&lt;b>Text&lt;/b>` INTO html INDEX idx + 1. <br> <br>cl_demo_output=>display_html( concat_lines_of( html ) ). <br><br>
</span>
</p>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_3@3@"></A> <span class="bold">Alternative 3</span>
</span></p>
<P>
<span class="qtext">... itab</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This variant is only possible within a <a href="javascript:call_link('abaploop_at_itab.html')" class="blue"><span class="qtext">LOOP</span></a>
across the same table and if the addition <a href="javascript:call_link('abaploop_at_itab_cond.html')" class="blue"><span class="qtext">USING
KEY</span></a> is not specified in the <span class="qtext">LOOP</span>. Each row to be inserted can be inserted before the current row in the <span class="qtext">LOOP</span>.
</P>
<P>
If the current row was already deleted in the same loop, however, the behavior is undefined.
</P>
<p><span class="h4">
Note
</span></p>
<P>
This alternative is not recommended. Instead, use the addition <span class="qtext">INDEX</span> to specify the row number explicitly. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
Inserts a row (conditionally) in front of every row in an internal table.
</p>
<p class="qtextml1">
<span class="qtext">
DATA itab TYPE TABLE OF string WITH EMPTY KEY. <br> <br>itab = VALUE #( FOR i = 1 UNTIL i > 10 ( CONV #( i ) ) ). <br>
 <br>LOOP AT itab ASSIGNING FIELD-SYMBOL(&lt;fs>). <br>&nbsp;&nbsp;IF conv i( &lt;fs> ) / 2 * 2 = CONV i( &lt;fs> ). <br>
&nbsp;&nbsp;&nbsp;&nbsp;INSERT 'Pair' INTO itab. <br>&nbsp;&nbsp;ELSE. <br>&nbsp;&nbsp;&nbsp;&nbsp;INSERT 'Impair' INTO itab. <br>&nbsp;&nbsp;ENDIF. <br>ENDLOOP. <br> <br>cl_demo_output=>display( itab ). <br><br>
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapinsert_itab_position.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:53 GMT -->
</html>
