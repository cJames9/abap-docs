<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPREAD_DATASET -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapread_dataset.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:32 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="READ DATASET">
<meta name="keywords" content="ABAP, READ DATASET">
<title>
READ DATASET - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapread_dataset.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapread_dataset.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_files.html')" class="blue">ABAP File Interface</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenfile_interface_statements.html')" class="blue">Statements for the ABAP File Interface</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@READ DATASET@@!ABAP_STATEMENT!@@"></A>
<A NAME="@@INTO@@READ DATASET@@"></A>
<p><span class="h1">
READ DATASET <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapread_dataset_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">READ DATASET dset INTO dobj <i class=bn>[</i>MAXIMUM LENGTH mlen<i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i><i class=bn>[</i>ACTUAL<i class=bn>]</i> LENGTH alen<i class=bn>]</i>.</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... MAXIMUM LENGTH mlen</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... <i class=bn>[</i>ACTUAL<i class=bn>]</i> LENGTH alen</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This statement exports data from the file specified in <span class="qtext">dset</span> to the data object <span class="qtext">dobj</span>. <span class="qtext">dobj</span> expects variables with elementary data types and
<a href="javascript:call_link('abenflat_structure_glosry.html')" class="grey" title="Glossary Entry">flat structures</a>. The
file must be opened using an access type. If a closed or nonexistent file is accessed, a handleable exception is raised. If the file was opened as a
<a href="javascript:call_link('abentext_file_glosry.html')" class="grey" title="Glossary Entry">text file</a>, <span class="qtext">dobj</span> must be character-like.
</P>
<P>
<span class="qtext">dset</span> expects a character-like data object containing the
<a href="javascript:call_link('abenphysical_filename_glosry.html')" class="grey" title="Glossary Entry">physical name</a> of
the file. The content is read from the file starting from the current file pointer. After the data is
passed, the file pointer is positioned after the section that was read. Using the <span class="qtext">MAXIMUM
LENGTH</span> addition, the number of characters or bytes to be read from the file can be limited. Using
<span class="qtext">ACTUAL LENGTH</span>, the number of characters or bytes actually used can be determined. <br><br>
</P>
<P>
<span class="bold">Influence of the Access Type</span>
</P>
<P>
Files can be read independently of the <a href="javascript:call_link('abapopen_dataset_access.html')" class="blue">access type</a>.
Whether data can be read or not depends solely on the position of the file pointer. If the latter is
at the end of the file or after the file, no data can be read and <span class="qtext">sy-subrc</span> will be set to 4. <br><br>
</P>
<P>
<span class="bold">Influence of the Storage Type</span>
</P>
<P>
The import function works regardless of the <a href="javascript:call_link('abapopen_dataset_mode.html')" class="blue">storage type</a> used to open the file with the statement <span class="qtext">OPEN DATASET</span>.
</P>
<ul class="disc">
<li>
If the file was opened as a <a href="javascript:call_link('abentext_file_glosry.html')" class="grey" title="Glossary Entry">text file</a> or as a
<a href="javascript:call_link('abenlegacy_file_glosry.html')" class="grey" title="Glossary Entry">legacy</a> text file, the data is normally read from the current position of the file pointer to the next
<a href="javascript:call_link('abapopen_dataset_linefeed.html')" class="blue">end-of-line marker</a>, and the file pointer is
positioned after the end-of-line marker. If the last character of a text file is not an explicit end-of-line
marker, the end of the text file is interpreted as the end of the line. If the data object <span class="qtext">dobj</span>
is too short for the number of read characters, the superfluous characters and bytes are cut off. If
it is longer, it is padded with blanks on the right. If <span class="qtext">dobj</span> is a string, it only contains the read characters.
<br><br></li>
<li>
If the file was opened as a <a href="javascript:call_link('abenbinary_file_glosry.html')" class="grey" title="Glossary Entry">binary file</a> or as a
<a href="javascript:call_link('abenlegacy_file_glosry.html')" class="grey" title="Glossary Entry">legacy</a> binary file, the
system reads as much data that can fit into the data object <span class="qtext">dobj</span>. The file
pointer is positioned after the data that has been read. If the data object <span class="qtext">dobj</span>
is longer than the number of exported characters, it is padded with hexadecimal 0 on the right. If <span class="qtext">dobj</span> is a string, the system tries to read all the data in one go.
<br></li>
</ul>
<P>
If the specified storage type makes conversion necessary, this is executed before the assignment to
the data object <span class="qtext">dobj</span>. Afterwards, the read data is placed, byte by byte, into the data object. <br><br>
</P>
<P>
<span class="bold">System Fields</span>
</P>
<P>
<span class="bold">Read Text Files</span>
</P>
<table border>
<tr>
<td><span class="qtext"><span class="bold">sy-subrc</span></span></td>
<td><span class="bold">Meaning</span></td>
</tr>
<tr>
<td>0</td>
<td>Data is read up to an explicit end-of-line marker or up to an implicit end-of-line marker at the end of the file.</td>
</tr>
<tr>
<td>4</td>
<td>An attempt was made to read data after the end of the file.</td>
</tr>
</table><br>
<P>
<span class="bold">Read Binary Files</span>
</P>
<table border>
<tr>
<td><span class="qtext"><span class="bold">sy-subrc</span></span></td>
<td><span class="bold">Meaning</span></td>
</tr>
<tr>
<td>0</td>
<td>Data was read; either the system did not reach the end of the of file or the system stopped reading at exactly the end of the file.</td>
</tr>
<tr>
<td>4</td>
<td>Data was read up to the end of the file and the target field was longer than necessary, or an attempt was made to read data after the end of the file.</td>
</tr>
</table><br>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The data from the text files can only be imported into character-like data objects and data from binary
files should be imported only &#x200E;into byte-like data objects. To evaluate imported data as numeric
data objects or mixed structures, it is recommended that these are exported into binary containers and
then assigned using the <a href="javascript:call_link('abapassign_casting.html')" class="blue"><span class="qtext">CASTING</span></a>
addition of the <span class="qtext">ASSIGN</span> statement in accordance with the typed field symbols.
If the file is opened as a legacy text file when data like this is being imported, there is the danger
that an end-of-line marker is contained in the binary representation of a number and that the number can therefore not be read.
<br><br></li>
<li>
A text file without an explicit end-of-line marker still has an implicit end-of-line marker at the end of the file.
<br><br></li>
<li>
In an <a href="javascript:call_link('abenenumerated_object_glosry.html')" class="grey" title="Glossary Entry">enumerated object</a>, the data objects stored in the file of the
<a href="javascript:call_link('abenbase_type_glosry.html')" class="grey" title="Glossary Entry">basic type</a> of the enumeration object, whose value is a valid
<a href="javascript:call_link('abenenumerated_value_glosry.html')" class="grey" title="Glossary Entry">enumerated value</a> of an
<a href="javascript:call_link('abenenumerated_type_glosry.html')" class="grey" title="Glossary Entry">enumerated type</a>. This
includes any stored enumerated objects and normal elementary data objects of the basic type. Invalid values raise an exception from the class CX_SY_FILE_IO. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Imports the binary file <span class="qtext">flights.dat</span> written in the example by the statement
<a href="javascript:call_link('abaptransfer.html')" class="blue"><span class="qtext">TRANSFER</span></a>. The data is written (in binary) to a byte-like typed field symbol <span class="qtext">&lt;hex_container></span>. The assignment of the structured
<a href="javascript:call_link('abendata_area_glosry.html')" class="grey" title="Glossary Entry">data area</a> <span class="qtext">wa</span>
to the field symbol applies the length of the data area and imports a corresponding number of bytes
for the loop process. It would be possible to import directly into the structure <span class="qtext">wa</span>
with the same result, but the use of the field symbol is the recommended procedure. The reason is that in this way data is passed explicitly from a binary file into a binary data type.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: wa&nbsp;&nbsp; TYPE spfli, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itab LIKE TABLE OF wa WITH EMPTY KEY. <br>
 <br>FIELD-SYMBOLS &lt;hex_container> TYPE x. <br> <br>DATA(file) = `flights.dat`. <br>OPEN DATASET file FOR INPUT IN BINARY MODE. <br>
 <br>ASSIGN wa TO &lt;hex_container> CASTING. <br> <br>DO. <br>&nbsp;&nbsp;READ DATASET file INTO &lt;hex_container>. <br>
&nbsp;&nbsp;IF sy-subrc = 0. <br>&nbsp;&nbsp;&nbsp;&nbsp;APPEND wa TO itab. <br>&nbsp;&nbsp;ELSE. <br>&nbsp;&nbsp;&nbsp;&nbsp;EXIT. <br>
&nbsp;&nbsp;ENDIF. <br>ENDDO. <br> <br>CLOSE DATASET file. <br> <br>cl_demo_output=>display_data( itab ). <br><br>
</span>
</p>
<A NAME="@@MAXIMUM LENGTH@@READ DATASET@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... MAXIMUM LENGTH mlen</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This addition determines how many characters or how many bytes at most are read from the file. <span class="qtext">
mlen</span> expects a data object of the type <span class="qtext">i</span>. It contains the number of
characters or bytes. In the case of text files, the content of <span class="qtext">mlen</span> determines
how many characters are read from the file. In the case of binary files, legacy text files, and legacy binary files, <span class="qtext">mlen</span> determines how many bytes are read from the file.
</P>
<P>
The first <span class="qtext">mlen</span> characters or bytes are read from the current position of
the file pointer and the file pointer is positioned after the read file. If the file is opened as a
(legacy) text file and there is an end-of-line marker within the specified length, data is read only up to this position and the file pointer is positioned after the
<a href="javascript:call_link('abapopen_dataset_linefeed.html')" class="blue">end-of-line marker</a>.
</P>
<P>
If the value of <span class="qtext">mlen</span> is the same as 0, no data is read. If the value of <span class="qtext">
mlen</span> is negative, the addition is ignored and the import takes place in the same way as described for <span class="bold">Influence of the Storage Type</span>. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
In case of text files, the number of bytes read depends on the character format specified using <a href="javascript:call_link('abapopen_dataset_encoding.html')" class="blue"><span class="qtext">ENCODING</span></a> when opening the file. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<P>
This program section has the same functions as the previous example. Here data is imported not into
a byte-like field symbol, but into a byte-like data object <span class="qtext">hex_container</span>. The number of bytes to be imported is determined by the typed field symbol <span class="qtext">&lt;spfli></span>.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: hex_container TYPE x LENGTH 1000, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len TYPE i, <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;itab&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE TABLE OF spfli WITH EMPTY KEY. <br>
 <br>FIELD-SYMBOLS &lt;spfli> TYPE spfli. <br> <br>DESCRIBE FIELD &lt;spfli> LENGTH len IN BYTE MODE. <br>
 <br>DATA(file) = `flights.dat`. <br>OPEN DATASET file FOR INPUT IN BINARY MODE. <br> <br>ASSIGN hex_container TO &lt;spfli> CASTING. <br>
 <br>DO. <br>&nbsp;&nbsp;READ DATASET file INTO hex_container MAXIMUM LENGTH len. <br>&nbsp;&nbsp;IF sy-subrc = 0. <br>
&nbsp;&nbsp;&nbsp;&nbsp;APPEND &lt;spfli> TO itab. <br>&nbsp;&nbsp;ELSE. <br>&nbsp;&nbsp;&nbsp;&nbsp;EXIT. <br>
&nbsp;&nbsp;ENDIF. <br>ENDDO. <br> <br>CLOSE DATASET file. <br> <br>cl_demo_output=>display_data( itab ). <br><br>
</span>
</p>
<A NAME="@@ACTUAL LENGTH@@READ DATASET@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>[</i>ACTUAL<i class=bn>]</i> LENGTH alen</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This addition assigns the number of characters or bytes to be read from the file to the data object <span class="qtext">alen</span>. The following can be specified for <span class="qtext">alen</span>:
</P>
<ul class="disc">
<li>
An existing variable of the data type <span class="qtext">i</span> or a variable to which the type <span class="qtext">i</span> can be converted.
<br><br></li>
<li>
An inline declaration <a href="javascript:call_link('abendata_inline.html')" class="blue"><span class="qtext">DATA(var)</span></a>, where a variable of type <span class="qtext">i</span> is declared.
<br></li>
</ul>
<P>
For text files, the system determines how many characters were written to the memory area. For binary
files, legacy text files, and legacy binary files, the system determines how many bytes were read from the file. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
The system field <span class="qtext">sy-abcde</span> contains 26 characters. A conversion to UTF-16
representation creates a byte string with 52 bytes. Once a file containing this string is read, this number is determined and displayed using the addition <span class="qtext">LENGTH</span>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(xstr) = <br>cl_abap_conv_codepage=>create_out( codepage = `UTF-16` <br>&nbsp;&nbsp;)->convert( conv #( sy-abcde ) ). <br>
 <br>DATA(dset) = 'test.dat'. <br>OPEN DATASET dset FOR OUTPUT IN BINARY MODE. <br>TRANSFER xstr TO dset. <br>
CLOSE DATASET dset. <br> <br>OPEN DATASET dset FOR INPUT in BINARY MODE. <br>READ DATASET dset INTO xstr ACTUAL LENGTH DATA(bytes). <br>
CLOSE DATASET dset. <br> <br>cl_demo_output=>display( bytes ). <br> <br>DELETE DATASET dset. <br><br>
</span>
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Regardless of the length of the target field, the number of characters or bytes actually read from the file is always returned.
<br><br></li>
<li>
The optional addition <span class="qtext">ACTUAL</span> was introduced to distinguish the addition <span class="qtext">
LENGTH</span> more effectively from the addition <span class="qtext">MAXIMUM LENGTH</span>. For this reason, the addition <span class="qtext">ACTUAL</span> should always be used. <br><br>
<br></li>
</ul>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span>
</P>
<P>
<span class="lnkgrey">CX_SY_CODEPAGE_CONVERTER_INIT</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The required conversion is not supported. (For example, because a
language not supported by the conversion was specified using <span class="qtext">SET LOCALE LANGUAGE</span>.) <br><span class="italic">Runtime error:</span> <span class="qtext">CONVT_CODEPAGE_INIT</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_CONVERSION_CODEPAGE</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> Conversion is not possible. The data is read as far as possible. Text data where the conversion has failed is undefined (see also note below). <br>
<span class="italic">Runtime error:</span> <span class="qtext">CONVT_CODEPAGE</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_AUTHORITY</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> No authorization for access to file <br><span class="italic">Runtime error:</span> <span class="qtext">OPEN_DATASET_NO_AUTHORITY</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_IO</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> An error occurred when the file was read. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_READ_ERROR</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_OPEN</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> File cannot be opened. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_CANT_OPEN</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_FILE_OPEN_MODE</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The file is not open. <br><span class="italic">Runtime error:</span> <span class="qtext">DATASET_NOT_OPEN</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_PIPE_REOPEN</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The file was opened using the addition <span class="qtext">FILTER</span> and since then a switch of the work process took place. <br>
<span class="italic">Runtime error:</span> <span class="qtext">DATASET_PIPE_CLOSED</span> <br><br>
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapread_dataset.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:32 GMT -->
</html>
