<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPUNION_CLAUSE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapunion_clause.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:51 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="UNION - query_clauses">
<title>
UNION - query_clauses - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapunion_clause.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapunion_clause.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">ABAP SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_reading.html')" class="blue">ABAP SQL - Reads</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapunion.html')" class="blue">UNION</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
UNION - query_clauses <br><br>
</span></p>
<A name="@@ITOC@@ABAPUNION_CLAUSE_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext">... <i class=bn>{</i> <a href="javascript:call_link('abapfrom_clause.html')" class="blue">FROM</a> source <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:call_link('abapfields_clause.html')" class="blue">FIELDS</a> <a href="javascript:call_link('abapselect_clause.html')" class="blue">select_clause</a> <i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i> <a href="javascript:call_link('abapselect_clause.html')" class="blue">select_clause</a> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:call_link('abapfrom_clause.html')" class="blue">FROM</a> source <i class=bn>}</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i><a href="javascript:call_link('abapwhere.html')" class="blue">WHERE</a> <a href="javascript:call_link('abenwhere_logexp.html')" class="blue">sql_cond</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>
<a href="javascript:call_link('abapgroupby_clause.html')" class="blue">GROUP BY</a> group<i class=bn>]</i> <i class=bn>[</i><a href="javascript:call_link('abaphaving_clause.html')" class="blue">HAVING</a> group_cond<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>
<a href="javascript:call_link('abaporderby_clause.html')" class="blue">ORDER BY</a> <a href="javascript:call_link('abapselect_up_to_offset.html')" class="blue"><i
class=bn>[</i>UP TO n ROWS <i class=bn>[</i>OFFSET o<i class=bn>]</i><i class=bn>]</i></a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i><a href="javascript:call_link('abenosql_db_hints.html')" class="blue">db_hints</a><i class=bn>]</i>&nbsp;&nbsp;...</span> <br><br>
</p>
<p><span class="h4">
Effect
</span></p>
<P>
Possible <a href="javascript:call_link('abenselect_clauses.html')" class="blue">clauses and additions</a> of
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">queries</a>, whose results sets are
joined using <a href="javascript:call_link('abapunion.html')" class="blue"><span class="qtext">UNION</span></a>. The results
set of <span class="qtext">SELECT</span> statements joined using <span class="qtext">UNION</span> is regarded as having multiple rows.
</P>
<P>
The following special conditions apply to clauses and additions of the <span class="qtext">SELECT</span> statements joined using <span class="qtext">UNION</span>:
</P>
<ul class="disc">
<li>
The <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> liste</a> must consist of a list of specified columns <a
 href="javascript:call_link('abapselect_clause_col_spec.html')" class="blue"><span class="qtext">col_spec</span></a> as
<a href="javascript:call_link('abapsql_expr.html')" class="blue">SQL expressions</a>. <span class="qtext">*</span> and <span class="qtext">data_source~*</span> cannot be specified.
<br><br></li>
<li>
All <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> lists</a> of <span class="qtext">
SELECT</span> statements grouped using <span class="qtext">UNION</span> must have the same number of elements.
<br><br></li>
<li>
The columns assigned to each other must have the same type attributes with respect to
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">built-in data type</a>, length, and number of digits after the decimal point, with the following exceptions:
<br></li>
</ul>
<ul class="circlem2">
<li>Numeric types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT1</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT2</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT4</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT8</a> can create a column. The resulting column has the data type with the greatest value range.</li>
</ul>
<ul class="circlem2">
<li>Numeric types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DEC</a> can have different lengths,
but must have the same number of digits after the decimal point. The resulting column has the data type with the greatest length. The corresponding special types
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CURR</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">QUAN</a> are handled here like <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DEC</a>.</li>
</ul>
<ul class="circlem2">
<li>The numeric types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DF16_DEC</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DF34_DEC</a> are handled like the numbers of type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DEC</a> (as they are saved) and the rule above applies with respect to lengths and decimal places.</li>
</ul>
<ul class="circlem2">
<li>Character-like types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CHAR</a> can have different lengths. The resulting column has the data type with the greatest length. The corresponding special types
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CLNT</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">LANG</a>,
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CUKY</a>, and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">UNIT</a> are handled here like <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CHAR</a>.</li>
</ul>
<dl>

<dd>
All other types must be exactly the same. This applies specifically to
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">NUMC</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">RAW</a>, where the lengths must match. The different categories of
<a href="javascript:call_link('abenddic_character_byte_types.html')" class="blue">strings</a> cannot be combined either.
</dd>
</dl>
<ul class="disc">
<li>
The addition <a href="javascript:call_link('abenwhere_logexp_itab.html')" class="blue"><span class="qtext">FOR ALL ENTRIES</span></a>
is not allowed in the <a href="javascript:call_link('abapwhere.html')" class="blue"><span class="qtext">WHERE</span></a> conditions of the <span class="qtext">SELECT</span> statements in question.
<br><br></li>
<li>
An <a href="javascript:call_link('abaporderby_clause.html')" class="blue"><span class="qtext">ORDER BY</span></a> clause cannot
be specified for individual results sets. Instead <span class="qtext">ORDER BY</span> can be applied to the joined results set of main queries.
<br></li>
</ul>
<P>
The number of <span class="qtext">SELECT</span> statements that can be joined using <span class="qtext">UNION</span> is not limited by a fixed value.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Each of the associated <span class="qtext">SELECT</span> statements has its own
<a href="javascript:call_link('abenclient_handling_glosry.html')" class="grey" title="Glossary Entry">client handling</a>. An
addition <a href="javascript:call_link('abapselect_client.html')" class="blue"><span class="qtext">USING</span></a> or or the
obsolete addition <a href="javascript:call_link('abapselect_client_obsolete.html')" class="blue"><span class="qtext">CLIENT SPECIFIED</span></a>
 in the <a href="javascript:call_link('abapfrom_clause.html')" class="blue"><span class="qtext">FROM</span></a> clause applies only to the <span class="qtext">SELECT</span> statement for which it is specified.
<br><br></li>
<li>
If required, the column names of the individual results sets can be modified using alias names after <span class="qtext">AS</span>.
<br><br></li>
<li>
If the column names of the results sets are not identical, the column names are used from the results
set of the <span class="qtext">SELECT</span> statement on the left of <span class="qtext">UNION</span>.
In this type of case, the names are usually not visible (except for subqueries in the <a href="javascript:call_link('abapwith.html')" class="blue"><span class="qtext">WITH</span></a> statement).
<br><br></li>
<li>
The numeric types <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DF16_DEC</a> and
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DF34_DEC</a> can only be used together in a column if their decimal places match.
<br><br></li>
<li>
SQL expressions, host expressions, and host variables can be used to synchronize the columns of the results set of the <span class="qtext">SELECT</span> statements in question.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Creates the union set of three <a href="javascript:call_link('abenaggregate_expression_glosry.html')" class="grey" title="Glossary Entry">
aggregate expressions</a> applied to the same database table in a subquery of a <a href="javascript:call_link('abapwith.html')" class="blue"><span class="qtext">WITH</span></a> statement. The union set is selected in a
<a href="javascript:call_link('abencommon_table_expression_glosry.html')" class="grey" title="Glossary Entry">common table expression</a>,
which makes it possible to use a single <span class="qtext">WHERE</span> condition for the entire results
set in the main query of the <span class="qtext">WITH</span> statement. If the union set were created
in a main query, every single <span class="qtext">SINGLE</span> statement would have to contain the same <span class="qtext">WHERE</span> condition or <span class="qtext">HAVING</span> condition.
</p>
<p class="qtextml1">
<span class="qtext">
WITH +aggregates AS ( <br>&nbsp;&nbsp;SELECT FROM sflight <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FIELDS carrid, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connid, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'MAX' AS function, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAX( CAST( seatsocc AS DEC( 31,2 ) ) ) AS agg <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GROUP BY carrid, connid <br>&nbsp;&nbsp;&nbsp;&nbsp;UNION <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT FROM sflight <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FIELDS carrid, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connid, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'MIN' AS function, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MIN( CAST( seatsocc AS DEC( 31,2 ) ) ) AS agg <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GROUP BY carrid, connid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UNION <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT FROM sflight <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FIELDS carrid, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connid, 'AVG' AS function, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AVG( seatsocc AS DEC( 31,2 ) ) AS agg <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GROUP BY carrid, connid ) <br>
&nbsp;&nbsp;SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM +aggregates <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE carrid = 'LH' AND connid = '0400' <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(result).
</span>
</p>
<p><span class="h4">
Executable Examples
</span></p>
<P>

</P>
<ul class="disc">
<li>
<a href="javascript:call_link('abenselect_union_abexa.html')" class="blue">Union of Different Tables</a>
<br><br></li>
<li>
<a href="javascript:call_link('abenselect_union_sum_abexa.html')" class="blue">Union with Aggregate Expression</a>
<br><br></li>
<li>
<a href="javascript:call_link('abenselect_union_sum_gtt_abexa.html')" class="blue">Union with Global Temporary Table</a>
<br><br></li>
<li>
<a href="javascript:call_link('abendemo_union_ranges_abexa.html')" class="blue">Union for Building a Ranges Table</a>
<br><br></li>
<li>
<a href="javascript:call_link('abenselect_union_cds_para_abexa.html')" class="blue">Union of CDS View with Input Parameters</a>
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapunion_clause.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:51 GMT -->
</html>
