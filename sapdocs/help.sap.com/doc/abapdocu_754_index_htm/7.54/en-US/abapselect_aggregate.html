<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPSELECT_AGGREGATE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapselect_aggregate.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:29 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="sql_exp - sql_agg">
<meta name="keywords" content="ABAP, Aggregate, Aggregate Expressions, Aggregate Functions">
<title>
sql_exp - sql_agg - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapselect_aggregate.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapselect_aggregate.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">ABAP SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_operands.html')" class="blue">ABAP SQL - Operands and Expressions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapsql_expr.html')" class="blue">ABAP SQL - SQL Expressions sql_exp</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@( )@@!ABAP_OSQL_AGG_EXP!@@"></A>
<p><span class="h1">
sql_exp - sql_agg <br><br>
</span></p>
<P>
<a href="javascript:call_link('abenaggregate_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <a href="javascript:call_link('abensql_agg_func.html')" class="blue">agg_func</a> ...</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
<a href="javascript:call_link('abenaggregate_expression_glosry.html')" class="grey" title="Glossary Entry">Aggregate expression</a> in ABAP SQL. An aggregate expression consists of an
<a href="javascript:call_link('abenaggregate_function_glosry.html')" class="grey" title="Glossary Entry">aggregate function</a>
<a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">agg_func</span></a> that aggregates the values of multiple rows of the results set of a
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a> into a single value. It can be used in the following operand positions:
</P>
<ul class="disc">
<li>
As an <a href="javascript:call_link('abapsql_expr.html')" class="blue">SQL expression</a> for
<br></li>
</ul>
<ul class="circlem2">
<li>a column <a href="javascript:call_link('abapselect_clause_col_spec.html')" class="blue"><span class="qtext">col_spec</span></a>
of the results set in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">SELECT</span> list</a> of a
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a>,</li>
</ul>
<ul class="circlem2">
<li>an operand on the left side of <a href="javascript:call_link('abenwhere_logexp.html')" class="blue">relational expressions</a>
of the condition <a href="javascript:call_link('abenasql_cond.html')" class="blue"><span class="qtext">sql_cond</span></a> of the <a href="javascript:call_link('abaphaving_clause.html')" class="blue"><span class="qtext">HAVING</span></a> clause of a
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a>.</li>
</ul>
<dl>

<dd>
Here, an aggregate expression can be specified directly or as an operand of an <a href="javascript:call_link('abapsql_expr.html')" class="blue">SQL expression</a> (except for another aggregate expression).
</dd>
</dl>
<ul class="disc">
<li>
As an operand on the right side of <a href="javascript:call_link('abenwhere_logexp.html')" class="blue">relational expressions</a>
of the condition <a href="javascript:call_link('abenasql_cond.html')" class="blue"><span class="qtext">sql_cond</span></a> of the <a href="javascript:call_link('abaphaving_clause.html')" class="blue"><span class="qtext">HAVING</span></a> clause of a
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a>. Here, no SQL expressions can be used except for directly specified aggregate expressions.
<br></li>
</ul>
<P>
Any <a href="javascript:call_link('abensql_agg_func.html')" class="blue">aggregate functions</a> can be used as an aggregate
expression except for <span class="qtext">PRODUCT</span>. An aggregate function used as an aggregate expression can have one of the following arguments:
</P>
<ul class="disc">
<li>
An SQL expression <a href="javascript:call_link('abapsql_expr.html')" class="blue"><span class="qtext">sql_exp</span></a> (except
aggregate expressions and window expressions for the aggregate functions <span class="qtext">MAX</span>,
<span class="qtext">MIN</span>, <span class="qtext">SUM</span>, <span class="qtext">STRING_AGG</span>, and <span class="qtext">COUNT</span>).
<br><br></li>
<li>
A column <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a> of a
<a href="javascript:call_link('abapselect_data_source.html')" class="blue">data source</a> of a
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a> for the aggregate functions <span class="qtext">AVG</span> and <span class="qtext">GROUPING</span>.
<br></li>
</ul>
<P>
The aggregate functions take the values of the column or take the results of the SQL expression from
all rows of the results set, or from the rows of the current group of a query constructed using <a href="javascript:call_link('abapgroupby_clause.html')" class="blue">
<span class="qtext">GROUP BY</span></a>, to determine a single value. If the value of an aggregate expression is too large for the <a href="javascript:call_link('abapinto_clause.html')" class="blue">target area</a>, an exception is raised.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
<a href="javascript:call_link('abensap_buffering_glosry.html')" class="grey" title="Glossary Entry">Table buffering</a> is bypassed when aggregate expressions are used.
<br><br></li>
<li>
If SQL expressions other than directly specified columns are specified as arguments of aggregate expressions, the syntax check is performed in a
<a href="javascript:call_link('abenopensql_strict_mode_740_sp08.html')" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Returns the flight date, the number of passengers, and the average and maximum luggage weight of all Lufthansa flights with the flight number 0400.
</P>
<p class="qtextml1">
<span class="qtext">
SELECT FROM sbook <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FIELDS fldate, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COUNT( * ) AS count, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AVG( luggweight AS DEC( 16,4 ) ) AS avg, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAX( luggweight ) AS max <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE carrid = 'LH' AND <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connid = '0400' <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GROUP BY fldate <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(result). <br> <br>cl_demo_output=>display( result ).
</span>
</p>
<p><span class="h4">
Executable Examples
</span></p>
<ul class="disc">
<li><a href="javascript:call_link('abensql_expr_in_aggregates_abexa.html')" class="blue">SQL Expressions, Use in Aggregate Expressions</a></li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abensql_expr_aggr_in_expr_abexa.html')" class="blue">SQL Expressions, Aggregate Expressions in SQL Expressions</a> #</li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abensql_agg_func.html')" class="blue">sql_exp - agg_func</a><br>
<a href="javascript:call_link('abensql_agg_expr_abexas.html')" class="blue">ABAP SQL - Examples of Aggregate Expressions</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapselect_aggregate.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:29 GMT -->
</html>
