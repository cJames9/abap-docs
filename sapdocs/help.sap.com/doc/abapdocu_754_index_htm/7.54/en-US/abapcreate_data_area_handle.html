<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPCREATE_DATA_AREA_HANDLE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapcreate_data_area_handle.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:34 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="CREATE DATA - AREA HANDLE">
<title>
CREATE DATA - AREA HANDLE - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapcreate_data_area_handle.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapcreate_data_area_handle.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencreate_objects.html')" class="blue">Creating Objects and Values</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapcreate_data.html')" class="blue">CREATE DATA</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@AREA HANDLE@@CREATE DATA@@"></A>
<p><span class="h1">
CREATE DATA - AREA HANDLE <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapcreate_data_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">CREATE DATA dref AREA HANDLE handle ...</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This statement creates an anonymous data object as a
<a href="javascript:call_link('abenshared_object_glosry.html')" class="grey" title="Glossary Entry">shared object</a> in the
<a href="javascript:call_link('abenarea_instance_version_glosry.html')" class="grey" title="Glossary Entry">area instance version</a> of the
<a href="javascript:call_link('abenshared_memory_glosry.html')" class="grey" title="Glossary Entry">shared memory</a> to which the
<a href="javascript:call_link('abenarea_handle_glosry.html')" class="grey" title="Glossary Entry">area handle</a> referenced by <span class="qtext">handle</span> is bound.
</P>
<P>
<span class="qtext">handle</span> expects an object reference variable whose static type is <a href="javascript:call_link('abenshm_cl_abap_memory_area.html')" class="blue">CL_ABAP_MEMORY_AREA</a> or one of its subclasses
(<a href="javascript:call_link('abenarea_class_glosry.html')" class="grey" title="Glossary Entry">area class</a>). When the statement is executed, <span class="qtext">handle</span> must point to an
<a href="javascript:call_link('abenarea_handle_glosry.html')" class="grey" title="Glossary Entry">area handle</a> and the area
handle must be associated with an area instance version with a change lock. A reference like this can be created in one of the following ways:
</P>
<ul class="disc">
<li>
By inheriting the return value of the methods <a href="javascript:call_link('abenshm_area_class.html')" class="blue">ATTACH_FOR_WRITE</a> or
<a href="javascript:call_link('abenshm_area_class.html')" class="blue">ATTACH_FOR_UPDATE</a> of an area class created using transaction <span class="lnkgrey">SHMA</span>. <br>
<br></li>
<li>
By inheriting the return value of the method <a href="javascript:call_link('abenshm_cl_abap_memory_area.html')" class="blue">GET_HANDLE_BY_...</a> of any area class. <br>
<br></li>
<li>
By inheriting the return value of the method <a href="javascript:call_link('abenshm_cl_imode_area.html')" class="blue">GET_IMODE_HANDLE</a> of the predefined class CL_IMODE_AREA.
<br></li>
</ul>
<P>
The latter is a reference to an area handle for the current
<a href="javascript:call_link('abeninternal_session_glosry.html')" class="grey" title="Glossary Entry">internal session</a> and
the statement <span class="qtext">CREATE DATA</span> operates as if the addition <span class="qtext">AREA HANDLE</span> is not specified.
</P>
<P>
<span class="bold">Restrictions</span>
</P>
<P>
The creation of anonymous data objects as shared objects is subject to the following restrictions for data references in the shared objects memory: the storage of data references in closed
<a href="javascript:call_link('abenarea_instance_version_glosry.html')" class="grey" title="Glossary Entry">area instance versions</a> of the shared objects memory is restricted to those
<a href="javascript:call_link('abendynamic_type_glosry.html')" class="grey" title="Glossary Entry">dynamic types</a> that are known when loading a program into an internal session.
</P>
<P>
Therefore, the following data types cannot be used to create anonymous data objects in the shared object memory, if these are to be preserved in a closed area instance version:
</P>
<ol>
<li>
All data types created in a temporary subroutine pool created using <a href="javascript:call_link('abapgenerate_shortref.html')" class="blue"><span class="qtext">GENERATE SUBROUTINE POOL</span></a>.
<br></li>
<li>
Data types created dynamically at runtime using methods of the <a href="javascript:call_link('abenrun_time_type_creation_glosry.html')" class="grey" title="Glossary Entry">RTTC</a>.
<br></li>
<li>
Bound data types of anonymous data objects created at program runtime and to which a dynamic length was assigned when they were created with <span class="qtext">CREATE DATA</span>.
<br></li>
<li>
Bound data types of anonymous data objects created at program runtime and to which a dynamic type requiring length definition was assigned when the data objects were created using <span class="qtext">CREATE DATA</span>.
<br></li>
</ol>
<P>
Points 3 and 4 include the statement <span class="qtext">CREATE DATA</span> with the addition <span class="qtext">AREA HANDLE</span> itself. Exceptions to the restrictions listed under points 2 to 4 are:
</P>
<ul class="disc">
<li>
The restrictions are not valid for data type <span class="qtext">p</span>.
<br><br></li>
<li>
The restrictions are not valid for data types <span class="qtext">c</span>, <span class="qtext">n</span>, and <span class="qtext">x</span> as long as the memory requirements do not exceed 100 bytes.
<br></li>
</ul>
<P>
If a data reference variable that is stored in the shared objects memory refers to an anonymous data
object of a dynamic type that is subject to the restrictions, the exception of the class CX_SHM_EXTERNAL_TYPE is raised when the DETACH_COMMIT method is executed.
</P>
<P>
The following can be used without restriction:
</P>
<ul class="disc">
<li>
All visible data types of global interfaces and classes.
<br><br></li>
<li>
Data elements, structures, and database tables and table types from ABAP Dictionary.
<br><br></li>
<li>
Data types from type groups.
<br><br></li>
<li>
Bound data types of anonymous data objects created at program runtime to which a static type with a static length was assigned when they were created using <span class="qtext">CREATE DATA</span>.
<br><br></li>
<li>
Bound data types of anonymous data objects created at program runtime to which a fully specified dynamic type was assigned when they were created using <span class="qtext">CREATE DATA</span>.
<br><br></li>
<li>
All data types that were created statically in the same program using declarative statements. It should
be noted, however, that it is no longer possible to access existing area instances once the creating program is changed.
<br></li>
</ul>
<P>
The additions <a href="javascript:call_link('abapcreate_data_reference.html')" class="blue"><span class="qtext">REF TO</span></a>
and <a href="javascript:call_link('abapcreate_data_itab.html')" class="blue"><span class="qtext">TABLE OF</span></a> can be used
as long as the specified types meet the above requirements. This also applies to the addition <a href="javascript:call_link('abapcreate_data_handle.html')" class="blue">
<span class="qtext">HANDLE</span></a>, which means the type description object must have been created with methods of the
<a href="javascript:call_link('abenrun_time_type_identific_glosry.html')" class="grey" title="Glossary Entry">RTTI</a> from allowed types.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The only shared object that can be addressed from an ABAP program directly after a binding is made to an area instance version is the instance of the
<a href="javascript:call_link('abenroot_data_class_glosry.html')" class="grey" title="Glossary Entry">area root class</a>. All
other objects have to be referenced in this instance. In particular, there is no direct access to anonymous
data objects possible. Instead, the instance of the area root class must contain references to these anonymous data objects, which can also be indirect.
<br><br></li>
<li>
It is best to use only global data types with <span class="qtext">AREA HANDLE</span>. As an occasional
replacement for the direct reference to data elements and table types from ABAP Dictionary, the respective types can be created in global interfaces, classes, or even type groups. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Creates an anonymous structure in an area instance version of area CL_DEMO_AREA.
</p>
<p class="qtextml1">
<span class="qtext">
DATA: root&nbsp;&nbsp; TYPE REF TO cl_demo_root, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handle TYPE REF TO cl_demo_area. <br>
 <br>... <br> <br>handle = cl_demo_area=>attach_for_write( ). <br>CREATE OBJECT root AREA HANDLE handle. <br>handle->set_root( root ). <br>CREATE DATA root->dref AREA HANDLE handle TYPE scarr. <br> <br>... <br><br>
</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<P>
<a href="javascript:call_link('abencreate_shared_data_objct_abexa.html')" class="blue"> Creating a Data Object as a Shared Object</a> <br><br>
</P>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span>
</P>
<P>
<span class="lnkgrey">CX_SHM_WRONG_HANDLE</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The area handle does not hold any change locks.
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SHM_ALREADY_DETACHED</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The area handle is not bound to an area instance version.
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SHM_OUT_OF_MEMORY</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> There is not enough memory.
<br></li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<img src="exa.gif" alt="Example" title="Example">
<a href="javascript:call_link('abencreate_shared_data_objct_abexa.html')" class="blue">Creating a Data Object as a Shared Object</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapcreate_data_area_handle.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:34 GMT -->
</html>
