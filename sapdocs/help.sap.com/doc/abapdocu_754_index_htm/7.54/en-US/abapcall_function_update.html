<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPCALL_FUNCTION_UPDATE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapcall_function_update.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:48 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="CALL FUNCTION - IN UPDATE TASK">
<meta name="keywords" content="ABAP, SYSTEM_UPDATE_TASK_ILL_STMT">
<title>
CALL FUNCTION - IN UPDATE TASK - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapcall_function_update.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapcall_function_update.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentransaction.html')" class="blue">Data Consistency</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abensap_luw.html')" class="blue">SAP LUW</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@IN UPDATE TASK@@CALL FUNCTION@@"></A>
<p><span class="h1">
CALL FUNCTION - IN UPDATE TASK <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapcall_function_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">CALL FUNCTION update_function IN UPDATE TASK</span> <br><span class="qtext">&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>EXPORTING p1 = a1 p2 = a2 ...<i class=bn>]</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>TABLES t1 = itab1 t2 = itab2 ...<i class=bn>]</i>.</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... EXPORTING p1 = a1 p2 = a2 ...</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... TABLES t1 = itab1 t2 = itab2 ...</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
This statement registers the update function module specified in <span class="qtext">update_function</span>. <span class="qtext">update_function</span> must be a character-like field, which contains the name of an
<a href="javascript:call_link('abenupdate_function_module_glosry.html')" class="grey" title="Glossary Entry">update function
module</a> in uppercase letters during execution of the statement. If specified, the same applies to <span class="qtext">update_function</span> as to
<a href="javascript:call_link('abapcall_function_general.html')" class="blue">general function module calls</a>.
</P>
<P>
An update function module is a <a href="javascript:call_link('abenfunction_module_glosry.html')" class="grey" title="Glossary Entry">function module</a> for which the property <span class="italic">update module</span> is flagged in
<a href="javascript:call_link('abenfunction_builder_glosry.html')" class="grey" title="Glossary Entry">Function Builder</a>. The registration of an update function module is an essential part of the
<a href="javascript:call_link('abenupdate_glosry.html')" class="grey" title="Glossary Entry">update task</a>.
</P>
<P>
The function module is not executed immediately, but is scheduled for execution in a special work process (update work process) or, if
<a href="javascript:call_link('abenlocal_update_glosry.html')" class="grey" title="Glossary Entry">local updates</a> are enabled,
in the current work process. To do this, the name of the function module and the actual parameters passed
are saved to the database tables <span class="lnkgrey">VBMOD</span> and <span class="lnkgrey">VBDATA</span>,
which are managed by <span class="lnkgrey">VBHDR</span>. If the statement is executed during the update task, the addition <span class="qtext">IN UPDATE TASK</span> is ignored.
</P>
<P>
If the statement <a href="javascript:call_link('abapset_update_task_local.html')" class="blue"><span class="qtext">SET UPDATE TASK LOCAL</span></a> is executed before registration of an update function module in the current
<a href="javascript:call_link('abensap_luw_glosry.html')" class="grey" title="Glossary Entry">SAP LUW</a>, registration takes place in the
<a href="javascript:call_link('abenabap_memory_glosry.html')" class="grey" title="Glossary Entry">ABAP memory</a> rather than on the database, and for the current work process.
</P>
<P>
The actual execution is triggered by the statement <a href="javascript:call_link('abapcommit.html')" class="blue"><span class="qtext">COMMIT
WORK</span></a>. The formal parameters of the function module receive the values of the actual parameters
from the database table VBLOG. A function module that is registered more than once is also executed
more than once with the associated parameter values. If the statement <span class="qtext">COMMIT WORK</span>
is not executed when the current program is executed after the registration of a function module, the
function module is not executed and the associated entries are deleted from the corresponding database
tables when the program ends. The statement <a href="javascript:call_link('abaprollback.html')" class="blue"><span class="qtext">ROLLBACK WORK</span></a> deletes all previous registrations for the current SAP LUW.
</P>
<P>
<span class="bold">System Fields</span>
</P>
<P>
The system field <span class="qtext">sy-subrc</span> is undefined after the statement <span class="qtext"> CALL FUNCTION ... IN UPDATE TASK</span> is executed. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
No <a href="javascript:call_link('abendatabase_commit_glosry.html')" class="grey" title="Glossary Entry">database commits</a> and no
<a href="javascript:call_link('abendatabase_rollback_glosry.html')" class="grey" title="Glossary Entry">database rollbacks</a>
can occur and the update control cannot be modified during the processing of an update function module triggered using <span class="qtext">COMMIT WORK</span> is being processed. Any statements that would produce this situation are
<a href="javascript:call_link('abendb_commit_during_update.html')" class="blue">forbidden statements in updates</a> and always produce runtime errors.
<br><br></li>
<li>
No <a href="javascript:call_link('abenauthority_during_update.html')" class="blue">authorization checks</a> are possible while
an update function module triggered using <a href="javascript:call_link('abapcommit.html')" class="blue"><span class="qtext">COMMIT WORK</span></a> is running.
<br><br></li>
<li>
Subroutines can be registered using <a href="javascript:call_link('abapperform_subr.html')" class="blue"><span class="qtext">PERFORM
ON COMMIT</span></a> during the processing of an update function module triggered by <a href="javascript:call_link('abapcommit.html')" class="blue">
<span class="qtext">COMMIT WORK</span></a>. They are then executed at the end of the current update.
<br><br></li>
<li>
If a runtime error occurs during the <a href="javascript:call_link('abenupdate_glosry.html')" class="grey" title="Glossary Entry">update</a>, the update work process executes a
<a href="javascript:call_link('abendatabase_rollback_glosry.html')" class="grey" title="Glossary Entry">database rollback</a>,
logs this in the corresponding database tables, and notifies the user whose entries created the entries by SAPMail. After the cause of the error has been resolved, the canceled entries can be updated again.
<br><br></li>
<li>
When handling the registration entries in the database tables, note that they are subject to the regular administration rules for a
<a href="javascript:call_link('abendatabase_luw_glosry.html')" class="grey" title="Glossary Entry">database LUW</a>. For example, the database LUW is ended by a
<a href="javascript:call_link('abendatabase_rollback_glosry.html')" class="grey" title="Glossary Entry">database rollback</a>, all registration entries of the current database LUW are deleted.
<br><br></li>
<li>
When an update function module is registered using <span class="qtext">CALL FUNCTION ... IN UPDATE TASK</span>,
the relevant data is exported internally to a data cluster using <a href="javascript:call_link('abapexport_data_cluster.html')" class="blue">
<span class="qtext">EXPORT</span></a> and is imported again when executing the function module with
<a href="javascript:call_link('abapimport_data_cluster.html')" class="blue"><span class="qtext">IMPORT</span></a>. If an errors
occurs in the export, for example because too much data is exported, the exceptions raised in <a href="javascript:call_link('abapexport_data_cluster.html')" class="blue">
<span class="qtext">EXPORT</span></a> are documented. If the data types of the exported actual parameters
do not match the typing of the formal parameter of the function module, the exceptions documented in <a href="javascript:call_link('abapimport_data_cluster.html')" class="blue"><span class="qtext">IMPORT</span></a> may be raised. <br><br>
<br></li>
</ul>
<A NAME="@@EXPORTING@@CALL FUNCTION IN UPDATE TASK@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... EXPORTING p1 = a1 p2 = a2 ...</span>   <br><!-- /A -->
</P>
<A NAME="@@TABLES@@CALL FUNCTION IN UPDATE TASK@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... TABLES t1 = itab1 t2 = itab2 ...</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The additions <span class="qtext">EXPORTING</span> and <span class="qtext">TABLES</span> have the same
syntax and meaning as in the <a href="javascript:call_link('abapcall_function_parameter.html')" class="blue"><span class="qtext">parameter_list</span></a> of the general function module call, except that for <span class="qtext">EXPORTING</span>, no
<a href="javascript:call_link('abenreference_variable_glosry.html')" class="grey" title="Glossary Entry">reference variables</a> or data objects that contain reference variables can be specified as actual parameters.
</P>
<P>
When passing internal tables with non-unique <a href="javascript:call_link('abenitab_key.html')" class="blue">table keys</a>, the order of the duplicate rows in relation to these keys is not retained. <br><br>
</P>
<p><span class="h4">
Note
</span></p>
<P>
The additions <span class="qtext">IMPORTING</span>, <span class="qtext">CHANGING</span> and <span class="qtext">EXCEPTIONS</span>
of the general function module call may be specified, but they are ignored during the execution. The additions for dynamic parameter passing are not allowed.
</P>
<p><span class="h4">
Example
</span></p>
<p>
Registers the update function module <span class="lnkgrey">DEMO_UPDATE_INSERT</span> for execution when
the statement <a href="javascript:call_link('abapcommit.html')" class="blue"><span class="qtext">COMMIT WORK</span></a> is executed (and passes an internal table).
</p>
<p class="qtextml1">
<span class="qtext">
&nbsp;&nbsp;&nbsp;&nbsp;DATA(values) = VALUE demo_update_tab( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( id = 'X' col1 = 100 col2 = 200 col3 = 300 col4 = 400 ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( id = 'Y' col1 = 110 col2 = 210 col3 = 310 col4 = 410 ) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( id = 'Z' col1 = 120 col2 = 220 col3 = 320 col4 = 420 ) ). <br>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;CALL FUNCTION 'DEMO_UPDATE_INSERT' IN UPDATE TASK <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values = values.
</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<p>
<a href="javascript:call_link('abensap_luw_update_task_abexa.html')" class="blue">SAP-LUW, <span class="qtext">UPDATE TASK</span></a>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapcall_function_update.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:48 GMT -->
</html>
