<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPDELETE_WHERE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapdelete_where.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:57 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="DELETE dbtab - cond">
<title>
DELETE dbtab - cond - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapdelete_where.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapdelete_where.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">ABAP SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_writing.html')" class="blue">ABAP SQL - Write Accesses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapdelete_dbtab.html')" class="blue">DELETE dbtab</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@UP TO ROWS@@DELETE dbtab@@"></A>
<A NAME="@@ORDER BY@@DELETE dbtab@@"></A>
<A NAME="@@OFFSET@@DELETE dbtab@@"></A>
<A NAME="@@WHERE@@DELETE dbtab@@"></A>
<p><span class="h1">
DELETE dbtab - cond <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapdelete_dbtab_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>[</i>WHERE <a href="javascript:call_link('abenasql_cond.html')" class="blue">sql_cond</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i><a href="javascript:call_link('abendatabase_hint_glosry.html')" class="grey" title="Glossary Entry">db_hints</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>ORDER BY ... <i class=bn>[</i>OFFSET o<i class=bn>]</i><i class=bn>]</i> <i class=bn>[</i>UP TO n ROWS<i class=bn>]</i> ...</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... WHERE sql_cond</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... db_hints</span> </A> <br><br>
<A HREF="#!ABAP_ADDITION_3@3@" class="blue"> 3. <span class="qtext">... <i class=bn>[</i>ORDER BY ... <i
class=bn>[</i>OFFSET o<i class=bn>]</i><i class=bn>]</i> <i class=bn>[</i>UP TO n ROWS<i class=bn>]</i></span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
In the variant <span class="qtext">DELETE FROM target</span> of the statement <a href="javascript:call_link('abapdelete_dbtab.html')" class="blue"><span class="qtext">DELETE</span></a>, these additions delete the rows in question. <br><br>
</P>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
 <span class="qtext">... WHERE sql_cond</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">WHERE</span> determines which rows in a database table or view are
deleted. Those rows are deleted for which the logical expression <a href="javascript:call_link('abenwhere_logexp.html')" class="blue"><span class="qtext">
sql_cond</span></a> is true. The logical expression <span class="qtext">sql_cond</span> is subject to
the restriction that no subqueries can be evaluated on the modified database table. If there is no database
row that satisfies the <span class="qtext">WHERE</span> condition, no rows are deleted and <span class="qtext">sy-subrc</span>
is set to 4. If no <span class="qtext">WHERE</span> condition is specified, all rows are deleted or as many rows as specified by the addition <span class="qtext">UP TO</span>.
<a href="javascript:call_link('abenopen_sql_client_handling.html')" class="blue">Implicit ABAP SQL client handling</a> applies. In a client-specific target, only rows in the current client are deleted by default. The
<a href="javascript:call_link('abenclient_column_glosry.html')" class="grey" title="Glossary Entry">client column</a> of a client-specific
target cannot be specified in the <span class="qtext">WHERE</span> condition. The addition <a href="javascript:call_link('abapiumd_client.html')" class="blue">
<span class="qtext">USING</span></a> can be used to switch implicit client handling to different clients.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
If the data source is accessed using generic <a href="javascript:call_link('abensap_buffering_glosry.html')" class="grey" title="Glossary Entry">
table buffering</a>, the buffered area must be specified in full in the <span class="qtext">WHERE</span> condition. If not, buffering is bypassed. <br>
<br></li>
<li>
If the data sources are accessed using single record buffering, the conditions joined using <span class="qtext">AND</span>
in the <span class="qtext">WHERE</span> condition must be specified for all key fields of the primary key. If not, buffering is bypassed. <br>
<br></li>
<li>
Instead of <span class="qtext">USING</span>, the obsolete addition <a href="javascript:call_link('abapud_client_obsolete.html')" class="blue"><span class="qtext">CLIENT SPECIFIED</span></a> can also be used outside
<a href="javascript:call_link('abenopensql_strict_mode_754.html')" class="blue">strict mode from Release 7.54</a>. It disables
implicit client handling and the client column can be used in the <span class="qtext">WHERE</span> condition as an operand.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>

</P>
<P>
In the following example, all today's flights of an airline in which no seats are occupied are deleted
from the database table <span class="lnkgrey">SFLIGHT</span> (see also, example for <a href="javascript:call_link('abapdelete_source.html')" class="blue"><span class="qtext">dtab-source</span></a>).
</P>
<p class="qtextml1">
<span class="qtext">
DATA carrid TYPE sflight-carrid. <br>cl_demo_input=>request( CHANGING field = carrid ). <br> <br>DELETE FROM sflight <br>
WHERE carrid = @carrid AND <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fldate = @sy-datum AND <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NOT seatsocc > 0. <br><br>
</span>
</p>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
 <span class="qtext">... db_hints</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
In the variant <span class="qtext">DELETE FROM TARGET</span>, <a href="javascript:call_link('abenosql_db_hints.html')" class="blue"><span class="qtext">db_hints</span></a> can be used to specify
<a href="javascript:call_link('abendatabase_hint_glosry.html')" class="grey" title="Glossary Entry">database hints</a>. <br><br>
</P>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_3@3@"></A> <span class="bold">Addition 3</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>[</i>ORDER BY ... <i class=bn>[</i>OFFSET o<i class=bn>]</i><i class=bn>]</i> <i class=bn>[</i>UP TO n ROWS<i class=bn>]</i></span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">ORDER BY ...</span> is used to sort the rows defined by the <span class="qtext">WHERE</span>
condition. The addition <span class="qtext">OFFSET</span> is used to delete only rows from the counter
<span class="qtext">o</span>. The addition <span class="qtext">UP TO</span> restricts the number of rows to delete to <span class="qtext">n</span>.
</P>
<P>
The addition <span class="qtext">OFFSET</span> can only be specified together with <span class="qtext">ORDER
BY ...</span>. The addition <span class="qtext">ORDER BY ...</span> cannot be specified without <span class="qtext">
OFFSET</span> or <span class="qtext">UP TO</span>. If the addition <span class="qtext">UP TO</span>
is specified without <span class="qtext">ORDER BY ...</span>, it is not possible to define which of the rows in question are deleted.
</P>
<P>
<span class="qtext">n</span> and <span class="qtext">o</span> expect
<a href="javascript:call_link('abenopen_sql_host_variables.html')" class="blue">host variables</a>,
<a href="javascript:call_link('abenopen_sql_host_expressions.html')" class="blue">host expressions</a>, or
<a href="javascript:call_link('abenabap_sql_host_literals.html')" class="blue">literals</a> with the type <span class="qtext">i</span>,
which can represent all non-negative numbers of the value range of <span class="qtext">i</span> except
its maximum value +2,147,483,647. If 0 is specified for <span class="qtext">n</span>, this maximum value
is used. If 0 is specified for <span class="qtext">o</span>, the addition <span class="qtext">OFFSET</span>
is ignored. Only the types <span class="qtext">b</span>, <span class="qtext">s</span>, <span class="qtext">i</span>,
or <span class="qtext">int8</span> can be specified. If <span class="qtext">n</span> or <span class="qtext">o</span> is specified as a literal or constant, the value 0 is not allowed.
</P>
<P>
The addition <span class="qtext">ORDER BY ...</span> has the same
<a href="javascript:call_link('abaporderby_clause.html')" class="blue">syntax and semantics</a> as in the <a href="javascript:call_link('abapselect.html')" class="blue">
<span class="qtext">SELECT</span></a> statement, but with the difference that it is not possible to sort explicitly by the
<a href="javascript:call_link('abenclient_column_glosry.html')" class="grey" title="Glossary Entry">client column</a> in the
<span class="qtext">DELETE</span> statement. The <span class="qtext">SELECT</span>-specific restrictions, on the other hand, are ignored.
</P>
<P>
The additions <span class="qtext">OFFSET</span> and <span class="qtext">UP TO</span> cannot be used when accessing <a href="javascript:call_link('abenprojection_view_glosry.html')" class="grey" title="Glossary Entry">projection views</a>.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The addition <span class="qtext">UP TO</span> can be used to prevent errors when deleting tables with
a very large number of entries. Errors of this type can occur, for example, if the internal transaction
manager has run out of memory. Exceptions can be raised on the database here if <span class="qtext">UP TO</span> is not used and not followed by a
<a href="javascript:call_link('abendatabase_commit_glosry.html')" class="grey" title="Glossary Entry">database commit</a>. These
resource bottlenecks can be prevented by distributing the delete action to multiple <span class="qtext">DELETE</span> statements and hence deleting the log entries in question.
<br><br></li>
<li>
If the addition <span class="qtext">ORDER BY ...</span> is specified but not sorted uniquely, it is not possible to define which rows are deleted.
<br><br></li>
<li>
A <span class="qtext">DELETE</span> statement with the additions <span class="qtext">OFFSET</span> and
<span class="qtext">UP TO</span> is executed on the database as a single operation (if possible). In
databases not supported by the additions <span class="qtext">OFFSET</span> and <span class="qtext">ORDER BY</span>, the statements <span class="qtext">SELECT</span> and <span class="qtext">DELETE</span> are separated internally. If
<a href="javascript:call_link('abenddic_database_tables_protocol.html')" class="blue">database table logging</a> is enabled, these statements are always separated. This is generally slower than executing a single database operation.
<br><br></li>
<li>
When the additions <span class="qtext">OFFSET</span> or <span class="qtext">UP TO</span> are used, the syntax check is performed in a
<a href="javascript:call_link('abenopensql_strict_mode_751.html')" class="blue">strict mode</a>, which handles the statement more strictly than the regular syntax check.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Deletes a database table filled using <a href="javascript:call_link('abapmodify_dbtab.html')" class="blue"><span class="qtext">MODIFY</span></a> in multiple iterations.
</P>
<p class="qtextml1">
<span class="qtext">
TYPES bigtab TYPE TABLE OF demo_big_table WITH EMPTY KEY. <br> <br>MODIFY demo_big_table FROM TABLE <br>
&nbsp;&nbsp;@( VALUE bigtab( FOR i = 1 UNTIL i > 1111111 <br>&nbsp;&nbsp;&nbsp;&nbsp; ( id = i value = |{ i }| ) ) ). <br>
 <br>DATA subrc TYPE sy-subrc. <br>DATA dbcnt TYPE sy-dbcnt. <br>WHILE subrc = 0. <br>&nbsp;&nbsp;DELETE FROM demo_big_table UP TO 100000 ROWS. <br>
&nbsp;&nbsp;subrc = sy-subrc. <br>&nbsp;&nbsp;dbcnt = sy-dbcnt. <br>&nbsp;&nbsp;cl_demo_output=>write( |sy-subrc: { subrc <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }, sy-dbcnt: { dbcnt } | ). <br>
&nbsp;&nbsp;COMMIT CONNECTION default. <br>ENDWHILE. <br>cl_demo_output=>display( ).
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapdelete_where.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:57 GMT -->
</html>
