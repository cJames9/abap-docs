<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENSELECT_HIERARCHY_DESC_AGG -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenselect_hierarchy_desc_agg.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:51 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="SELECT - FROM HIERARCHY_DESCENDANTS_AGGREGATE">
<title>
SELECT - FROM HIERARCHY_DESCENDANTS_AGGREGATE - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenselect_hierarchy_desc_agg.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenselect_hierarchy_desc_agg.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopensql.html')" class="blue">ABAP SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenopen_sql_reading.html')" class="blue">ABAP SQL - Reads</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenselect_clauses.html')" class="blue">SELECT clauses</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapfrom_clause.html')" class="blue">SELECT - FROM</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapselect_data_source.html')" class="blue">SELECT - FROM data_source</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenselect_hierarchy_data.html')" class="blue">SELECT - FROM hierarchy_data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenselect_hierarchy_navigators.html')" class="blue">SELECT - FROM hierarchy_navigator</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenselect_hierarchy_agg_navis.html')" class="blue">SELECT - FROM hierarchy_aggregate_navigator</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@HIERARCHY_DESCENDANTS_AGGREGATE@@!ABAP_OSQL_TABLE_FUNC!@@"></A>
<A NAME="@@SOURCE@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@WHERE@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@ON@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@JOIN@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@MEASURES@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@WITH SUBTOTAL@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@WITH BALANCE@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@WITH NOT MATCHED@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<A NAME="@@WITH TOTAL@@HIERARCHY_DESCENDANTS_AGGREGATE@@"></A>
<p><span class="h1">
SELECT - FROM HIERARCHY_DESCENDANTS_AGGREGATE
</span></p>
<A name="@@ITOC@@ABENSELECT_HIERARCHY_DESC_AGG_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext">... HIERARCHY_DESCENDANTS_AGGREGATE( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SOURCE
<a href="javascript:call_link('abenselect_hierarchy.html')" class="blue">hierarchy</a> <i class=bn>[</i>AS tabalias<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>JOIN <a href="javascript:call_link('abapselect_data_source.html')" class="blue">data_source</a> <i class=bn>[</i>AS tabalias<i class=bn>]</i> ON
<a href="javascript:call_link('abenosql_expr_logexp.html')" class="blue">sql_cond</a><i class=bn>]</i> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MEASURES agg_func1 AS alias1<i class=bn>[</i>, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; agg_func2 AS alias2<i class=bn>[</i>, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<i class=bn>]</i><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>WHERE <a href="javascript:call_link('abenosql_expr_logexp.html')" class="blue">sql_cond</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>WITH SUBTOTAL<i class=bn>]</i> <br>&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>WITH BALANCE<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>WITH NOT MATCHED<i class=bn>]</i> <br>&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>WITH TOTAL<i class=bn>]</i> ) ...</span> <br><br>
</p>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... JOIN data_source <i class=bn>[</i>AS tabalias<i class=bn>]</i></span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... WHERE sql_cond</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_3@3@" class="blue"> 3. <span class="qtext">... WITH SUBTOTAL</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_4@4@" class="blue"> 4. <span class="qtext">... WITH BALANCE</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_5@5@" class="blue"> 5. <span class="qtext">... WITH NOT MATCHED</span> </A> <br><br><A HREF="#!ABAP_ADDITION_6@6@" class="blue"> 6. <span class="qtext">... WITH TOTAL</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<p>
Specifies the <a href="javascript:call_link('abenhierarchy_agg_navi_glosry.html')" class="grey" title="Glossary Entry">hierarchy
aggregate navigator</a> <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span> as a data source <a href="javascript:call_link('abapselect_data_source.html')" class="blue"><span class="qtext">data_source</span></a> in a ABAP SQL
<a href="javascript:call_link('abenquery_glosry.html')" class="grey" title="Glossary Entry">query</a>. It accesses the
<a href="javascript:call_link('abenhierarchy_glosry.html')" class="grey" title="Glossary Entry">hierarchy</a> <a href="javascript:call_link('abenselect_hierarchy.html')" class="blue">
<span class="qtext">hierarchy</span></a> specified after <span class="qtext">SOURCE</span> and evaluates
it. After the hierarchy, <span class="qtext">AS</span> can be used to specify an alias name for it. This name is valid within parentheses and must be used in positions in which the hierarchy is addressed.
</p>
<P>
The hierarchy navigator <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span> returns a tabular result consisting of the
<a href="javascript:call_link('abenhierarchy_node_glosry.html')" class="grey" title="Glossary Entry">hierarchy nodes</a> of the
hierarchy <a href="javascript:call_link('abenselect_hierarchy.html')" class="blue"><span class="qtext">hierarchy</span></a> specified
after <span class="qtext">SOURCE</span>. These nodes meet the optional <span class="qtext">WHERE</span>
condition. If no <span class="qtext">WHERE</span> condition is specified, these are all the hierarchy
nodes. For each node of the result, the aggregate functions specified after <span class="qtext">MEASURES</span> are applied to the row set consisting of the node and all its
<a href="javascript:call_link('abendescendant_node_glosry.html')" class="grey" title="Glossary Entry">descendant nodes</a>. The result of each aggregate function is saved in the current node as the content of a separate column.
</P>
<p>
A comma-separated list of <a href="javascript:call_link('abenaggregate_function_glosry.html')" class="grey" title="Glossary Entry">aggregate
functions</a> <span class="qtext">agg_func1</span>, <span class="qtext">agg_func2</span>, ... must be
specified after <span class="qtext">MEASURES</span>. At least one aggregate function must be specified.
Each aggregate function must be assigned an alias name <span class="qtext">alias1</span>, <span class="qtext">alias2</span>,
... The arguments of the aggregate functions can be individual columns <a href="javascript:call_link('abenopen_sql_columns.html')" class="blue"><span class="qtext">col</span></a> of the hierarchy <span class="qtext">hierarchy</span> including its
<a href="javascript:call_link('abenddddl_hierarchy.html')" class="blue">herarchy columns</a> or a data source <span class="qtext">data_source</span> specified after <span class="qtext">JOIN</span>. The
<a href="javascript:call_link('abentable_comp_selector_glosry.html')" class="grey" title="Glossary Entry">column selector</a>
<span class="qtext">~</span> can (or must) be used to prefix the columns with the name of the hierarchy or data source. The following aggregate functions are possible:
</p>
<ul class="disc">
<li>If <span class="qtext">JOIN</span> is not specified, the arguments <span class="qtext">col</span> can be columns of the hierarchy and the following aggregate functions can be used:</li>
</ul>
<dl><dd>
<a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">MIN( col )</span></a>, <br><a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">MAX( col )</span></a>, <br>
<a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">SUM( col )</span></a>, <br><a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">COUNT( <i
class=bn>[</i>DISTINCT<i class=bn>]</i> col )</span></a>, <br><a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">COUNT( *
)</span></a>, <a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">COUNT(*)</span></a>
</dd></dl>
<dl><dd>
The addition <span class="qtext">DISTINCT</span> is only possible for <span class="qtext">COUNT</span>.
</dd></dl>
<ul class="disc">
<li>If <span class="qtext">JOIN</span> is specified, the arguments <span class="qtext">col</span> can
be columns of the hierarchy and the data source after data_source and the following aggregate functions can be used:</li>
</ul>
<dl><dd>
<a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">MIN( col )</span></a>, <br><a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">MAX( col )</span></a>, <br>
<a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">SUM( col )</span></a>, <br><a href="javascript:call_link('abensql_agg_func.html')" class="blue"><span class="qtext">COUNT( <i
class=bn>[</i>DISTINCT<i class=bn>]</i> col )</span></a>
</dd></dl>
<dl><dd>
The addition <span class="qtext">DISTINCT</span> is only possible for <span class="qtext">COUNT</span> and for columns of the hierarchy.
</dd></dl>
<p>
The aggregate functions work as specified in the <a href="javascript:call_link('abensql_agg_func.html')" class="blue">general
description</a>, except that only columns <span class="qtext">col</span> are allowed as arguments and
that the result of the function <span class="qtext">COUNT</span> is INT8 instead of INT4. For each aggregate
function, a column with the alias name defined by <span class="qtext">AS</span> is added to the tabular result of the hierarchy navigator. This column contains the result of the aggregate function in every row. These columns are not
<a href="javascript:call_link('abenddddl_hierarchy.html')" class="blue">hierarchy columns</a>. If <span class="qtext">*</span>
or <span class="qtext">...~*</span> is specified in the <a href="javascript:call_link('abapselect_list.html')" class="blue"><span class="qtext">
SELECT</span> list</a>, they are read like a column of the hierarchy specified as a source and are part
of a structure or internal table created using an inline declaration <span class="qtext">@DATA(...)</span> in the <a href="javascript:call_link('abapinto_clause.html')" class="blue"><span class="qtext">INTO</span> clause</a>.
</p>
<p>
Alongside the <a href="javascript:call_link('abenddddl_hierarchy.html')" class="blue">hierarchy columns</a> of the hierarchy
specified after <span class="qtext">SOURCE</span>, the results set contains a further hierarchy column
HIERARCHY_AGGREGATE_TYPE with the type INT1. In the rows of the results set created by the optional
<span class="qtext">WITH</span> additions, this column contains an indicator for the addition in question. In other cases it contains the numeric value 0.
</p>
<p><span class="h4">
Example
</span></p>
<p>
Calls the hierarchy navigator <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span> in the program <span class="lnkgrey">DEMO_HIERARCHY_AGGREGATE</span>, where the
<a href="javascript:call_link('abencds_hierarchy_glosry.html')" class="grey" title="Glossary Entry">CDS hierarchy</a> DEMO_CDS_PARENT_CHILD_AGG is specified as a source. The <span class="qtext">WHERE</span> condition evaluates the
<a href="javascript:call_link('abenddddl_hierarchy.html')" class="blue">hierarchy column</a> HIERARCHY_LEVEL and only nodes with
a maximum hierarchy level of 2 are added to the results set. The aggregate functions, however, respect
all descendant nodes regardless of their hierarchy level. When <span class="lnkgrey">executed</span>, this program demonstrates how this hierarchy navigator works.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(level) = 2. <br> <br>SELECT agg~* <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM HIERARCHY_DESCENDANTS_AGGREGATE( <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SOURCE demo_cds_parent_child_agg( p_id = 'A' ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MEASURES MIN( num ) AS min, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MAX( num ) AS max, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SUM( num ) AS sum, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COUNT( * ) AS cnt <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE hierarchy_level &lt;= @level ) AS agg <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(cds_hierarchy_desc_aggregate). <br><br>
</span>
</p>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... JOIN data_source <i class=bn>[</i>AS tabalias<i class=bn>]</i></span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
The optional addition <span class="qtext">JOIN</span> can be used to join an additional data source
<a href="javascript:call_link('abapselect_data_source.html')" class="blue"><span class="qtext">data_source</span></a> with the
hierarchy specified after <span class="qtext">SOURCE</span>. The same applies to <span class="qtext">data_source</span>
as to every data source of a query, except that path expressions <a href="javascript:call_link('abenopen_sql_path.html')" class="blue"><span class="qtext">
sql_path</span></a> are not possible. After the data source, <span class="qtext">AS</span> can be used
to specify an alias name for it. This name is valid within parentheses and must be used in positions in which the hierarchy is addressed.
</p>
<p>
The results set of the hierarchy is joined with the results set of the data source <span class="qtext">data_source</span>
in accordance with <a href="javascript:call_link('abapselect_join.html')" class="blue"><span class="qtext">LEFT OUTER JOIN</span></a>
rules. Here, the rules for conditions <a href="javascript:call_link('abenosql_expr_logexp.html')" class="blue"><span class="qtext">sql_cond</span></a>
in expressions apply to the <span class="qtext">ON</span> condition. Columns of the data source can
be used as arguments of the aggregate functions after <span class="qtext">MEASURES</span> for which
their data type is suitable. They are not, however, additional columns that are part of the tabular result of the hierarchy navigator.
</p>
<p>
For every node of the original hierarchy that meets the <span class="qtext">WHERE</span> condition, the aggregate functions specified after <span class="qtext">MEASURES</span> are applied to every
<a href="javascript:call_link('abendescendant_node_glosry.html')" class="grey" title="Glossary Entry">descendant node</a> in the results set of the join (as specified by the
<a href="javascript:call_link('abenpcr_glosry.html')" class="grey" title="Glossary Entry">parent-child relationship</a>).
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>The addition <span class="qtext">JOIN</span> does not modify the number of rows in the results set
of the hierarchy navigator <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span>. If, however,
the results set of the join contains more descendant nodes for a node than in the original hierarchy,
all these nodes are respected by the aggregate functions. Any starting nodes in a calculation that occur more than once are also all respected.</li>
</ul>
<ul class="disc">
<li>If there are <a href="javascript:call_link('abenaccess_condition_glosry.html')" class="grey" title="Glossary Entry">access conditions</a> in
<a href="javascript:call_link('abencds_access_control_glosry.html')" class="grey" title="Glossary Entry">CDS access control</a>
for a data source specified by <span class="qtext">JOIN</span> and these are not switched off using
<a href="javascript:call_link('abapselect_data_source.html')" class="blue"><span class="qtext">WITH PRIVILEGED ACCESS</span></a>, these conditions are applied before the join is made.</li>
</ul>
<p><span class="h4">
Executable Example
</span></p>
<p>
<a href="javascript:call_link('abenhier_desc_agg_abexa.html')" class="blue">Hierarchy Navigator <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span></a> <br><br>
</p>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... WHERE sql_cond</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
The <span class="qtext">WHERE</span> condition selects those nodes of the hierarchy specified after
<span class="qtext">SOURCE</span> that are added to the results set of the hierarchy navigator. Columns of the hierarchy, including the additional
<a href="javascript:call_link('abenddddl_hierarchy.html')" class="blue">hierarchy columns</a>, can be used in the condition <a href="javascript:call_link('abenosql_expr_logexp.html')" class="blue"><span class="qtext">sql_cond</span></a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The <span class="qtext">WHERE</span> condition does not restrict the descendant nodes of the selected nodes. It is used only to select those nodes for which the aggregate function is calculated.
<br><br></li>
<li>
The columns of a data source joined using <span class="qtext">JOIN</span> cannot be used after <span class="qtext">WHERE</span>. <br><br>
<br></li>
</ul>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_3@3@"></A> <span class="bold">Addition 3</span>
</span></p>
<P>
<span class="qtext">... WITH SUBTOTAL</span>   <br><!-- /A -->
</P>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_4@4@"></A> <span class="bold">Addition 4</span>
</span></p>
<P>
<span class="qtext">... WITH BALANCE</span>   <br><!-- /A -->
</P>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_5@5@"></A> <span class="bold">Addition 5</span>
</span></p>
<P>
<span class="qtext">... WITH NOT MATCHED</span>   <br><!-- /A -->
</P>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_6@6@"></A> <span class="bold">Addition 6</span>
</span></p>
<P>
<span class="qtext">... WITH TOTAL</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
Each of the optional <span class="qtext">WITH</span> additions (which can be specified in any order)
adds precisely one row to the tabular result of the hierarchy aggregate navigator <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span>. In the new row, all columns (including the
<a href="javascript:call_link('abenddddl_hierarchy.html')" class="blue">hierarchy columns</a>) contain the
<a href="javascript:call_link('abennull_value_glosry.html')" class="grey" title="Glossary Entry">null value</a>, with the exception
of columns created using the addition <span class="qtext">MEASURES</span> and the hierarchy column HIERARCHY_AGGREGATE_TYPE.
The special hierarchy column HIERARCHY_AGGREGATE_TYPE uses the following values to indicate which <span class="qtext">WITH</span> addition added the row:
</p>
<table border>
<tr>
<td><span class="bold"><span class="qtext">WITH</span> Addition</span></td>
<td><span class="bold">HIERARCHY_AGGREGATE_TYPE</span></td>
</tr>
<tr>
<td><span class="qtext">SUBTOTAL</span></td>
<td>1</td>
</tr>
<tr>
<td><span class="qtext">BALANCE</span></td>
<td>2</td>
</tr>
<tr>
<td><span class="qtext">NOT MATCHED</span></td>
<td>3</td>
</tr>
<tr>
<td><span class="qtext">TOTAL</span></td>
<td>4</td>
</tr>
</table><br>
<p>
In the rows not created by <span class="qtext">WITH</span>, the hierarchy column HIERARCHY_AGGREGATE_TYPE
contains the numeric value 0. The columns created by the addition <span class="qtext">MEASURES</span>
contain the results of their aggregate functions for the hierarchy nodes created as follows by the <span class="qtext">WITH</span> addition:
</p>
<ul class="disc">
<li><span class="qtext">WITH SUBTOTAL</span></li>
</ul>
<dl><dd>
The aggregate functions evaluate all hierarchy nodes that meet the <span class="qtext">WHERE</span> condition of the hierarchy navigator.
</dd></dl>
<ul class="disc">
<li><span class="qtext">WITH BALANCE</span></li>
</ul>
<dl><dd>
The aggregate functions evaluate all hierarchy nodes that do not meet the <span class="qtext">WHERE</span> condition of the hierarchy navigator.
</dd></dl>
<ul class="disc">
<li><span class="qtext">WITH NOT MATCHED</span></li>
</ul>
<dl><dd>
This addition can only be specified in combination with the <span class="qtext">JOIN</span> addition.
The aggregate functions evaluate all rows of the data source <span class="qtext">data_source</span>
specified after <span class="qtext">JOIN</span> for which the <span class="qtext">ON</span> condition of the join is not met.
</dd></dl>
<ul class="disc">
<li><span class="qtext">WITH TOTAL</span></li>
</ul>
<dl><dd>
The aggregate functions evaluate all hierarchy nodes plus the rows of a data source <span class="qtext">data_source</span>
specified after <span class="qtext">JOIN</span> that do not meet the <span class="qtext">ON</span> condition.
</dd></dl>
<p><span class="h4">
Note
</span></p>
<p>
If one of the <span class="qtext">WITH</span> additions is used, the syntax check is made in <a href="javascript:call_link('abenopensql_strict_mode_754.html')" class="blue">strict mode from Release 7.54</a>.
</p>
<p><span class="h4">
Executable Example
</span></p>
<p>
<a href="javascript:call_link('abenhier_desc_agg_with_abexa.html')" class="blue">Hierarchy Navigator <span class="qtext">HIERARCHY_DESCENDANTS_AGGREGATE</span> with <span class="qtext">WITH</span></a>
</p>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<img src="exa.gif" alt="Example" title="Example">
<a href="javascript:call_link('abenhier_desc_agg_abexa.html')" class="blue">Hierarchy Navigator HIERARCHY_DESCENDANTS_AGGREGATE</a><br>
<img src="exa.gif" alt="Example" title="Example">
<a href="javascript:call_link('abenhier_desc_agg_with_abexa.html')" class="blue">Hierarchy Navigator HIERARCHY_DESCENDANTS_AGGREGATE with WITH</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenselect_hierarchy_desc_agg.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:51 GMT -->
</html>
