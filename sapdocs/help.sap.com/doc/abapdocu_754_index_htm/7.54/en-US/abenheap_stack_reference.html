<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENHEAP_STACK_REFERENCE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenheap_stack_reference.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:43 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="Heap references and stack references">
<title>
Heap references and stack references - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenheap_stack_reference.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenheap_stack_reference.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendeclarations.html')" class="blue">Declarations</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_declarations.html')" class="blue">Declaration Statements</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentypes_and_objects.html')" class="blue">Data Types and Data Objects</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentypes_objects_oview.html')" class="blue">Types and Objects - Overview</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendata_objects.html')" class="blue">Data Objects</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendata_references.html')" class="blue">References</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
Heap references and stack references
</span></p>
<p>
The objects referenced by references can be located in the
<a href="javascript:call_link('abenheap_glosry.html')" class="grey" title="Glossary Entry">heap</a> or in the
<a href="javascript:call_link('abenstack_glosry.html')" class="grey" title="Glossary Entry">stack</a>. Objects in the heap are instances of classes or are
<a href="javascript:call_link('abenanonymous_data_object_glosry.html')" class="grey" title="Glossary Entry">anonymous data objects</a>.
Objects in the stack are the global data objects of programs and the local data objects of procedures stacked there.
</p>
<ul class="disc">
<li><span class="bold">Heap references</span> point to objects or parts of objects in the heap</li>
</ul>
<dl><dd>
Heap references are object references or data references. They are created either when new objects are
created in the heap (using the statements <a href="javascript:call_link('abapcreate_object.html')" class="blue"><span class="qtext">CREATE
OBJECT</span></a> or <a href="javascript:call_link('abapcreate_data.html')" class="blue"><span class="qtext">CREATE DATA</span></a>)
or by applying the statement <a href="javascript:call_link('abapget_reference.html')" class="blue"><span class="qtext">GET REFERENCE</span></a>
or the addition <a href="javascript:call_link('abapread_table_outdesc.html')" class="blue"><span class="qtext">REFERENCE INTO</span></a>
to data objects in the heap. Heap references are always memory-preserving, which means that, as long as a heap reference points to an object or a part of an object, then the object is not deleted by
<a href="javascript:call_link('abengarbage_collector_glosry.html')" class="grey" title="Glossary Entry">Garbage Collector</a>.
</dd></dl>
<ul class="disc">
<li><span class="bold">Stack references</span> point to objects or parts of objects in the stack</li>
</ul>
<dl><dd>
Stack references are always data references and are created only by applying the statement <a href="javascript:call_link('abapget_reference.html')" class="blue">
<span class="qtext">GET REFERENCE</span></a>, the reference operator <a href="javascript:call_link('abenconstructor_expression_ref.html')" class="blue">
<span class="qtext">REF</span></a>, or the addition <a href="javascript:call_link('abapread_table_outdesc.html')" class="blue"><span class="qtext">
REFERENCE INTO</span></a> to data objects in the stack. Stack references are not memory-preserving.
</dd></dl>
<p>
A non-initial object reference always points to an instance of a class, which means it is always a heap reference. A data reference can be a heap reference or a stack reference:
</p>
<ul class="disc">
<li>A data reference is a heap reference if it</li>
</ul>
<ul class="circlem2">
<li>points to an instance attribute or a part of an instance attribute of an object,</li>
</ul>
<ul class="circlem2">
<li>points to an anonymous data object or a part of an anonymous data object.</li>
</ul>
<ul class="disc">
<li>A data reference that points to a data object or a part of a data object in the stack is a stack reference.</li>
</ul>
<p>
A part of a data object is either a <a href="javascript:call_link('abencomponent_glosry.html')" class="grey" title="Glossary Entry">component</a> of a structure, a row of an
<a href="javascript:call_link('abeninternal_table_glosry.html')" class="grey" title="Glossary Entry">internal table</a>, or a section specified by an
<a href="javascript:call_link('abenoffset_length_specific_glosry.html')" class="grey" title="Glossary Entry">offset/length</a>.
</p>
<p>
Heap references preserve the memory and cannot become invalid, with one exception: a heap reference
to a row in an internal table becomes invalid if the table row is deleted. Stack references also become
invalid if the referenced data object is removed from the stack (that is, if the associated procedure is ended). The latter also applies to the local data in instance methods. The
<a href="javascript:call_link('abenpredicate_expression_glosry.html')" class="grey" title="Glossary Entry">predicate expression</a>
<a href="javascript:call_link('abenlogexp_bound.html')" class="blue"><span class="qtext">IS BOUND</span></a> for an invalid reference is false.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li><a href="javascript:call_link('abenfield_symbol_glosry.html')" class="grey" title="Glossary Entry">Field symbols</a> have
the same properties with respect to preserving memory and validity as data references. Field symbols to which objects or parts of objects are assigned in the heap are memory-preserving.</li>
</ul>
<ul class="disc">
<li>Internal tables are <a href="javascript:call_link('abendynamic_data_object_glosry.html')" class="grey" title="Glossary Entry">dynamic
data objects</a> and have a special role because they have their own memory management. They allocate
and release memory regardless of the statement <span class="qtext">CREATE</span> and Garbage Collector.
This means that heap references to rows in internal tables can become invalid. This is not the case for strings, since no references to substrings of strings are allowed.</li>
</ul>
<ul class="disc">
<li>A reference is classified as a heap reference or a stack reference depending on its value only,
and not by the type of the reference variable in which it is stored. In particular, assignments between reference variables do not change the relevant properties of the copied references.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The heap reference <span class="qtext">heap_ref</span> located on the
<a href="javascript:call_link('abenstack_glosry.html')" class="grey" title="Glossary Entry">stack</a> points to an anonymous data object in the
<a href="javascript:call_link('abenheap_glosry.html')" class="grey" title="Glossary Entry">heap</a>. The stack reference <span class="qtext">stack_ref</span> also on the stack points to <span class="qtext">heap_ref</span>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(heap_ref)&nbsp;&nbsp;= NEW i( 111 ). <br>DATA(stack_ref) = REF #( heap_ref ).
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenheap_stack_reference.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:43 GMT -->
</html>
