<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENUTCLONG_ADD -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenutclong_add.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:08 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="utclong_add - Time Stamp Function">
<title>
utclong_add - Time Stamp Function - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenutclong_add.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenutclong_add.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendate_time_processing.html')" class="blue">Date and Time Processing</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentime_stamps.html')" class="blue">Time Stamps</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenutclong.html')" class="blue">Time Stamp Field with Time Stamp Type</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentimestamp_functions.html')" class="blue">Time Stamp Functions</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@utclong_add@@!ABAP_FUNCTION!@@"></A>
<p><span class="h1">
utclong_add - Time Stamp Function
</span></p>
<A name="@@ITOC@@ABENUTCLONG_ADD_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext">... utclong_add( val&nbsp;&nbsp;= time_stamp [days = days] <br>&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [hours = hours] <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [minutes = minutes] <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [seconds = seconds] ) ...</span>
</p>
<p><span class="h4">
Effect
</span></p>
<p>
This function adds the values passed to the optional parameters as a
<a href="javascript:call_link('abentime_stamp_glosry.html')" class="grey" title="Glossary Entry">time stamp</a> specified after
<span class="qtext">val</span>. The type of the return value is <a href="javascript:call_link('abenbuiltin_types_date_time.html')" class="blue"><span class="qtext">utclong</span></a>.
</p>
<p>
A time stamp field of the type <span class="qtext">utclong</span> must be passed to the argument <span class="qtext">val</span>. This field must contain a valid time stamp. <span class="qtext">time_stamp</span> is a
<a href="javascript:call_link('abentimestamp_like_expr_pos_glosry.html')" class="grey" title="Glossary Entry">time-stamp-like expression position</a>. An initial time stamp is handled like the least possible value of a time stamp.
</p>
<p>
The added values are passed in the following parameters, of which at least one must be specified:
</p>
<ul class="disc">
<li><span class="qtext">days</span> expects a number of days as a number of the type <span class="qtext">i</span>.</li>
</ul>
<ul class="disc">
<li><span class="qtext">hours</span> expects a number of hours as a number of the type <span class="qtext">i</span>.</li>
</ul>
<ul class="disc">
<li><span class="qtext">minutes</span> expects a number of minutes as a number of the type <span class="qtext">int8</span>.</li>
</ul>
<ul class="disc">
<li><span class="qtext">seconds</span> expects a number of seconds as a number of the type <span class="qtext">decfloat34</span>.</li>
</ul>
<p>
Each parameter can be passed data objects that can be converted to the expected type. Both positive and negative numbers can be passed. These are
<a href="javascript:call_link('abennumerical_expr_position_glosry.html')" class="grey" title="Glossary Entry">numerical expression
positions</a>. Internally, the passed values are transformed to the appropriate number of seconds. Here,
the value passed to <span class="qtext">seconds</span> is rounded to seven decimal places. First, the
days, hours, and minutes are added to or subtracted from the time stamp, and then the seconds. If an
invalid time stamp value is produced by one of the intermediate steps, a catchable exception of the class CX_SY_ARITHMETIC_OVERFLOW is raised.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li><span class="qtext">utclong_subtract</span> is not provided, since its function is matched by passing negative numbers to the parameter <span class="qtext">utclong_add</span>.</li>
</ul>
<ul class="disc">
<li>There are no parameters for years and months, since they do not match a fixed number of seconds.</li>
</ul>
<ul class="disc">
<li>The result of the function <span class="qtext">utclong_add</span> is never the initial value of a time stamp. It is either a valid time stamp value or an exception is raised. <br><br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
This example demonstrates how the function <span class="qtext">utclong_add</span> works. The appropriate
number of seconds is subtracted from a time stamp field <span class="qtext">ts_new</span>, which itself
is produced by adding days, hours, and minutes. The statement <a href="javascript:call_link('abapassert.html')" class="blue"><span class="qtext">ASSERT</span></a> demonstrates how this reproduces the original time stamp.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(ts) = utclong_current( ). <br> <br>DATA(ts_new) = <br>&nbsp;&nbsp;utclong_add( val&nbsp;&nbsp;&nbsp;&nbsp; = ts <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; days&nbsp;&nbsp;&nbsp;&nbsp;= 1000 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hours&nbsp;&nbsp; = 100 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; minutes = 10 ). <br>
 <br>ASSERT ts = <br>&nbsp;&nbsp;utclong_add( val&nbsp;&nbsp;&nbsp;&nbsp; = ts_new <br>&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds = - ( 1000 * 86400 + 100 * 3600 + 10 * 60 ) ). <br> <br>cl_demo_output=>display( |{ ts }\n{ ts_new }| ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
This example demonstrates how the initial value is handled. One second is added to a time stamp <span class="qtext">
ts_ini</span> passed as an initial value and one second is subtracted from the result in <span class="qtext">ts_1</span>.
The result <span class="qtext">ts_0</span> is the lowest valid time stamp value and is not the initial value.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(o) = cl_demo_output=>new( ). <br> <br>DATA ts_ini TYPE utclong. <br> <br>IF ts_ini IS INITIAL. <br>
&nbsp;&nbsp;o->write( 'ts_ini is initial' ). <br>ENDIF. <br>o->write( ts_ini ). <br> <br>DATA(ts_1) = <br>
&nbsp;&nbsp;utclong_add( val&nbsp;&nbsp;&nbsp;&nbsp; = ts_ini <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds = 1 ). <br>
 <br>o->write( ts_1 ). <br> <br>DATA(ts_0) = <br>&nbsp;&nbsp;utclong_add( val&nbsp;&nbsp;&nbsp;&nbsp; = ts_1 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds = -1 ). <br>
 <br>IF ts_0 IS NOT INITIAL AND <br>&nbsp;&nbsp; ts_0 &lt;> ts_ini. <br>&nbsp;&nbsp;o->write( 'ts_0 is neither initial nor equal to ts_ini' ). <br>ENDIF. <br>o->write( ts_0 ). <br> <br>o->display( ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
This example shows how missing days due to the switch from the Julian to the Gregorian calendar are
handled. Adding 100 ns to the time stamp "1582-10-04 23:59:59.9999999" produces the time stamp "1582-10-15T00:00:00.0000000".
</p>
<p class="qtextml1">
<span class="qtext">
DATA(ts) = conv utclong( '1582-10-04 23:59:59.9999999' ). <br> <br>DATA(ts_new) = <br>&nbsp;&nbsp;utclong_add( val&nbsp;&nbsp;&nbsp;&nbsp; = ts <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; seconds&nbsp;&nbsp;&nbsp;&nbsp;= '0.0000001' ). <br> <br>cl_demo_output=>display( |{ ts }\n{ ts_new }| ). <br><br>
</span>
</p>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span> <br><br>
</P>
<P>
<span class="lnkgrey">CX_SY_CONVERSION_NO_DATE_TIME</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The time stamp specified for <span class="qtext">val</span> is invalid. <br><span class="italic">Runtime error:</span> <span class="qtext">INVALID_UTCLONG</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_CONVERSION_ERROR</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> A passed parameter cannot be converted to the expected type. <br><span class="italic">
Runtime error:</span> <span class="qtext">CONVT_OVERFLOW</span>, <span class="qtext">BCD_OVERFLOW</span>
<br></li>
</ul>
<P>
<span class="lnkgrey">CX_SY_ARITHMETIC_OVERFLOW</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The parameters passed produce an invalid time stamp. <br><span class="italic">Runtime error:</span> <span class="qtext">UTCLONG_ADD_OVERFLOW</span> <br><br>
<br></li>
</ul>
<P>
<span class="bold">Non-Handleable Exceptions</span> <br><br>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> An argument without a time stamp type is bound to <span class="qtext">val</span>. <br><span class="italic">Runtime error:</span> <span class="qtext">TCHK_TYPE_LOAD</span>
<br></li>
</ul>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenutclong_add.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:08 GMT -->
</html>
