<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENITAB_KEY_SECONDARY -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenitab_key_secondary.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:24 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="Secondary Table Key">
<meta name="keywords" content="ABAP, Secondary Key, Secondary Table Key">
<title>
Secondary Table Key - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenitab_key_secondary.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenitab_key_secondary.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab.html')" class="blue">Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab_oview.html')" class="blue">Internal Tables - Overview</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab_key.html')" class="blue">Table Keys</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
Secondary Table Key
</span></p>
<p>
<a href="javascript:call_link('abenhash_key_glosry.html')" class="grey" title="Glossary Entry">Hash keys</a> and
<a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted keys</a> can be declared as
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table keys</a> for each internal table. For each sorted key, an additional
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a> is created.
</p>
<p>
Access to an internal table using a secondary key is always optimized. This allows additional optimized keys to be introduced for sorted and hashed tables as well as optimized key accesses for standard tables.
</p>
<ul class="disc">
<li>Declaration of secondary table keys</li>
</ul>
<dl><dd>
For data types declared in ABAP programs, a secondary table key is declared using additions <a href="javascript:call_link('abaptypes_secondary_key.html')" class="blue"><span class="qtext">UNIQUE<i
class=bn>|</i>NON-UNIQUE KEY key_name COMPONENTS</span></a> of statements <a href="javascript:call_link('abaptypes_secondary_key.html')" class="blue">
<span class="qtext">TYPES</span></a>, <a href="javascript:call_link('abapdata_secondary_key.html')" class="blue"><span class="qtext">DATA</span></a>
and so on. For table types created in ABAP Dictionary, the tool provides the corresponding functions.
</dd></dl>
<ul class="disc">
<li>Access using secondary keys</li>
</ul>
<dl><dd>
In key accesses to internal tables, the addition <span class="qtext">WITH <i class=bn>[</i>TABLE<i class=bn>]</i> KEY key_name</span> can be used in
<a href="javascript:call_link('abentable_processing_statements.html')" class="blue">processing statements</a> to specify which secondary table key to use. In index accesses, <span class="qtext">USING KEY keyname</span> can be used to specify the
<a href="javascript:call_link('abentable_index_glosry.html')" class="grey" title="Glossary Entry">table index</a> of which secondary key to use. In
<a href="javascript:call_link('abentable_expressions.html')" class="blue">table expressions</a>, this is specified using the
addition <a href="javascript:call_link('abentable_exp_itab_line.html')" class="blue"><span class="qtext">KEY</span></a>. Secondary
keys are not selected automatically. If no secondary key is specified in a processing statement, the primary key or primary table index is always used. If no explicit key is specified for a table expression, a
<a href="javascript:call_link('abapread_table_free.html')" class="blue">free search key</a> is used to perform reads.
</dd></dl>
<dl><dd>
Statements where secondary keys can be specified are:
</dd></dl>
<ul class="circlem2">
<li><a href="javascript:call_link('abapread_table.html')" class="blue"><span class="qtext">READ TABLE itab</span></a> <br>The rows to be read can be specified using a secondary key.</li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abaploop_at_itab.html')" class="blue"><span class="qtext">LOOP AT itab</span></a> <br>The processing order and conditions can be controlled using a secondary table key.</li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapinsert_itab.html')" class="blue"><span class="qtext">INSERT itab</span></a> <br>Only a
secondary key for the source table can be specified here, from which multiple rows are copied. The position they are inserted at is determined solely using the primary key and the primary index.</li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapappend.html')" class="blue"><span class="qtext">APPEND</span></a> <br>Only a secondary key for the source table can be specified here, onto which multiple rows are appended.</li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapmodify_itab.html')" class="blue"><span class="qtext">MODIFY itab</span></a> <br>The rows to be modified can be specified using a secondary key.</li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapdelete_itab.html')" class="blue"><span class="qtext">DELETE itab</span></a> <br>The rows to be deleted can be specified using a secondary key.</li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abaptypes_mesh_association.html')" class="blue"><span class="qtext">TYPES ... ASSOCIATION</span></a>, <a href="javascript:call_link('abenmesh_path_assoc_cond.html')" class="blue"><span class="qtext">\_assoc[ ...
]</span></a> <br>The secondary key used in the evaluation of a <a href="javascript:call_link('abenmesh_path_glosry.html')" class="grey" title="Glossary Entry">mesh path</a> can be specified using <span class="qtext">USING KEY</span>.</li>
</ul>
<dl><dd>
If the system field <span class="qtext">sy-tabix</span> is set by this type of access, and a sorted secondary key is used, the row number refers to the associated
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a>.
In statements that these additions has not been introduced for, like <a href="javascript:call_link('abapsort_itab.html')" class="blue"><span class="qtext">
SORT</span></a>, <a href="javascript:call_link('abapcollect.html')" class="blue"><span class="qtext">COLLECT</span></a>, or <a href="javascript:call_link('abapprovide.html')" class="blue">
<span class="qtext">PROVIDE</span></a>, secondary keys are not explicitly supported.
</dd></dl>
<p>
The key fields of a secondary table key are only write-protected if the secondary table key is in use
in a <span class="qtext">LOOP</span> loop or in a <span class="qtext">MODIFY</span> statement. Otherwise, the secondary key fields are not write-protected.
</p>
<p><span class="h4">
Programming Guideline
</span></p>
<P>
<a href="javascript:call_link('abensecondary_key_guidl.html')" class="lnkpurple" title="Guideline">Secondary Keys</a>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>Optimized access times for the individual rows using secondary keys are
<a href="javascript:call_link('abenitab_key_memory.html')" class="blue">bought</a> in exchange for the fact that the ABAP runtime
environment then needs to administer the additional keys. For hash keys, this means additional hash administration. For each sorted key, it means an additional
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a>.</li>
</ul>
<ul class="disc">
<li>When working with internal tables for which a secondary key is declared, it must be ensured that the required key or table index is used in the processing statements.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Declaration of a hashed table with a unique primary key and a non-unique sorted secondary key <span class="qtext">cities</span>. The table is filled with data from a database table, read using a
<a href="javascript:call_link('abentable_expression_glosry.html')" class="grey" title="Glossary Entry">table expression</a> with values specified for the secondary key. The first row found is read.
</p>
<p class="qtextml1">
<span class="qtext">
DATA cityfrom TYPE spfli-cityfrom VALUE 'FRANKFURT'. <br>cl_demo_input=>add_field( CHANGING field = cityfrom ). <br>
DATA cityto TYPE spfli-cityto VALUE 'NEW YORK'. <br>cl_demo_input=>request( CHANGING field = cityto ). <br>
 <br>DATA spfli_tab <br>&nbsp;&nbsp;TYPE HASHED TABLE OF spfli <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH UNIQUE KEY primary_key
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMPONENTS carrid connid <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH NON-UNIQUE SORTED KEY cities&nbsp;&nbsp;COMPONENTS cityfrom cityto. <br>
 <br>SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM spfli <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @spfli_tab. <br>
 <br>cl_demo_output=>display( <br>&nbsp;&nbsp;VALUE #( spfli_tab[ KEY cities <br>&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cityfrom = cityfrom <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cityto&nbsp;&nbsp; = cityto ] OPTIONAL ) ).
</span>
</p>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abenitab_key_secondary_update.html')" class="blue">Updating Secondary Keys</a><br>
<a href="javascript:call_link('abenitab_key_secondary_usage.html')" class="blue">Using Secondary Keys</a><br>
<a href="javascript:call_link('abenitab_key_secondary_restrict.html')" class="blue">Restrictions for Secondary Keys</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenitab_key_secondary.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:24 GMT -->
</html>
