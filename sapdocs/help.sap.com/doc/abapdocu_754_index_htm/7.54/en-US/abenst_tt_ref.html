<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENST_TT_REF -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenst_tt_ref.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:58 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="ST - tt:ref, Current Node">
<meta name="keywords" content="ABAP, Simple Transformations, ref">
<title>
ST - tt:ref, Current Node - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenst_tt_ref.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenst_tt_ref.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_communication.html')" class="blue">Data Interfaces and Communication Interfaces</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_xml.html')" class="blue">ABAP and XML</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_xml_trafos.html')" class="blue">Transformations for XML</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_st.html')" class="blue">ST - Simple Transformations</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenst_addressing.html')" class="blue">ST - Addressing ABAP Data</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@ref@@!ABAP_ST_ELEMENT!@@"></A>
<p><span class="h1">
ST - tt:ref, Current Node
</span></p>
<A name="@@ITOC@@ABENST_TT_REF_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext400">... <i class=bn>[</i>tt:<i class=bn>]</i>ref ...</span>
</p>
<p><span class="h4">
Effect
</span></p>
<p>
Exactly one node of the tree structures of the current template can be set as the current node at any
place within a simple transformation (statically and when the program is executed). The current node
obscures the data roots in the sense that a reference <span class="qtext400">name</span> does not refer to a root <span class="qtext400">name</span>, but to the component <span class="qtext400">name</span> of the current node (see
<a href="javascript:call_link('abenst_addressing_subnodes.html')" class="blue">Addressing Subnodes</a>). If the current node is defined, it is the implicit operand of many
<a href="javascript:call_link('abenst_statements.html')" class="blue">ST commands</a>, but it can also be addressed explicitly using <span class="qtext400">$ref</span>.
</p>
<p>
This section shows how to set the current node explicitly using <span class="qtext400"><i class=bn>[</i>tt:<i
class=bn>]</i>ref</span>. In addition, the statement <a href="javascript:call_link('abenst_tt_loop.html')" class="blue"><span class="qtext400">tt:loop</span></a> for transforming internal tables also sets the current node.
</p>
<p>
At positions where the current node is not set explicitly, it is undefined and cannot be addressed using
<span class="qtext400">$ref</span>. In these positions, the data roots are not obscured and they can be addressed using <span class="qtext400">name</span>.
</p>
<A name="@@ITOC@@ABENST_TT_REF_2"></A>
<p><span class="h2">
Use a command to set the current node
</span></p>
<dl><dd>
<span class="qtext400">&lt;tt:ref name="node"> <br>&nbsp;&nbsp;... <br>&lt;/tt:ref></span>
</dd></dl>
<p>
The command <span class="qtext400">tt:ref</span> sets the current node to the node specified in <span class="qtext400">
node</span>. Any addressable data node can be specified for <span class="qtext400">node</span>. If no valid node is specified, the current node is undefined.
</p>
<p>
The <span class="qtext400">tt:ref</span> command can be nested. It builds a context in which the currently
set node is valid. Outside the corresponding XML element, the current outermost node is still valid. On the top level, the current node is always undefined.
</p>
<p>
The command <span class="qtext400">tt:ref</span> itself has no operational effect; it only influences the impact of the commands nested within it.
</p>
<p><span class="h4">
Note
</span></p>
<p>
As a result of the <a href="javascript:call_link('abenst_addressing_nodes.html')" class="blue">addressing rules</a>, only a subnode of the current node can be set as the new current node, unless a data root is being set.
</p>
<A name="@@ITOC@@ABENST_TT_REF_3"></A>
<p><span class="h2">
Use an attribute to set the current node
</span></p>
<dl><dd>
<span class="qtext400">&lt;tt:... ref="node"> <br>&nbsp;&nbsp;... <br>&lt;/tt:...></span>
</dd></dl>
<p>
Many <a href="javascript:call_link('abenst_statements.html')" class="blue">ST commands</a> make it possible to specify the current
node as the content of the attribute <span class="qtext400">ref</span>. The same rules apply to <span class="qtext400">
node</span> as when setting using the command <span class="qtext400">tt:ref</span>. If no attribute
<span class="qtext400">ref</span> is specified, the command applies to the current node of the context. The currently set node is valid only within the context of the ST command.
</p>
<A name="@@ITOC@@ABENST_TT_REF_4"></A>
<p><span class="h2">
Sets the current node in literal XML elements
</span></p>
<dl><dd>
<span class="qtext400">&lt;... tt:ref="node"> <br>&nbsp;&nbsp;... <br>&lt;/...></span>
</dd></dl>
<p>
In a <a href="javascript:call_link('abenst_xml_literals.html')" class="blue">literal XML element</a>, <span class="qtext400">tt:ref</span>
is a special attribute in the namespace of the ST command and sets the current node there. The same
rules apply to <span class="qtext400">node</span> as when setting using the command <span class="qtext400">tt:ref</span>. The currently set node is valid only within the context of the XML element.
</p>
<p><span class="h4">
Example
</span></p>
<p>
The following ST program can be used to serialize a nested ABAP structure:
</p>
<dl><dd>
<span class="qtext400">&lt;tt:transform <br>&nbsp;&nbsp;xmlns:tt="http://www.sap.com/transformation-templates"> <br>
&nbsp;&nbsp;&lt;tt:root name="ROOT"/> <br>&nbsp;&nbsp;&lt;tt:template> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;X tt:ref="ROOT"> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;X1> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:value ref="COL1" /> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/X1> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;X2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:value ref="COL2" /> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/X2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;X3 tt:ref="STRUC2"> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;X1> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:value ref="COL1" /> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/X1> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;X2> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:value ref="COL2" /> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/X2> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/X3> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/X> <br>&nbsp;&nbsp;&lt;/tt:template> <br>&lt;/tt:transform></span>
</dd></dl>
<p>
The current node is changed as follows:
</p>
<ul class="disc">
<li>At the beginning of the (nameless) main template, the current node is undefined. The data root <span class="qtext400">ROOT</span> can be addressed directly using <span class="qtext400">"ROOT"</span>.</li>
</ul>
<ul class="disc">
<li>The current node is set to the data root for the entire element <span class="qtext400">X</span>.
Within <span class="qtext400">X</span>, only <span class="qtext400">".ROOT"</span> could be used for addressing the data root directly.</li>
</ul>
<ul class="disc">
<li>In the context of the two subsequent <span class="qtext400">tt:value</span> commands, the current
node is set consecutively to the subnodes <span class="qtext400">COL1</span> and <span class="qtext400">COL2</span>
of <span class="qtext400">ROOT</span>. The commands serialize or deserialize the ABAP data object that is bound to the current node.</li>
</ul>
<ul class="disc">
<li>The current node for literal element <span class="qtext400">X3</span>, which is nested in <span class="qtext400">
X</span>, is set to another subnode <span class="qtext400">STRUC2</span> of <span class="qtext400">ROOT</span>.</li>
</ul>
<ul class="disc">
<li>In the context of the two subsequent <span class="qtext400">tt:value</span> commands, the current
node is set consecutively to the subnodes <span class="qtext400">COL1</span> and <span class="qtext400">COL2</span>
of <span class="qtext400">STRUC2</span>. ,,Each time an element is exited, the current node is set back to that of the surrounding element.</li>
</ul>
<p>
Also see the example for calling a transformation in the <a href="javascript:call_link('abenst_tt_value_structure.html')" class="blue"><span class="qtext400">tt:value</span>, Structures</a> section.
</p>
<p>

</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenst_tt_ref.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:58 GMT -->
</html>
