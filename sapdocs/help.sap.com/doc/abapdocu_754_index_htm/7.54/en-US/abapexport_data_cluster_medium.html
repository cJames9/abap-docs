<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPEXPORT_DATA_CLUSTER_MEDIUM -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapexport_data_cluster_medium.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:42 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="EXPORT - medium">
<meta name="keywords" content="ABAP, ABAP Memory, Write, Shared Memory, Write Data Cluster">
<title>
EXPORT - medium - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapexport_data_cluster_medium.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapexport_data_cluster_medium.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendata_cluster.html')" class="blue">Data Cluster</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapexport_data_cluster.html')" class="blue">EXPORT</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
EXPORT - medium <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapexport_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>{</i> DATA BUFFER xstr <i class=bn>}</i> <br>&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i> INTERNAL TABLE itab <i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i> MEMORY ID id <i class=bn>}</i> <br>&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i> DATABASE
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id <i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i> SHARED MEMORY dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id <i class=bn>}</i> <br>
&nbsp;&nbsp;<i class=bn>|</i> <i class=bn>{</i> SHARED BUFFER dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id <i class=bn>}</i> ...</span> <br><br>
</P>
<p><span class="h2">
Alternatives:
</span></p>
<P>
   <A HREF="#!ABAP_ALTERNATIVE_1@1@" class="blue"> 1. <span class="qtext">... DATA BUFFER xstr</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_2@2@" class="blue"> 2. <span class="qtext">... INTERNAL TABLE itab</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_3@3@" class="blue"> 3. <span class="qtext">... MEMORY ID id</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_4@4@" class="blue"> 4. <span class="qtext">... DATABASE dbtab(ar) <i
class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_5@5@" class="blue"> 5. <span class="qtext">... SHARED MEMORY dbtab(ar) <i
class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id</span> </A> <br>
<br><A HREF="#!ABAP_ALTERNATIVE_6@6@" class="blue"> 6. <span class="qtext">... SHARED BUFFER dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The exported <a href="javascript:call_link('abendata_cluster_glosry.html')" class="grey" title="Glossary Entry">data cluster</a> can be stored in a byte string <span class="qtext">xstr</span>, in an internal table <span class="qtext">itab</span> , in the
<a href="javascript:call_link('abenabap_memory_glosry.html')" class="grey" title="Glossary Entry">ABAP memory</a>, in a database table <span class="qtext">dbtab</span>, or in a shared memory area
(<span class="qtext">SHARED MEMORY</span> or <span class="qtext">BUFFER</span> specified).
</P>
<p><span class="h4">
Note
</span></p>
<P>
For optimization reasons, the binary content of the data cluster can be dependent on the way it is saved.
When reconstructed, a data cluster saved in multiple parts is not necessarily the same as a data cluster
saved as a single cluster This means that a data cluster can usually only be imported using an <a href="javascript:call_link('abapimport_data_cluster.html')" class="blue">
<span class="qtext">IMPORT</span></a> statement that matches the save method.
</P>
<p><span class="h4">
Example
</span></p>
<P>
The program <span class="lnkgrey">DEMO_DATA_CLUSTER</span> demonstrates that the size of the data cluster is mostly independent of the way it is saved. <br><br>
</P>
<A NAME="@@DATA BUFFER@@EXPORT cluster@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_1@1@"></A> <span class="bold">Alternative 1</span>
</span></p>
<P>
<span class="qtext">... DATA BUFFER xstr</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If <span class="qtext">DATA BUFFER</span> is specified, the data cluster is written to the elementary
data object <span class="qtext">xstr</span>, which has to be of the type <span class="qtext">xstring</span>. The previous content of <span class="qtext">xstr</span> is overwritten completely. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
A data object <span class="qtext">xstr</span> filled by <span class="qtext">EXPORT TO DATA BUFFER</span> contains exactly one data cluster.
<br><br></li>
<li>
A common application of the addition <span class="qtext">DATA BUFFER</span> is to store the new data
cluster in a field of a database table with the corresponding data type. In this case, consider compressing
the data cluster using the addition <a href="javascript:call_link('abapexport_data_cluster.html')" class="blue"><span class="qtext">COMPRESSION</span></a>,
since, by default, compression as a medium is only activated if <span class="qtext">DATABASE</span> is specified directly.
<br><br></li>
<li>
The content of a data object filled by <span class="qtext">EXPORT TO DATA BUFFER</span> can only be
evaluated using <span class="qtext">IMPORT FROM DATA BUFFER</span>. In other evaluations, for example when comparing data clusters, the result is not defined. For example, the undefined content of
<a href="javascript:call_link('abenalignment_gap_glosry.html')" class="grey" title="Glossary Entry">alignment gaps</a> in structures can produce different data clusters with structures that otherwise have the same content.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Exports an internal table to a byte string and saves it to a database table. After the byte string is read from the database table, the content of the data cluster can be imported to another internal table.
</p>
<p class="qtextml1">
<span class="qtext">
SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM scarr <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(itab). <br>
 <br>DATA buffer TYPE xstring. <br>EXPORT itab = itab TO DATA BUFFER buffer. <br> <br>MODIFY demo_expressions FROM @( <br>
&nbsp;&nbsp;VALUE #( id = 'B' xstring1 = buffer ) ). <br> <br>... <br> <br>DATA jtab TYPE TABLE OF scarr WITH EMPTY KEY. <br>
SELECT SINGLE xstring1 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM demo_expressions <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHERE id = 'B' <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO @buffer. <br> <br>IF sy-subrc = 0. <br>&nbsp;&nbsp;IMPORT itab = jtab FROM DATA BUFFER buffer. <br>
ENDIF. <br>IF sy-subrc = 0. <br>&nbsp;&nbsp;cl_demo_output=>display( jtab ). <br>ENDIF. <br><br>
</span>
</p>
<A NAME="@@INTERNAL TABLE@@EXPORT cluster@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_2@2@"></A> <span class="bold">Alternative 2</span>
</span></p>
<P>
<span class="qtext">... INTERNAL TABLE itab</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If <span class="qtext">INTERNAL TABLE</span> is specified, the data cluster is stored in the internal
table <span class="qtext">itab</span>. The previous content of <span class="qtext">itab</span> is overwritten completely.
</P>
<P>
The first column of <span class="qtext">itab</span> must have the data type <a href="javascript:call_link('abenbuiltin_types_numeric.html')" class="blue">
<span class="qtext">s</span></a> or <a href="javascript:call_link('abenbuiltin_types_numeric.html')" class="blue"><span class="qtext">i</span></a>
and the second column must have the type <span class="qtext">x</span>. Depending on the width of the
second column, the data is stored across multiple table rows if necessary. The first row contains the length occupied in the second row. The only table category allowed for <span class="qtext">itab</span> are
<a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">standard tables</a> without
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table keys</a>. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
An internal table <span class="qtext">itab</span> filled by <span class="qtext">EXPORT TO INTERNAL TABLE</span> contains exactly one data cluster.
<br><br></li>
<li>
The content of an internal table filled by <span class="qtext">EXPORT TO INTERNAL TABLE</span> can only
be evaluated using <span class="qtext">IMPORT FROM INTERNAL TABLE</span> for the same reasons as for <span class="qtext">EXPORT TO DATA BUFFER</span>.
<br><br></li>
<li>
The variant <span class="qtext">EXPORT TO DATA BUFFER</span> is preferred over the variant <span class="qtext">EXPORT
TO INTERNAL TABLE</span> because it is easier to handle. An export to an internal table is of benefit only for very large data clusters and if the available
<a href="javascript:call_link('abenmemory_consumption_2.html')" class="blue">memory</a> is almost used up. This is because its memory is requested block by block, while the memory for a string must always be completely available.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Exports an internal table to a data cluster in an internal table and imports it into another internal table.
</p>
<p class="qtextml1">
<span class="qtext">
TYPES: <br>&nbsp;&nbsp;BEGIN OF bline, <br>&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;clstr TYPE x LENGTH 100, <br>&nbsp;&nbsp;END OF bline. <br> <br>SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM scarr <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(itab). <br> <br>DATA buffer TYPE TABLE OF bline WITH EMPTY KEY. <br>
EXPORT itab = itab TO INTERNAL TABLE buffer. <br> <br>... <br> <br>DATA jtab TYPE TABLE OF scarr WITH EMPTY KEY. <br>
IMPORT itab = jtab FROM INTERNAL TABLE buffer. <br>IF sy-subrc = 0. <br>&nbsp;&nbsp;cl_demo_output=>display( jtab ). <br>ENDIF. <br><br>
</span>
</p>
<A NAME="@@MEMORY@@EXPORT cluster@@"></A>
<A NAME="@@ID@@EXPORT TO MEMORY@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_3@3@"></A> <span class="bold">Alternative 3</span>
</span></p>
<P>
<span class="qtext">... MEMORY ID id</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If <span class="qtext">MEMORY</span> is specified, the data cluster is written in to
<a href="javascript:call_link('abenabap_memory_glosry.html')" class="grey" title="Glossary Entry">ABAP Memory</a> with the ID specified in <span class="qtext">id</span>. <span class="qtext">id</span> expects a
<a href="javascript:call_link('abenflat_glosry.html')" class="grey" title="Glossary Entry">flat</a>
<a href="javascript:call_link('abencharlike_data_object_glosry.html')" class="grey" title="Glossary Entry">character-like data
object</a> containing a case-sensitive ID with a maximum of 60 characters. Any existing data clusters
with the same ID <span class="qtext">id</span> are completely overwritten. The ID in <span class="qtext">id</span> identifies a data cluster in the repository and can be read again using the same identification. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
A data cluster in the ABAP memory is available to all programs within a
<a href="javascript:call_link('abencall_sequence_glosry.html')" class="grey" title="Glossary Entry">call sequence</a>, which makes it possible to pass data to called programs.
<br><br></li>
<li>
Outside of classes, an <a href="javascript:call_link('abapexport_import_mem_id_obsolete.html')" class="blue">obsolete short form</a>
exists, in which the addition <span class="qtext">ID</span> can be omitted. However, this is prone to errors, since all <span class="qtext">EXPORT</span> statements without ID overwrite the same data cluster. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Exports two text strings labeled <span class="qtext400">P1</span> and <span class="qtext400">P2</span>
into the ABAP memory. After the statement <a href="javascript:call_link('abapimport_data_cluster.html')" class="blue"><span class="qtext">IMPORT</span></a>
is executed, the contents of the fields <span class="qtext">text1</span> and <span class="qtext">text2</span> are swapped. <br><br>
</P>
<p class="qtextml1">
<span class="qtext">
DATA(id) = 'TEXTS'. <br> <br>DATA(text1) = `Ike`. <br>DATA(text2) = `Tina`. <br> <br>EXPORT p1 = text1 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p2 = text2 TO MEMORY ID id. <br> <br>... <br> <br>IMPORT p1 = text2 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; p2 = text1 FROM MEMORY ID id. <br><br>
</span>
</p>
<A NAME="@@DATABASE@@EXPORT cluster@@"></A>
<A NAME="@@FROM@@EXPORT TO DATABASE@@"></A>
<A NAME="@@CLIENT@@EXPORT TO DATABASE@@"></A>
<A NAME="@@ID@@EXPORT TO DATABASE@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_4@4@"></A> <span class="bold">Alternative 4</span>
</span></p>
<P>
<span class="qtext">... DATABASE dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If <span class="qtext">DATABASE</span> is specified, the data cluster with the ID <span class="qtext">id</span> is stored in the database table <span class="qtext">dbtab</span> and committed by the next
<a href="javascript:call_link('abendatabase_commit_glosry.html')" class="grey" title="Glossary Entry">database commit</a>. The database table must be an
<a href="javascript:call_link('abenexport_import_table_glosry.html')" class="grey" title="Glossary Entry">export/import table</a> with a predefined
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">structure</a>. <span class="qtext">id</span> expects a
<a href="javascript:call_link('abenflat_glosry.html')" class="grey" title="Glossary Entry">flat</a>
<a href="javascript:call_link('abencharlike_data_object_glosry.html')" class="grey" title="Glossary Entry">character-like data object</a> containing an ID no longer than the key fields of the export/import table defined between the columns
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">RELID</a> and <a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">SRTF2</a>. The ID is case-sensitive.
</P>
<P>
The two-character area <span class="qtext">ar</span>, which must be specified directly, splits up the
rows of the database table into multiple areas, so that data clusters with the same ID <span class="qtext">id</span> can exist more than once in the database table.
</P>
<P>
After <span class="qtext">FROM</span>, a work area <span class="qtext">wa</span> can be specified that
must have the same data type as the export/import table <span class="qtext">dbtab</span>. In an export, the current values of the components of <span class="qtext">wa</span>, which are located between the fields
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">SRTF2</a> and
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">CLUSTR</a>, are written to all rows occupied
by the data cluster of the database table. If the addition <span class="qtext">FROM wa</span> is not
specified within classes, no data transport takes place in these database fields. If the addition <span class="qtext">
FROM wa</span> is not specified outside of classes, but the statement <a href="javascript:call_link('abaptables.html')" class="blue"><span class="qtext">TABLES</span></a> is used to declare a
<a href="javascript:call_link('abentable_work_area_glosry.html')" class="grey" title="Glossary Entry">table work area</a> for
the export/import table <span class="qtext">dbtab</span>, the current values of the corresponding components
of the table work area <span class="qtext">dbtab</span> are written to the rows of the database table in the export.
</P>
<P>
If the export/import table <span class="qtext">dbtab</span> is client-specific, a flat character-like field <span class="qtext">cl</span> can be specified after the addition <span class="qtext">CLIENT</span>. This field contains a
<a href="javascript:call_link('abenclient_identifier_glosry.html')" class="grey" title="Glossary Entry">client ID</a>. If the
addition is not specified, the current client is used. The column MANDT of every row in the database table occupied by the data cluster is filled by this client ID in the export. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The statement <span class="qtext">EXPORT TO DATABASE</span> sets a
<a href="javascript:call_link('abendatabase_lock_glosry.html')" class="grey" title="Glossary Entry">database lock</a> until the next database commit or rollback. If used incorrectly, this can produce a
<a href="javascript:call_link('abendeadlock_glosry.html')" class="grey" title="Glossary Entry">deadlock</a>.
<br><br></li>
<li>
Data clusters in databases are not converted when migrating from a non-Unicode database to a
<a href="javascript:call_link('abenunicode_system_glosry.html')" class="grey" title="Glossary Entry">Unicode system</a>. In a
Unicode system, therefore, data clusters may sometimes exist that contain non-Unicode characters. These
characters are automatically converted to Unicode characters in each import. When data is exported in Unicode systems, any Unicode characters in the stored data objects are saved in accordance with the relevant platform.
<br><br></li>
<li>
It is still possible to use a table work area implicitly (instead of using <span class="qtext">FROM wa</span> explicitly). This should be considered an
<a href="javascript:call_link('abapexport_import_tables_area.html')" class="blue">obsolete short form</a>, however.
<br><br></li>
<li>
Since each client represents a self-contained unit, the addition <span class="qtext">CLIENT</span> must not be used in application programs. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
Exports an internal table <span class="qtext">itab</span> with the name <span class="qtext">scarr_tab</span>
and the ID <span class="qtext400">SCARR</span> to the range <span class="qtext400">SC</span> of the
database table <span class="lnkgrey">DEMO_INDX_BLOB</span>. Here, the freely definable components are filled from the structure <span class="qtext">wa</span>.
</P>
<p class="qtextml1">
<span class="qtext">
SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM scarr <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(itab). <br>
 <br>DATA(wa) = VALUE demo_indx_blob( <br>&nbsp;&nbsp;timestamp = CONV #( sy-datum &amp;&amp; sy-uzeit ) <br>
&nbsp;&nbsp;userid&nbsp;&nbsp;&nbsp;&nbsp;= sy-uname ). <br> <br>EXPORT scarr_tab = itab <br>&nbsp;&nbsp;TO DATABASE demo_indx_blob(sc) <br>&nbsp;&nbsp;FROM wa <br>&nbsp;&nbsp;ID 'SCARR'. <br><br>
</span>
</p>
<A NAME="@@SHARED MEMORY@@EXPORT cluster@@"></A>
<A NAME="@@FROM@@EXPORT TO SHARED MEMORY@@"></A>
<A NAME="@@CLIENT@@EXPORT TO SHARED MEMORY@@"></A>
<A NAME="@@ID@@EXPORT TO SHARED MEMORY@@"></A>
<A NAME="@@SHARED BUFFER@@EXPORT cluster@@"></A>
<A NAME="@@FROM@@EXPORT TO SHARED BUFFER@@"></A>
<A NAME="@@CLIENT@@EXPORT TO SHARED BUFFER@@"></A>
<A NAME="@@ID@@EXPORT TO SHARED BUFFER@@"></A>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_5@5@"></A> <span class="bold">Alternative 5</span>
</span></p>
<P>
<span class="qtext">... SHARED MEMORY dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id</span> <br><br><br><!-- /A -->
</P>
<p><span class="h2">
<A NAME="!ABAP_ALTERNATIVE_6@6@"></A> <span class="bold">Alternative 6</span>
</span></p>
<P>
<span class="qtext">... SHARED BUFFER dbtab(ar) <i class=bn>[</i>FROM wa<i class=bn>]</i> <i class=bn>[</i>CLIENT cl<i class=bn>]</i> ID id</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If <span class="qtext">SHARED MEMORY</span> or <span class="qtext">SHARED BUFFER</span> is specified, the data cluster is stored in
<a href="javascript:call_link('abencrosstrans_app_buffer_glosry.html')" class="grey" title="Glossary Entry">cross-transaction application buffers</a> of the
<a href="javascript:call_link('abenshared_memory_glosry.html')" class="grey" title="Glossary Entry">shared memory</a> on of the current
<a href="javascript:call_link('abenapplication_server_glosry.html')" class="grey" title="Glossary Entry">AS Instance</a>. All programs of the same AS Instance have access to these buffers.
</P>
<P>
The two application buffers differ in respect to how the system behaves when reaching the memory limit. Both application buffers can be filled to an internal maximum limit, which can be adjusted using the
<a href="javascript:call_link('abenprofile_parameter_glosry.html')" class="grey" title="Glossary Entry">profile parameter</a> <span class="lnkgrey">rsdb/esm/buffersize_kb</span>
(<span class="qtext">SHARED MEMORY</span>) and <span class="lnkgrey">rsdb/obj/buffersize</span> (<span class="qtext">SHARED BUFFER</span>).
</P>
<ul class="disc">
<li>
Before the maximum limit of the <span class="qtext">SHARED MEMORY</span> buffer is reached, space must
be freed using the statement <a href="javascript:call_link('abapdelete_cluster.html')" class="blue"><span class="qtext">DELETE FROM SHARED MEMORY</span></a>; otherwise a handleable exception is raised.
<br><br></li>
<li>
The buffer of <span class="qtext">SHARED BUFFER</span> is cleared automatically by a displacement when it reaches the maximum limit. This procedure deletes the least used data objects from the buffer.
<br></li>
</ul>
<P>
When storing the data, the system creates a memory table in the application buffer. The row structure
of this table is defined using <span class="qtext">dbtab</span>. For <span class="qtext">dbtab</span>, a database table from ABAP Dictionary must be specified that has the same
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">structure</a> as an
<a href="javascript:call_link('abenexport_import_table_glosry.html')" class="grey" title="Glossary Entry">export/import table</a>.
The row area <span class="qtext">ar</span>, the work area <span class="qtext">wa</span>, the optional
client <span class="qtext">cl</span>, and the ID <span class="qtext">id</span> have the same significance
for the memory table as if saved in a database table, with the exception that the length of the ID in
<span class="qtext">id</span> is limited to 59 or 62 characters depending on whether the addition <span class="qtext">CLIENT</span> is specified or not. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
When storing data in the shared memory, reference is made to an export/import table, even if the data is not stored in the table itself, but in an appropriately structured memory table. <br>
<br></li>
<li>
The length of the key fields of the addressed export/import table between the columns
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">RELID</a> and
<a href="javascript:call_link('abenexport_data_cluster_indx.html')" class="blue">SRTF2</a> cannot exceed 59 or 62 characters, depending on whether a client column exists. <br>
<br></li>
<li>
When data is exported, any data clusters that have the same client <span class="qtext">cl</span>, row
area <span class="qtext">ar</span>, and ID <span class="qtext">id</span> are overwritten. If an existing
data cluster is to be overwritten by a bigger one when using <span class="qtext">SHARED MEMORY</span>, and this would exceed the memory limit, this only deletes the existing data cluster. <br>
<br></li>
<li>
Instead of saving data clusters in the shared memory, it is best to use
<a href="javascript:call_link('abenshared_objects_glosry.html')" class="grey" title="Glossary Entry">shared objects</a>. Shared
objects make it possible to store objects with complex dependencies, can be processed like normal objects, and enable multiple users to access the shared memory without any copying effort.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Exports an internal table <span class="qtext">itab</span> with the name <span class="qtext">scarr_tab</span>
and the ID <span class="qtext400">SCARR</span> to the cross-transaction application buffer. The row structure of the memory table is the same as the export/import table <span class="lnkgrey">DEMO_INDX_BLOB</span>.
</p>
<p class="qtextml1">
<span class="qtext">
SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM scarr <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE @DATA(itab). <br>
 <br>DATA(wa) = VALUE demo_indx_blob( <br>&nbsp;&nbsp;timestamp = CONV #( sy-datum &amp;&amp; sy-uzeit ) <br>
&nbsp;&nbsp;userid&nbsp;&nbsp;&nbsp;&nbsp;= sy-uname ). <br> <br>EXPORT scarr_tab = itab <br>&nbsp;&nbsp;TO SHARED BUFFER demo_indx_blob(sc) <br>&nbsp;&nbsp;FROM wa <br>&nbsp;&nbsp;ID 'SCARR'. <br><br>
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapexport_data_cluster_medium.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:42 GMT -->
</html>
