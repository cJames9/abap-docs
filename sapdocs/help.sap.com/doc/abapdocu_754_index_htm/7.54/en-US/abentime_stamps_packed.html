<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENTIME_STAMPS_PACKED -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abentime_stamps_packed.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:27 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="Time Stamps in Packed Numbers">
<meta name="keywords" content="ABAP, TIMESTAMP, Data Element, TIMESTAMPL, Data Element, Time Stamp, in Packed Numbers">
<title>
Time Stamps in Packed Numbers - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abentime_stamps_packed.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abentime_stamps_packed.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendate_time_processing.html')" class="blue">Date and Time Processing</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentime_stamps.html')" class="blue">Time Stamps</a>&nbsp;&rarr;&nbsp;
</span>
<p><span class="h1">
Time Stamps in Packed Numbers
</span></p>
<p>
In this format, <a href="javascript:call_link('abentime_stamp_glosry.html')" class="grey" title="Glossary Entry">time stamps</a>
are represented using packed numbers of the type <a href="javascript:call_link('abenbuiltin_types_numeric.html')" class="blue"><span class="qtext">p</span></a>.
</p>
<ul class="disc">
<li><A HREF="#@@ITOC@@ABENTIME_STAMPS_PACKED_1" class="blue">Representation of Time Stamps in Packed Numbers</A></li>
</ul>
<ul class="disc">
<li><A HREF="#@@ITOC@@ABENTIME_STAMPS_PACKED_2" class="blue">Accessing Time Stamps in Packed Numbers</A></li>
</ul>
<ul class="disc">
<li><A HREF="#@@ITOC@@ABENTIME_STAMPS_PACKED_3" class="blue">Notes on Handling Time Stamps in Packed Numbers</A></li>
</ul>
<ul class="disc">
<li><A HREF="#@@ITOC@@ABENTIME_STAMPS_PACKED_4" class="blue">Examples for Time Stamps in Packed Numbers</A></li>
</ul>
<A name="@@ITOC@@ABENTIME_STAMPS_PACKED_1"></A>
<p><span class="h2">
Representation of Time Stamps in Packed Numbers
</span></p>
<p>
There is a short form and a long form.
</p>
<ul class="disc">
<li>In the short form, a time stamp is represented precisely to the second using a packed number with
length 8, and the ABAP Dictionary type <span class="lnkgrey">TIMESTAMP</span>. The digits of the packed
number show the time stamp in the format <span class="qtext400">"yyyymmddhhmmss"</span>, where <span class="qtext400">
"yyyy"</span> is the year, <span class="qtext400">"mm"</span> is the month, <span class="qtext400">"dd"</span>
is the day, <span class="qtext400">"hh"</span> is the hour, <span class="qtext400">"mm"</span> are the minutes, and <span class="qtext400">"ss"</span> are the seconds.</li>
</ul>
<ul class="disc">
<li>In the long form, a time stamp is represented precisely to 100 ns using a packed number with length
11 and seven decimal places, and the ABAP Dictionary type <span class="lnkgrey">TIMESTAMPL</span> The
digits of the packed number show the time stamp in the format <span class="qtext400">"yyyymmddhhmmss.sssssss"</span>,
where, in addition to the short form, the seven decimal places <span class="qtext400">"sssssss"</span> are the fractions of a second. The maximum time resolution depends on the operating system of the
<a href="javascript:call_link('abenhost_computer_glosry.html')" class="grey" title="Glossary Entry">host computer</a> of the current
<a href="javascript:call_link('abenapplication_server_glosry.html')" class="grey" title="Glossary Entry">AS Instance</a> and can be less.</li>
</ul>
<p>
In its integer part, a valid time stamp must contain valid dates and times:
</p>
<ul class="disc">
<li>When specifying the date, only the values 01 to 9999 for the year, 01 to 12 for the month, and 01 to 31 for the day are valid.</li>
</ul>
<ul class="disc">
<li>When specifying the time, only the values 00 to 23 for the hours, and 00 to 59 for the minutes and seconds are valid.</li>
</ul>
<p>
A time valid in the Gregorian calendar must be represented. <a href="javascript:call_link('abenleap_second_glosry.html')" class="grey" title="Glossary Entry">Leap seconds</a> are not supported.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>An initial packed number with the value 0 does not contain a valid time stamp.</li>
</ul>
<ul class="disc">
<li>The method NORMALIZE of class <span class="lnkgrey">CL_ABAP_TSTMP</span> can be used to convert invalid values in time stamps to valid values.</li>
</ul>
<A name="@@ITOC@@ABENTIME_STAMPS_PACKED_2"></A>
<p><span class="h2">
Accessing Time Stamps in Packed Numbers
</span></p>
<p>
Only a few statements recognize that packed numbers of the types <span class="lnkgrey">TIMESTAMP</span>
and <span class="lnkgrey">TIMESTAMPL</span> are time stamps. All other statements interpret the content
of these data types numerically and, with the exception of direct comparisons, are not suitable for handling time stamps. The statements for handling time stamps in packed numbers are as follows:
</p>
<ul class="disc">
<li><a href="javascript:call_link('abapget_time-stamp.html')" class="blue"><span class="qtext">GET TIME STAMP</span></a> creates a current time stamp.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abapconvert_time-stamp.html')" class="blue"><span class="qtext">CONVERT TIME STAMP</span></a> converts a time stamp to a local date and a local time.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abapconvert_date_time-stamp.html')" class="blue"><span class="qtext">CONVERT INTO TIME STAMP</span></a> converts a local date and a local time to a time stamp.</li>
</ul>
<p>
Furthermore, time stamps in packed numbers are handled in specified ways in the following output formats:
</p>
<ul class="disc">
<li>Use of the options <a href="javascript:call_link('abapcompute_string_format_options.html')" class="blue"><span class="qtext">
TIMESTAMP</span></a> and <a href="javascript:call_link('abapcompute_string_format_options.html')" class="blue"><span class="qtext">TIMEZONE</span></a> for
<a href="javascript:call_link('abenstring_templates_expressions.html')" class="blue">embedded expressions</a> in <a href="javascript:call_link('abenstring_templates.html')" class="blue">string templates</a></li>
</ul>
<ul class="disc">
<li>Use of the addition <a href="javascript:call_link('abapwrite_to_options.html')" class="blue"><span class="qtext">TIME ZONE</span></a> of the statement <span class="qtext">WRITE <i class=bn>[</i>TO<i class=bn>]</i></span>.</li>
</ul>
<ul class="disc">
<li>The domains <span class="lnkgrey">XSDDATETIME_Z</span> and <span class="lnkgrey">XSDDATETIME_LONG_Z</span> support the serialization and deserialization of ABAP time stamps in
<a href="javascript:call_link('abenabap_xslt_asxml_schema.html')" class="blue">asXML</a> and <a href="javascript:call_link('abenabap_asjson_schema.html')" class="blue">asJSON</a>.</li>
</ul>
<p>
The system class <a href="javascript:call_link('abencl_abap_tstmp.html')" class="blue">CL_ABAP_TSTMP</a> provides methods for adding, subtracting, converting, and comparing time stamps in packed numbers.
</p>
<p><span class="h4">
Note
</span></p>
<p>
Special <a href="javascript:call_link('abenabap_cds_glosry.html')" class="grey" title="Glossary Entry">time stamp functions</a> can be used in  and the CDS DDL of the ABAP CDS for editing time stamps saved as packed numbers in database tables.
</p>
<A name="@@ITOC@@ABENTIME_STAMPS_PACKED_3"></A>
<p><span class="h2">
Notes on Handling Time Stamps in Packed Numbers
</span></p>
<p>
Time stamps in packed numbers are only interpreted as such when they are accessed by the statements,
methods, and functions listed above. When being assigned or converted, they behave like packed numbers
of the type <span class="qtext">p</span>, which means they are not suitable for direct calculations.
Comparisons produce a meaningful result only when two time stamps are compared with each other. In programs for which the program attribute
<a href="javascript:call_link('abenfixed_point_arithmetic_glosry.html')" class="grey" title="Glossary Entry">Fixed Point Arithmetic</a>
is not set, note the rules applying to the data type <span class="qtext">p</span>. In particular, direct
comparisons of time stamps in the long form with the short form produce a meaningful result only when
the program attribute <span class="italic">fixed point arithmetic</span> is set. Otherwise, the system class CL_ABAP_TSTMP must be used for comparisons as well.
</p>
<p>
A time stamp in its short form is the integer part of a time stamp in its long form. When assigning
time stamps in the long form to time stamps in the short form, unwanted rounding effects occur. For this reason, always use the method <span class="qtext">MOVE</span> of the system class
<a href="javascript:call_link('abencl_abap_tstmp.html')" class="blue">CL_ABAP_TSTMP</a>.
</p>
<p>
When time stamps in packed numbers are used in operand positions where they are not supposed to be used, no warnings are given by the syntax check or by the extended program check (not even in
<a href="javascript:call_link('abenlossless_assignment_glosry.html')" class="grey" title="Glossary Entry">lossless assignments</a>).
</p>
<A name="@@ITOC@@ABENTIME_STAMPS_PACKED_4"></A>
<p><span class="h2">
Examples for Time Stamps in Packed Numbers
</span></p>
<p><span class="h4">
Example
</span></p>
<p>
Directly compares time stamps in packed numbers with the same data type.
</p>
<p class="qtextml1">
<span class="qtext">
GET TIME STAMP FIELD DATA(ts2). <br>WAIT UP TO 1 SECONDS. <br>GET TIME STAMP FIELD DATA(ts1). <br> <br>ASSERT ts2 &lt; ts1.
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Converts a time stamp in a packed number to a date and a time field, and determines the summer time marker.
</p>
<p class="qtextml1">
<span class="qtext">
GET TIME STAMP FIELD DATA(ts). <br> <br>CONVERT TIME STAMP ts TIME ZONE sy-zonlo <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INTO DATE DATA(date) TIME DATA(time) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DAYLIGHT SAVING TIME DATA(dst). <br> <br>cl_demo_output=>display( |{ date }\n{ <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time }\n{ <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dst } | ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Formats a time stamp in a packed number in a string template in a type-friendly way.
</p>
<p class="qtextml1">
<span class="qtext">
GET TIME STAMP FIELD DATA(ts). <br> <br>cl_demo_output=>display( |{ ts TIMESTAMP = ISO } | ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Serializes a time stamp in a packed number by using a special domain.
</p>
<p class="qtextml1">
<span class="qtext">
DATA ts TYPE xsddatetime_z. <br>GET TIME STAMP FIELD ts. <br> <br>CALL TRANSFORMATION id SOURCE ts = ts <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RESULT XML DATA(xml). <br>cl_demo_output=>display_xml( xml ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Calculates the difference between two time stamps in packed numbers using the class CL_ABAP_TSTMP.
</p>
<p class="qtextml1">
<span class="qtext">
DATA: ts1 TYPE timestampl, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts2 TYPE timestampl. <br> <br>GET TIME STAMP FIELD ts2. <br>
WAIT UP TO 1 SECONDS. <br>GET TIME STAMP FIELD ts1. <br> <br>DATA(seconds) = cl_abap_tstmp=>subtract( <br>
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tstmp1 = ts1 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tstmp2 = ts2 ). <br> <br>cl_demo_output=>display( seconds ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Calculates directly using time stamps in packed numbers. If, for example, <span class="qtext">ts1</span>
has the value <span class="qtext400">20161004130733</span>, adding 3600 s in <span class="qtext">ts2</span>
produces the value <span class="qtext400">20161004140733</span>. Since the time stamps are interpreted
as numbers of type <span class="qtext">p</span> in the calculation, the result is <span class="qtext400">10000</span>, which would generally be unexpected.
</p>
<p class="qtextml1">
<span class="qtext">
GET TIME STAMP FIELD DATA(ts1). <br> <br>DATA(ts2) = cl_abap_tstmp=>add( tstmp = ts1 <br>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secs&nbsp;&nbsp;= 3600 ). <br> <br>cl_demo_output=>display( ts2 - ts1 ).
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Calculates incorrectly using time stamps in packed numbers. The assumption here is that time stamps
are interpreted as a number of seconds in calculations. This is not the case here. The result does not
meet expectations and is generally not a valid time stamp. For example, if <span class="qtext400">20161004131906</span> is calculated, this produces the invalid value <span class="qtext400">20161004315506</span>.
</p>
<p class="qtextml1">
<span class="qtext">
GET TIME STAMP FIELD DATA(ts). <br> <br>ts = ts + 86400 * 2 + 3600 * 3. <br> <br>cl_demo_output=>display( ts ).
</span>
</p>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abapget_time-stamp.html')" class="blue">GET TIME STAMP</a><br>
<a href="javascript:call_link('abapconvert_time-stamp.html')" class="blue">CONVERT TIME STAMP</a><br>
<a href="javascript:call_link('abapconvert_date_time-stamp.html')" class="blue">CONVERT INTO TIME STAMP</a><br>
<a href="javascript:call_link('abencl_abap_tstmp.html')" class="blue">System Class for Time Stamps in Packed Numbers</a><br>
<img src="exa.gif" alt="Example" title="Example">
<a href="javascript:call_link('abenconvert_time_stamp_abexa.html')" class="blue">Convert Time Stamps in Packed Numbers</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abentime_stamps_packed.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:52:27 GMT -->
</html>
