<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPEXEC -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapexec.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:47 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="EXEC SQL">
<title>
EXEC SQL - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapexec.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapexec.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abennative_sql.html')" class="blue">Native SQL</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abennativesql.html')" class="blue">EXEC SQL - Embedded Native SQL</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@EXEC SQL@@!ABAP_STATEMENT@@"></A>
<p><span class="h1">
EXEC SQL <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapexec_sql_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">EXEC SQL.</span> <br><span class="qtext">&nbsp;&nbsp;...</span> <br><span class="qtext">ENDEXEC.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
These statements define an area in an ABAP program in which one or more
<a href="javascript:call_link('abennative_sql_glosry.html')" class="grey" title="Glossary Entry">Native SQL</a> statements can
be specified statically. The area between <span class="qtext">EXEC</span> and <span class="qtext">ENDEXEC</span>
is not checked completely by the syntax check. The statements entered there are passed to the Native SQL interface and processed there as follows:
</P>
<ul class="disc">
<li>
SQL statements that are valid for the addressed database system can be included between <span class="qtext">EXEC</span> and <span class="qtext">ENDEXEC</span>, in particular the
<a href="javascript:call_link('abenddl_glosry.html')" class="grey" title="Glossary Entry">DDL</a> statements. These SQL statements
are passed from the Native SQL interface to the database system largely unchanged. The syntax rules
are specified by the database system, in particular the case sensitivity rules for database objects.
If the syntax allows a separator character between individual statements, multiple Native SQL statements can be included between <span class="qtext">EXEC</span> and <span class="qtext">ENDEXEC</span>. Generally, the semicolon
(<span class="qtext">;</span>) is used as the separator character. <br>
<br></li>
<li>
SAP-specific Native SQL language elements can also be included between <span class="qtext">EXEC</span>
and <span class="qtext">ENDEXEC</span>. These statements are not passed directly from the Native SQL interface to the database, but are converted appropriately. These SAP-specific language elements are:
<br></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapexec_literal.html')" class="blue">Literals</a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapexec_host.html')" class="blue">Host variables</a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapexec_into.html')" class="blue"><span class="qtext">INTO</span> clause</a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapexec_cursor.html')" class="blue">Statements for cursor processing</a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapexec_procedure.html')" class="blue">Database procedure calls</a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abapexec_connection.html')" class="blue">Statements for establishing database connections</a></li>
</ul>
<P>
All Native SQL statements bypass <a href="javascript:call_link('abensap_buffering_glosry.html')" class="grey" title="Glossary Entry">table buffering</a> and no
<a href="javascript:call_link('abenopen_sql_client_handling.html')" class="blue">implicit client handling</a> is performed. <br><br>
</P>
<P>
<span class="bold">System Fields</span>
</P>
<P>
The statement <span class="qtext">ENDEXEC</span> sets the system fields <span class="qtext">sy-subrc</span>
and <span class="qtext">sy-dbcnt</span>. When using the obsolete addition <a href="javascript:call_link('abapexec_implicit.html')" class="blue">
<span class="qtext">PERFORMING</span></a>, note that implicit cursor processing is carried out and the system fields are set for every read.
</P>
<table border>
<tr>
<td><span class="qtext"><span class="bold">sy-subrc</span></span></td>
<td><span class="bold">Meaning</span></td>
</tr>
<tr>
<td>0</td>
<td>The statements between <span class="qtext">EXEC</span> and <span class="qtext">ENDEXEC</span> were executed successfully.</td>
</tr>
<tr>
<td>4</td>
<td>The statements between <span class="qtext">EXEC</span> and <span class="qtext">ENDEXEC</span> were
not successful. After implicit cursor processing with <span class="qtext">PERFORMING</span>, <span class="qtext">sy-subrc</span> always contains the value 4.</td>
</tr>
</table><br>
<P>
The statement <span class="qtext">ENDEXEC</span> sets <span class="qtext">sy-dbcnt</span> to the number
of table rows processed in the last Native SQL statement. After implicit cursor processing with <span class="qtext">
PERFORMING</span>, <span class="qtext">sy-dbcnt</span> contains the total number of rows read. If an
overflow occurs because the number or rows is greater than 2,147,483,647, <span class="qtext">sy-dbcnt</span> is set to -1. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Programs with Native SQL statements are generally dependent on the database system used, so that they cannot be executed in all
<a href="javascript:call_link('abensap_nw_abap_glosry.html')" class="grey" title="Glossary Entry">AS ABAP</a> systems. This is especially true for the examples in this section, which were tested on a
<a href="javascript:call_link('abenhana_database_glosry.html')" class="grey" title="Glossary Entry">SAP HANA database</a> (unless otherwise stated). <br>
<br></li>
<li>
If insertions or modifications using the Native SQL statements <span class="qtext">INSERT</span> or
<span class="qtext">UPDATE</span> would produce duplicate rows with respect to the primary table key, no exception is raised. Instead, <span class="qtext">sy-subrc</span> is set to 4. However, if another operation, such as executing a
<a href="javascript:call_link('abenstored_procedure_glosry.html')" class="grey" title="Glossary Entry">Stored Procedure</a>, would produce a duplicate row, an exception would be raised. <br>
<br></li>
<li>
The <a href="javascript:call_link('abenclient_identifier_glosry.html')" class="grey" title="Glossary Entry">client ID</a> of
a database table or a view must be specified explicitly. Note that application programs should only use data from the current client. See also the associated
<a href="javascript:call_link('abenclient_dependent_scrty.html')" class="blue">security note</a> and the <a href="javascript:call_link('abenclient_handling_guidl.html')" class="lnkpurple" title="Guideline">programming guideline</a>.
<br></li>
</ul>
<ul class="disc">
<li>When the <a href="javascript:call_link('abencds_database_view_glosry.html')" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="javascript:call_link('abencds_client_handling.html')" class="blue">client-specific</a> CDS view is accessed using Native SQL and the client handling of the view is specified by the annotation <span
 class="qtext400">@ClientHandling.algorithm:#SESSION_VARIABLE</span>, the
<a href="javascript:call_link('abensession_variable_glosry.html')" class="grey" title="Glossary Entry">session variable</a> <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue">
<span class="qtext400">$session.client</span></a> is generally evaluated here. Only on
<a href="javascript:call_link('abenhana_database_glosry.html')" class="grey" title="Glossary Entry">SAP HANA databases</a>, is
an instance of this session variables created as a HANA session variable <a href="javascript:call_link('abenhana_session_variables.html')" class="blue">
<span class="qtext400">CDS_CLIENT</span></a>. Its current value is used here. On other platforms, there can be unexpected behavior or the program may crash. <br></li>
</ul>
<ul class="disc">
<li>
The obsolete addition <a href="javascript:call_link('abapexec_implicit.html')" class="blue"><span class="qtext">PERFORMING</span></a>
(not allowed in classes) executes implicit cursor processing and must no longer be used. The obsolete
statement <a href="javascript:call_link('abapexit_sql.html')" class="blue"><span class="qtext">EXIT FROM SQL</span></a> can be used to exit this type of processing. <br>
<br></li>
<li>
Native SQL statements used for transaction control
(<span class="qtext">COMMIT</span> and <span class="qtext">ROLLBACK</span>) are detected by the database interface and the actions required at the end of a transaction are performed. <br>
<br></li>
<li>
The static embedding of Native SQL statements between <span class="qtext">EXEC SQL</span> and <span class="qtext">ENDEXEC</span> is replaced by dynamic passes to objects from
<a href="javascript:call_link('abenadbc.html')" class="blue">ADBC</a> classes. New features in the Native SQL interface are now developed only in ADBC. Only ADBC should be used in new programs. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
The following example demonstrates how an embedded Native SQL statement can be replaced by
<a href="javascript:call_link('abenadbc.html')" class="blue">ADBC</a>. For single statements, the use of the
<a href="javascript:call_link('abeninstance_operator_glosry.html')" class="grey" title="Glossary Entry">instance operator</a>
<a href="javascript:call_link('abenconstructor_expression_new.html')" class="blue"><span class="qtext">NEW</span></a> removes the need for a helper variable of type <span class="lnkgrey">CL_SQL_STATEMENT</span> when creating objects.
</P>
<p class="qtextml1">
<span class="qtext">
"Embedded Native SQL <br>EXEC SQL. <br>&nbsp;&nbsp;INSERT INTO demo_update VALUES( :sy-mandt, 'X', 1, 2, 3, 4 ) <br>
ENDEXEC. <br> <br>"ADBC <br>NEW cl_sql_statement( )->execute_update( <br>&nbsp;&nbsp;|INSERT INTO demo_update VALUES( '{ sy-mandt }', 'X', 1, 2, 3, 4 )| ). <br><br>
</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<P>
<a href="javascript:call_link('abennative_sql_abexa.html')" class="blue">Static Native SQL</a> <br><br>
</P>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span>
</P>
<P>
<span class="lnkgrey">CX_SY_NATIVE_SQL_ERROR</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> Error when making a secondary connection. <br><span class="italic">Runtime error:</span> <span class="qtext">DBIF_DSQL2_CONNECTERR</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> Illegal interruption of a database selection. The cursor was closed. <br><span class="italic">Runtime error:</span> <span class="qtext">DBIF_DSQL2_INVALID_CURSOR</span>:
<br><br></li>
<li>
<span class="italic">Cause:</span> There is insufficient memory available for a Native SQL statement. <br><span class="italic">Runtime error:</span> <span class="qtext">DBIF_DSQL2_NO_MEMORY</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> Database object already exists in the database. An attempt was made
to create a database object (for example, table, view, index) on the database, but this object already exists. <br><span class="italic">Runtime error:</span> <span class="qtext">DBIF_DSQL2_OBJ_EXISTS</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The name of a table or view that does not exist on the database was used. <br><span class="italic">Runtime error:</span> <span class="qtext">DBIF_DSQL2_OBJ_UNKNOWN</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> An SQL error occurred while executing a native SQL command. <br><span class="italic">Runtime error:</span> <span class="qtext">DBIF_DSQL2_SQL_ERROR</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The maximum number of secondary connections was exceeded. <br><span class="italic">Runtime error:</span> <span class="qtext">EXSQL_CONNECTION_LIMIT</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The maximum number of database cursors was exceeded. <br><span class="italic">Runtime error:</span> <span class="qtext">EXSQL_DSQL_CURSOR_LIMIT</span> <br><br>
<br></li>
</ul>
<P>
<span class="bold">Non-Handleable Exceptions</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The specified cursor does not exist. A <span class="qtext">CLOSE</span>
or <span class="qtext">SELECT</span> command in Native SQL has a specified cursor, but this cursor is unknown to cursor administration. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_DSQL_CURSOR_NOT_FOUND</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The specified cursor is already open. An <span class="qtext">OPEN</span>
command in Native SQL has a specified cursor, which the cursor administration knows is already open. <br><span class="italic">Runtime error:</span> <span class="qtext">EXSQL_DSQL_DUPLICATE_CURSOR</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> There is insufficient roll memory available. When a Native SQL statement is processed, the internal memory is required to prepare the SQL Call. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_DSQL_NOROLL</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> An indicator variable has an incorrect type. It must be the type INT2. <br><span class="italic">Runtime error:</span> <span class="qtext">EXSQL_DSQL_WRONG_IVAR_TYPE</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The connection name has already been used for another connection.
A <span class="qtext">CONNECT</span> command in Native SQL has a specified connection name, which is already used for another connection. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_ILLEGAL_CONNECTION</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The connection <span class="qtext400">"DEFAULT"</span> was specified
for a <span class="qtext">DISCONNECT</span> command in Native SQL. This connection cannot be terminated with <span class="qtext">DISCONNECT</span>. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_ILLEGAL_DISCONNECTION</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> A Native SQL command contains too many variables. In this context,
variables means all ABAP fields preceded by a colon (":"). If the <span class="qtext">INTO</span> clause
has the form <span class="qtext">INTO :wa</span> for a work area <span class="qtext">wa</span>, then all the fields of <span class="qtext">wa</span> also count as variables. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_TOO_MANY_VARS</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> A <span class="qtext">SET CONNECTION</span> or <span class="qtext">DISCONNECT</span>
command in Native SQL has a specified connection that is unknown to the connection administration. <br><span class="italic">Runtime error:</span> <span class="qtext">EXSQL_UNKNOWN_CONNECTION</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> The target area specified in the <span class="qtext">INTO</span> clause is not structured despite the assertion <span class="qtext">INTO STRUCTURE</span>. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_UNSTRUCTURED_INTO</span>
<br><br></li>
<li>
<span class="italic">Cause:</span> A LOB variable has the wrong type. LOB variables must have the type
<span class="qtext">string</span>, <span class="qtext">xstring</span>, <span class="qtext">c</span>, <span class="qtext">x</span>, or <span class="qtext">n</span>. <br>
<span class="italic">Runtime error:</span> <span class="qtext">EXSQL_WRONG_TYPE_FOR_LOB</span> <br><br>
<br></li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abapexec_literal.html')" class="blue">EXEC SQL - Literals</a><br>
<a href="javascript:call_link('abapexec_host.html')" class="blue">EXEC SQL - Host Variables</a><br>
<a href="javascript:call_link('abapexec_into.html')" class="blue">EXEC SQL - INTO</a><br>
<a href="javascript:call_link('abapexec_cursor.html')" class="blue">EXEC SQL - OPEN, FETCH, CLOSE</a><br>
<a href="javascript:call_link('abapexec_procedure.html')" class="blue">EXEC SQL - EXECUTE PROCEDURE</a><br>
<a href="javascript:call_link('abapexec_connection.html')" class="blue">EXEC SQL - CONNECT</a><br>
<a href="javascript:call_link('abapendexec.html')" class="blue">ENDEXEC</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapexec.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:47 GMT -->
</html>
