<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPREAD_TABLE_FREE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapread_table_free.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:31 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="READ TABLE - free_key">
<title>
READ TABLE - free_key - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapread_table_free.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapread_table_free.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab.html')" class="blue">Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentable_processing_statements.html')" class="blue">Processing Statements for Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abapread_table.html')" class="blue">READ TABLE itab</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@WITH KEY@@READ TABLE itab@@"></A>
<A NAME="@@=@@WITH KEY@@"></A>
<p><span class="h1">
READ TABLE - free_key <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapread_table_itab_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
 <span class="qtext">... WITH KEY <i class=bn>{</i>
<a href="javascript:call_link('abenitab_components.html')" class="blue">comp1</a> = operand1
<a href="javascript:call_link('abenitab_components.html')" class="blue">comp2</a> = operand2 ... <i class=bn>[</i>BINARY SEARCH<i class=bn>]</i> <i class=bn>}</i></span> <br>
<span class="qtext">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>|</i> <i class=bn>{</i>
<a href="javascript:call_link('abenkeyname.html')" class="blue">keyname</a> COMPONENTS
<a href="javascript:call_link('abenitab_components.html')" class="blue">comp1</a> = operand1 <a href="javascript:call_link('abenitab_components.html')" class="blue">comp2</a> = operand2 ... <i class=bn>}</i> ...</span> <br><br>
</P>
<p><span class="h2">
Variants:
</span></p>
<P>
   <A HREF="#!ABAP_VARIANT_1@1@" class="blue"> 1. <span class="qtext">... WITH KEY comp1 = operand1 comp2 = operand2 ... <i class=bn>[</i>BINARY SEARCH<i class=bn>]</i> ...</span> </A> <br>
<br><A HREF="#!ABAP_VARIANT_2@2@" class="blue"> 2. <span class="qtext">... WITH KEY keyname COMPONENTS comp1 = operand1 comp2 = operand2 ... .</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Specifies a free search key. The free search key can be defined freely or linked to the specification of a
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a> in <a href="javascript:call_link('abenkeyname.html')" class="blue"><span class="qtext">keyname</span></a>.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
<a href="javascript:call_link('abentable_expression_glosry.html')" class="grey" title="Glossary Entry">Table
expressions</a> enable reads to be performed in operand positions too. The free key search is used whenever components are specified without an explicit
<a href="javascript:call_link('abentable_exp_itab_line.html')" class="blue">key specified</a>.
<br><br></li>
<li>
Outside of classes, the two obsolete variants of the addition <a href="javascript:call_link('abapread_table_obsolet.html')" class="blue"><span class="qtext">WITH KEY</span></a> are possible. <br><br>
<br></li>
</ul>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_1@1@"></A> <span class="bold">Variant 1</span>
</span></p>
<P>
<span class="qtext">... WITH KEY comp1 = operand1 comp2 = operand2 ... <i class=bn>[</i>BINARY SEARCH<i class=bn>]</i> ...</span> <br><br><br><!-- /A -->
</P>
<p><span class="h3">
Addition:
</span></p>
<P>
   <A HREF="#!ABAP_ONE_ADD@1@" class="blue"> <span class="qtext">... BINARY SEARCH</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Components <span class="qtext">comp1 comp2 ...</span> can be specified as search keys after the addition <span class="qtext">WITH KEY</span>, following the rules
<a href="javascript:call_link('abenitab_components.html')" class="blue">here</a>. An operand <span class="qtext">operand1 operand2 ...</span> is assigned to each of these search keys and must be
<a href="javascript:call_link('abencompatible_glosry.html')" class="grey" title="Glossary Entry">compatible</a> with the data type of the component (or convertible to this data type). No duplicate or overlapping key specifications can be made.
</P>
<P>
<span class="qtext">operand1 operand2 ...</span> are
<a href="javascript:call_link('abengeneral_expr_position_glosry.html')" class="grey" title="Glossary Entry">
general expression positions</a>. If necessary, the content of the operands is converted to the data type of the components before the comparison. If an
<a href="javascript:call_link('abenarithmetic_expression_glosry.html')" class="grey" title="Glossary Entry">arithmetic expression</a> is specified, the
<a href="javascript:call_link('abencalculation_type_glosry.html')" class="grey" title="Glossary Entry">calculation type</a> is
determined from its operands and the data type of the component and the result, if necessary, is converted to the data type of the component.
</P>
<P>
The first row of the internal table is searched for whose values in the specified components (or their subareas or attributes) match the values in the assigned operands <span class="qtext">operand1 operand2 ...</span>
</P>
<P>
The search runs as follows for the individual table categories, without <span class="qtext">BINARY SEARCH</span> being specified:
</P>
<ul class="disc">
<li>
<a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">Standard tables</a> are searched in a linear fashion. <br>
<br></li>
<li>
<a href="javascript:call_link('abensorted_table_glosry.html')" class="grey" title="Glossary Entry">Sorted tables</a> are searched in a binary fashion if the specified search key is an initial part of the
<a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table key</a> or includes this key; otherwise the search is linear. <br>
<br></li>
<li>
The hash algorithm is used for <a href="javascript:call_link('abenhashed_table_glosry.html')" class="grey" title="Glossary Entry">hashed tables</a> if the specified search key is an initial part of the
<a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table key</a> or includes this key; otherwise the search is linear. <br><br>
<br></li>
</ul>
<P>
If the <a href="javascript:call_link('abenitab_components.html')" class="blue"><span class="qtext">name</span></a> field of a
component <span class="qtext">comp</span> is initial, the first row that matches the search key is read. If all <span class="qtext">name</span> fields are initial, the first row of the internal table is read.
</P>
<P>
When a row is found, the system field <span class="qtext">sy-tabix</span> is set as specified by the table category:
</P>
<ul class="disc">
<li>
For index tables it is set to the number of rows found in the primary table index
<br><br></li>
<li>
For hashed tables it is set to the value 0.
<br></li>
</ul>
<P>
If no row is found, <span class="qtext">sy-tabix</span> is undefined (-1), except when the complete
table key or the addition <span class="qtext">BINARY SEARCH</span> is specified in a sorted table. In
this case, <span class="qtext">sy-tabix</span> is set to the row number of the entry in the primary
table index in front of which the row would be inserted using <span class="qtext">INSERT ... INDEX ...</span>, to preserve the sort. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
If the row type of the internal table is not known statically, the components of the search key can only be specified dynamically and not directly.
<br><br></li>
<li>
If the search key includes components that supply a
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a>
of the internal table without the key being specified in <span class="qtext">keyname</span>, a warning is raised by the syntax check.
<br><br></li>
<li>
If there are multiple hits (due to an incomplete search key or duplicate entries in the table), binary
searches (using the addition <span class="qtext">BINARY SEARCH</span> in standard tables; automatic
in sorted tables) also return the first hit in accordance with the order of the rows in the primary index. This is the row with the lowest row number.
<br><br></li>
<li>
If <span class="qtext">WITH KEY</span> is used, note that the values of incompatible operands <span class="qtext">operand1 operand2 ...</span> are converted to the data type of the columns before the comparison. This means that the
<a href="javascript:call_link('abenlogexp_rules.html')" class="blue">comparison rules</a> do not apply to incompatible data types.
If a <span class="qtext">WHERE</span> condition is used in the statements <a href="javascript:call_link('abaploop_at_itab_cond.html')" class="blue">
<span class="qtext">LOOP</span></a>, <a href="javascript:call_link('abapmodify_itab_multiple.html')" class="blue"><span class="qtext">MODIFY</span></a>,
and <a href="javascript:call_link('abapdelete_itab_lines.html')" class="blue"><span class="qtext">DELETE</span></a>, however, the comparison rules do apply, which can produce differing results. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
The internal table <span class="qtext">html_viewer_tab</span> contains references to HTML
<a href="javascript:call_link('abencontrol_glosry.html')" class="grey" title="Glossary Entry">controls</a>. The <span class="qtext">READ</span> statement reads the reference that points to a HTML control in a specific container control.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: container&nbsp;&nbsp; TYPE REF TO cl_gui_container, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html_viewer TYPE REF TO cl_gui_html_viewer. <br>
 <br>DATA html_viewer_tab LIKE TABLE OF html_viewer WITH EMPTY KEY. <br> <br>... <br> <br>CREATE OBJECT html_viewer EXPORTING parent = container. <br>
APPEND html_viewer TO html_viewer_tab. <br> <br>... <br> <br>READ TABLE html_viewer_tab <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH KEY table_line->parent = container <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO html_viewer. <br> <br>... <br><br>
</span>
</p>
<A NAME="@@BINARY SEARCH@@READ TABLE itab@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ONE_ADD@1@"></A> <span class="bold">Addition</span>
</span></p>
<P>
<span class="qtext">... BINARY SEARCH</span> <!-- /A -->  <br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">BINARY SEARCH</span> produces a binary search of the table, not linear.
In the case of large tables (from approximately 100 entries), this can significantly reduce runtime.
 The table must, however, be sorted in ascending order by the components specified in the search key.
The priority of the sort order must match exactly the order of the components in the search key. If this requirement is not met, the correct row is not usually found.
</P>
<ul class="disc">
<li>
The addition <span class="qtext">BINARY SEARCH</span> is recommended for standard tables where no appropriate
<a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted</a> <a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a> is defined.
<br><br></li>
<li>
The addition <span class="qtext">BINARY SEARCH</span> can only be specified for
<a href="javascript:call_link('abensorted_table_glosry.html')" class="grey" title="Glossary Entry">sorted tables</a> if the specified
search key is in the correct order and is an initial part of the table key, or includes the key. It has no special effect in this situation.
<br><br></li>
<li>
The addition <span class="qtext">BINARY SEARCH</span> cannot be specified for <a href="javascript:call_link('abenhashed_table_glosry.html')" class="grey" title="Glossary Entry">hashed tables</a>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The statement <span class="qtext">READ</span> always uses the addition <span class="qtext">BINARY SEARCH</span> to perform an index access; this index access can therefore only be used for tables with the appropriate type.
<a href="javascript:call_link('abenformal_parameter_glosry.html')" class="grey" title="Glossary Entry">Formal parameters</a> or a
<a href="javascript:call_link('abenfield_symbol_glosry.html')" class="grey" title="Glossary Entry">field symbol</a> must have at least the generic type <span class="qtext">INDEX TABLE</span>.
<br><br></li>
<li>
The addition <span class="qtext">BINARY SEARCH</span> is based on standard sorting according to the
size of the components. Text sorting with the addition <span class="qtext">AS TEXT</span> of the statement
<a href="javascript:call_link('abapsort_itab.html')" class="blue"><span class="qtext">SORT</span></a> can produce unexpected results, since the result for text-like components no longer depends on the binary representation, but on the
<a href="javascript:call_link('abenlocale_glosry.html')" class="grey" title="Glossary Entry">locale</a> of the current <a href="javascript:call_link('abentext_environment_glosry.html')" class="grey" title="Glossary Entry">text environment</a>.
<br><br></li>
<li>
The method READ_BINARY_SEARCH_CHECK of the class <span class="lnkgrey">CL_ABAP_ITAB_UTILITIES</span> can be used to verify whether the required sort exists for the addition <span class="qtext">BINARY SEARCH</span>.
<br><br></li>
<li>
When the addition <span class="qtext">BINARY SEARCH</span> is used, if there are multiple hits (due
to an incomplete search key or duplicate entries in the table), the first hit according to the order of the rows in the primary index is returned. This is the row with the lowest row number.
<br><br></li>
<li>
Instead of using the addition <span class="qtext">BINARY SEARCH</span>, it is best to work either with
<a href="javascript:call_link('abensorted_table_glosry.html')" class="grey" title="Glossary Entry">sorted tables</a> or with
<a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted</a> <a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table keys</a>. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Reads a table row with <span class="qtext">BINARY SEARCH</span> after the table has been sorted accordingly.
However, if possible <span class="qtext">sflight_tab</span> should be created as a sorted table, or given a sorted secondary key afterwards (see example below).
</p>
<p class="qtextml1">
<span class="qtext">
DATA sflight_tab TYPE STANDARD TABLE OF sflight WITH EMPTY KEY. <br> <br>... <br> <br>SORT sflight_tab BY carrid connid fldate. <br>
 <br>READ TABLE sflight_tab <br>&nbsp;&nbsp;&nbsp;&nbsp; WITH KEY carrid = '...' connid = '...' fldate = '...' <br>
&nbsp;&nbsp;&nbsp;&nbsp; BINARY SEARCH <br>&nbsp;&nbsp;&nbsp;&nbsp; ASSIGNING FIELD-SYMBOL(&lt;flight>). <br><br>
</span>
</p>
<A NAME="@@COMPONENTS@@READ TABLE itab WITH KEY@@"></A>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_2@2@"></A> <span class="bold">Variant 2</span>
</span></p>
<P>
<span class="qtext">... WITH KEY keyname COMPONENTS comp1 = operand1 comp2 = operand2 ...</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
<a href="javascript:call_link('abenkeyname.html')" class="blue"><span class="qtext">keyname</span></a> can be used to specify a
<a href="javascript:call_link('abentable_key_glosry.html')" class="grey" title="Glossary Entry">table key</a>. The same applies when specifying the components as in the variant without specifying keys.
</P>
<P>
  If a <a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a> is specified in <span class="qtext">keyname</span>, the behavior is as follows:
</P>
<ul class="disc">
<li>
If a <a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted key</a> is specified, the specified search key must be an initial part of the secondary table key or include it. The associated
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a>
is then searched in a binary fashion. If multiple entries are found when using a non-unique search key,
the first hit, that is the row with the lowest row number, is read in the secondary index. Additional search criteria can also be specified which are also evaluated. <br>
<br></li>
<li>
If a <a href="javascript:call_link('abenhash_key_glosry.html')" class="grey" title="Glossary Entry">hash key</a> is specified,
the specified search key must include the secondary table key and the hash algorithm is used. Additional search criteria can also be specified which are also evaluated.
<br></li>
</ul>
<P>
When a row is found, the system field <span class="qtext">sy-tabix</span> is set with respect to the specified secondary table key:
</P>
<ul class="disc">
<li>
For sorted secondary keys, it is set to the number of the found row in the corresponding secondary table index
<br><br></li>
<li>
For hash keys it is set to the value 0.
<br></li>
</ul>
<P>
If no row is found, <span class="qtext">sy-tabix</span> is undefined (-1), except when it is covered
in full by a sorted secondary key. In this case, <span class="qtext">sy-tabix</span> is set to the row
number of the entry in the secondary table index in front of which the row would be inserted using <span class="qtext">INSERT ... INDEX ...</span>, to preserve the sort.
</P>
<P>
If the <a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table
key</a> is specified in <span class="qtext">keyname</span> under the name <span class="qtext">primary_key</span>, the behavior is the same as in the variant without keys specified. <br><br>
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
When free keys are specified, secondary table keys differ from the <a href="javascript:call_link('abapread_table_key.html')" class="blue">
<span class="qtext">table_key</span></a> variant (for specifying the table key) by making it possible
to specify additional conditions in the search key. These conditions can reduce the length of the hit
 list. For secondary sorted keys, however, free search keys make it possible to specify an incomplete search key, which can make the hit list longer.
<br><br></li>
<li>
If a secondary table key is used, when the value of <span class="qtext">sy-tabix</span> is used subsequently
as an index specification in other processing statements for the internal table, it must be ensured that the same table key is used. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
Reads a table row using the sorted secondary table key <span class="qtext">dbkey</span>.  The read is
now performed automatically using a binary search (like the example above where <span class="qtext">BINARY SEARCH</span> is specified explicitly) and an explicit sort is not necessary.
</p>
<p class="qtextml1">
<span class="qtext">
DATA sflight_tab TYPE STANDARD TABLE OF sflight WITH EMPTY KEY <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH UNIQUE SORTED KEY dbkey <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMPONENTS carrid connid fldate. <br>
 <br>... <br> <br>READ TABLE sflight_tab WITH KEY dbkey <br>&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS carrid = '...' connid = '...' fldate = '...' <br>&nbsp;&nbsp;&nbsp;&nbsp; ASSIGNING FIELD-SYMBOL(&lt;flight>). <br><br>
</span>
</p>
<p><span class="h4">
Example
</span></p>
<P>
The <span class="lnkgrey">DEMO_SECONDARY_KEYS</span> program demonstrates the specification of a secondary table key compared to the completely free specification of a key and the resulting performance benefits.
</P>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapread_table_free.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:31 GMT -->
</html>
