<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENCDS_F1_DATE_FUNCTIONS -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abencds_f1_date_functions.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:44 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="ABAP CDS - Date Functions">
<title>
ABAP CDS - Date Functions - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abencds_f1_date_functions.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abencds_f1_date_functions.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_dictionary.html')" class="blue">ABAP - Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds.html')" class="blue">ABAP CDS in ABAP Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenddic_cds_entities.html')" class="blue">ABAP CDS - Data Definitions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_ddl_syntax.html')" class="blue">ABAP CDS - DDL for Data Definitions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_define_view.html')" class="blue">ABAP CDS - DEFINE VIEW</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_select_statement.html')" class="blue">ABAP CDS - SELECT</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_builtin_functions.html')" class="blue">ABAP CDS - SELECT, Built-In Functions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_special_functions.html')" class="blue">ABAP CDS - Special Functions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_date_time_functions.html')" class="blue">ABAP CDS - Date Functions and Time Functions</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@DATS_IS_VALID@@!ABAP_CDS_FUNCTION!@@"></A>
<A NAME="@@DATS_DAYS_BETWEEN@@!ABAP_CDS_FUNCTION!@@"></A>
<A NAME="@@DATS_ADD_DAYS@@!ABAP_CDS_FUNCTION!@@"></A>
<A NAME="@@DATS_ADD_MONTHS@@!ABAP_CDS_FUNCTION!@@"></A>
<p><span class="h1">
ABAP CDS - Date Functions
</span></p>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>

</P>
<p>
<span class="qtext400">... DATS_IS_VALID(date) <br>&nbsp;&nbsp;<i class=bn>|</i> DATS_DAYS_BETWEEN(date1,date2) <br>
&nbsp;&nbsp;<i class=bn>|</i> DATS_ADD_DAYS(date,days,on_error) <br>&nbsp;&nbsp;<i class=bn>|</i> DATS_ADD_MONTHS(date,months,on_error) ...</span> <br><br>
</p>
<p><span class="h2">
Variants:
</span></p>
<P>
   <A HREF="#!ABAP_VARIANT_1@1@" class="blue"> 1. <span class="qtext400">... DATS_IS_VALID(date)</span> </A> <br>
<br><A HREF="#!ABAP_VARIANT_2@2@" class="blue"> 2. <span class="qtext400">... DATS_DAYS_BETWEEN(date1,date2)</span> </A> <br>
<br><A HREF="#!ABAP_VARIANT_3@3@" class="blue"> 3. <span class="qtext400">... DATS_ADD_DAYS(date,days,on_error)</span> </A> <br>
<br><A HREF="#!ABAP_VARIANT_4@4@" class="blue"> 4. <span class="qtext400">... DATS_ADD_MONTHS(date,months,on_error)</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<p>
In a <a href="javascript:call_link('abencds_view_glosry.html')" class="grey" title="Glossary Entry">CDS view</a>, these functions execute operations with arguments of the built-in data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a>. The functions have positional parameters to which actual parameters need to be assigned when called. There are currently no optional parameters. Suitable fields of a
<a href="javascript:call_link('abencds_f1_data_source.html')" class="blue">data source</a>,
<a href="javascript:call_link('abencds_f1_literal.html')" class="blue">literals</a>,
<a href="javascript:call_link('abencds_f1_parameter.html')" class="blue">parameters</a>,
<a href="javascript:call_link('abencds_f1_path_expression.html')" class="blue">path expressions</a>, built-in functions, or expressions
can all be specified as actual parameters. Only literals can be passed to the parameter <span class="qtext400">on_error</span>.  If an actual parameter contains the
<a href="javascript:call_link('abennull_value_glosry.html')" class="grey" title="Glossary Entry">null value</a>, every function except <span class="qtext400">DATS_IS_VALID</span> returns a null value.
</p>
<p><span class="h4">
Note
</span></p>
<p>
The session variable <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue"><span class="qtext400">$session.system_date</span></a>
is used in a CDS view to provide direct access to the current system date. In addition, special annotation
<a href="javascript:call_link('abencds_f1_parameter_annotations.html')" class="blue"><span class="qtext400">@Environment.systemField</span></a> makes it possible to pass the value of the
<a href="javascript:call_link('abensystem_field_glosry.html')" class="grey" title="Glossary Entry">ABAP system field</a> <span class="qtext">sy-datum</span> to
<a href="javascript:call_link('abencds_f1_parameter_list.html')" class="blue">input parameters</a>. <br><br>
</p>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_1@1@"></A> <span class="bold">Variant 1</span>
</span></p>
<P>
<span class="qtext400">... DATS_IS_VALID(date)</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
The function <span class="qtext400">DATS_IS_VALID</span> determines whether <span class="qtext400">date</span>
(if specified) contains a valid date in the format <span class="qtext400">YYYYMMDD</span>. The actual parameter must have the built-in data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a>. The result has the data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT4</a>. A valid date produces the value 1 and all other input values (including the null value) produce the value 0.
</p>
<p><span class="h4">
Note
</span></p>
<p>
The value "00010101" is a valid date but the value "00000000" is not. <br><br>
</p>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_2@2@"></A> <span class="bold">Variant 2</span>
</span></p>
<P>
<span class="qtext400">... DATS_DAYS_BETWEEN(date1,date2)</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
The function <span class="qtext400">DATS_DAYS_BETWEEN</span> calculates the difference between two specified
dates, <span class="qtext400">date1</span> and <span class="qtext400">date2</span>, in days. The actual parameters must have the built-in data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a> and should contain a valid date in the format
<span class="qtext400">YYYYMMDD</span>. Any invalid dates specified are initialized or set to the value "00010101" before the calculation. The result has the data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT4</a>. If <span class="qtext">date2</span> is greater than <span class="qtext">date1</span>, the result is positive. In the reverse case, it is negative.
</p>
<p><span class="h4">
Note
</span></p>
<p>
Before the difference is calculated, the specified dates are converted to integers, like in ABAP, and the corresponding <a href="javascript:call_link('abenconversion_type_d.html')" class="blue">rules</a> apply. <br><br>
</p>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_3@3@"></A> <span class="bold">Variant 3</span>
</span></p>
<P>
<span class="qtext400">... DATS_ADD_DAYS(date,days,on_error)</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
The function <span class="qtext400">DATS_ADD_DAYS</span> adds <span class="qtext400">days</span> days to a specified date <span class="qtext400">date</span>.
</p>
<ul class="disc">
<li>The actual parameter <span class="qtext400">date</span> must have the built-in data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a> and should contain a valid date in the format
<span class="qtext400">YYYYMMDD</span>. Any invalid date specified is initialized or set to the value "00010101" before the calculation.</li>
</ul>
<ul class="disc">
<li>The actual parameter <span class="qtext400">days</span> must have the built-in data type <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT4</a>.</li>
</ul>
<ul class="disc">
<li>The actual parameter <span class="qtext400">on_error</span> must have the built-in data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CHAR</a> with the length 10 and must have one of the following values:</li>
</ul>
<ul class="circlem2">
<li>"FAIL" (an error raises an exception)</li>
</ul>
<ul class="circlem2">
<li>"NULL" (an error returns the null value)</li>
</ul>
<ul class="circlem2">
<li>"INITIAL" (an error returns the initial value)</li>
</ul>
<ul class="circlem2">
<li>"UNCHANGED" (an error returns the unmodified value of <span class="qtext400">date</span>)</li>
</ul>
<p>
The values are case-sensitive. Any incorrectly specified values raise an exception.
</p>
<p>
The result has the data type <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a>. If <span class="qtext400">days</span>
is positive, the number of days is added to <span class="qtext">date</span>. In other cases, the number
of days is subtracted. If the calculation produces an invalid date, the error is handled as specified in <span class="qtext400">on_error</span>.
</p>
<p><span class="h4">
Note
</span></p>
<p>
For the calculation, the specified date is <a href="javascript:call_link('abenconversion_type_d.html')" class="blue">converted</a> to an integer, like in ABAP, and the result is
<a href="javascript:call_link('abenconversion_type_ibs.html')" class="blue">converted</a> to a date again while applying the corresponding rules. <br><br>
</p>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_4@4@"></A> <span class="bold">Variant 4</span>
</span></p>
<P>
<span class="qtext400">... DATS_ADD_MONTHS(date,months,on_error)</span> <br><br><br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<p>
The function <span class="qtext400">DATS_ADD_MONTHS</span> adds <span class="qtext400">months</span> months to a specified date <span class="qtext400">date</span>.
</p>
<ul class="disc">
<li>The actual parameter <span class="qtext400">date</span> must have the built-in data type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a> and should contain a valid date in the format
<span class="qtext400">YYYYMMDD</span>. Any invalid date specified is initialized or set to the value "00010101" before the calculation.</li>
</ul>
<ul class="disc">
<li>The actual parameter <span class="qtext400">months</span> must have the built-in data type <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">INT4</a>.</li>
</ul>
<ul class="disc">
<li>The same applies to the actual parameter <span class="qtext400">on_error</span> as to <span class="qtext400">DATS_ADD_DAYS</span>.</li>
</ul>
<p>
The result has the data type <a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">DATS</a>. If <span class="qtext400">months</span>
is positive, the number of months is added to <span class="qtext">date</span>. In other cases, the number of months is subtracted.
</p>
<p>
An attempt is made to create a date with the same day in an earlier or later month. If the maximum day
possible in a month is exceeded, the greatest possible day is used. If the calculation produces an otherwise invalid date, the error is handled as specified in <span class="qtext400">on_error</span>.
</p>
<p><span class="h4">
Example
</span></p>
<p>
The following CDS view applies date functions in the <span class="qtext400">SELECT</span> list to columns
of the database table <span class="lnkgrey">DEMO_EXPRESSIONS</span>. The program <span class="lnkgrey">DEMO_CDS_DATE_FUNCTIONS</span>
uses <span class="qtext">SELECT</span> to access the view. The columns DATS1 and DATS2 in the database
table and the actual parameters for the input parameters of the view can be given any values. In the
case of <span class="qtext400">DATS_ADD_DAYS</span> and <span class="qtext400">DATS_ADD_MONTHS</span>. invalid values or values that produce invalid results are handled as specified in the view.
</p>
<dl><dd>
<span class="qtext400">@AbapCatalog.sqlViewName: 'demo_cds_datfnc' <br>@AccessControl.authorizationCheck: #NOT_REQUIRED <br>
define view demo_cds_date_functions <br> with parameters <br> p_days :abap.int4, <br> p_months :abap.int4 <br>
 as select from <br> demo_expressions <br> { <br> id, <br> dats1 as date1, <br> dats_is_valid(dats1) as valid1, <br>
 dats2 as date2, <br> dats_is_valid(dats2) as valid2, <br> dats_days_between(dats1,dats2) as difference, <br>
 dats_add_days(dats1,:p_days,'INITIAL') as day1, <br> dats_add_months(dats2,:p_months,'FAIL') as day2 <br> }&nbsp;&nbsp;&nbsp;&nbsp;</span>
</dd></dl>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abencds_f1_date_functions.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:44 GMT -->
</html>
