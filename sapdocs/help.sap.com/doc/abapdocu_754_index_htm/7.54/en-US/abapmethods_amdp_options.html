<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPMETHODS_AMDP_OPTIONS -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapmethods_amdp_options.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:33 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="[CLASS-]METHODS - AMDP OPTIONS">
<title>
[CLASS-]METHODS - AMDP OPTIONS - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abapmethods_amdp_options.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abapmethods_amdp_options.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_language_external_data.html')" class="blue">Processing External Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_sql.html')" class="blue">ABAP Database Access</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenamdp.html')" class="blue">AMDP - ABAP Managed Database Procedures</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenamdp_methods.html')" class="blue">AMDP - Methods</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@AMDP OPTIONS@@CLASS-METHODS@@"></A>
<A NAME="@@AMDP OPTIONS@@METHODS@@"></A>
<p><span class="h1">
[CLASS-]METHODS - AMDP OPTIONS <br><br>
</span></p>
<P>
<a href="javascript:call_link('abapmethods_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext">[CLASS-]METHODS meth ... AMDP OPTIONS <i class=bn>[</i>READ-ONLY<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;<i class=bn>[</i>CDS SESSION CLIENT clnt<i class=bn>|</i>CURRENT<i class=bn>]</i> ...</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... READ-ONLY</span> </A> <br><br>
<A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... CDS SESSION CLIENT clnt<i class=bn>|</i>CURRENT</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">AMDP OPTIONS</span> for <a href="javascript:call_link('abapmethods.html')" class="blue"><span class="qtext">
METHODS</span></a> and <a href="javascript:call_link('abapclass-methods.html')" class="blue"><span class="qtext">CLASS-METHODS</span></a> statements can be used to declare attributes of
<a href="javascript:call_link('abenamdp_methods.html')" class="blue">AMDP methods</a> of global classes or interfaces. After <span class="qtext">AMDP OPTIONS</span>, at least one attribute must be specified.
</P>
<P>
If the addition <span class="qtext">AMDP OPTIONS</span> is used in the declaration of a method, but
the method is implemented as a normal ABAP method without the addition <a href="javascript:call_link('abapmethod_by_db_proc.html')" class="blue">
<span class="qtext">BY DATABASE PROCEDURE|FUNCTION</span></a>, the attributes specified by<span class="qtext">AMDP
OPTIONS</span> are ignored. However, the following restrictions for AMDP methods apply to the method declaration:
</P>
<ul class="disc">
<li>
If there is no <span class="qtext">RETURNING</span> parameter, the restrictions for <a href="javascript:call_link('abenamdp_procedure_methods.html')" class="blue">AMDP procedure implementations</a> apply.
<br><br></li>
<li>
If there is a <span class="qtext">RETURNING</span> parameter, the restrictions described for <a href="javascript:call_link('abenamdp_function_methods.html')" class="blue">AMDP function implementations</a> also apply.
<br></li>
</ul>
<P>
A prerequisite for using this addition is that the global class or the interface must contain a
<a href="javascript:call_link('abentag_interface_glosry.html')" class="grey" title="Glossary Entry">tag interface</a>
<a href="javascript:call_link('abenamdp_classes.html')" class="blue">IF_AMDP_MARKER_...</a> for
<a href="javascript:call_link('abenamdp_class_glosry.html')" class="grey" title="Glossary Entry">AMDP classes</a>. <span class="qtext">AMDP OPTIONS</span> cannot be used in local classes, for the
<a href="javascript:call_link('abenconstructor_glosry.html')" class="grey" title="Glossary Entry">constructors</a> <a href="javascript:call_link('abapmethods_constructor.html')" class="blue">
<span class="qtext">constructor</span></a> or <a href="javascript:call_link('abapclass-methods_constructor.html')" class="blue"><span class="qtext">class_constructor</span></a>, for
<a href="javascript:call_link('abenevent_handler_glosry.html')" class="grey" title="Glossary Entry">event handlers</a> declared with <a href="javascript:call_link('abapmethods_event_handler.html')" class="blue"><span class="qtext">FOR EVENT</span></a>, for
<a href="javascript:call_link('abenredefinition_glosry.html')" class="grey" title="Glossary Entry">redefinitions</a>
declared with <a href="javascript:call_link('abapmethods_redefinition.html')" class="blue"><span class="qtext">REDEFINITION</span></a>, or for
<a href="javascript:call_link('abenamdp_function_method_glosry.html')" class="grey" title="Glossary Entry">AMDP function implementations</a> for
<a href="javascript:call_link('abencds_table_function_glosry.html')" class="grey" title="Glossary Entry">CDS table functions</a>
declared with <a href="javascript:call_link('abapclass-methods_for_tabfunc.html')" class="blue"><span class="qtext">FOR TABLE FUNCTION</span></a>. <br><br>
</P>
<A NAME="@@READ-ONLY@@METHODS@@"></A>
<A NAME="@@READ-ONLY@@CLASS-METHODS@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... READ-ONLY</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If the option <span class="qtext">READ-ONLY</span> is specified, only reads of database tables are allowed in the
<a href="javascript:call_link('abapmethod_by_db_proc.html')" class="blue">implementation</a> of the
<a href="javascript:call_link('abendatabase_procedure_glosry.html')" class="grey" title="Glossary Entry">database procedure</a> or
<a href="javascript:call_link('abendatabase_function_glosry.html')" class="grey" title="Glossary Entry">database function</a>.
Only database procedures or database functions of other AMDP methods that are also marked as <span class="qtext">READ-ONLY</span> can be called. This is checked by the syntax check or at runtime.
</P>
<P>
This attribute can also be specified using the addition <span class="qtext">OPTIONS</span> in the implementation
of an AMDP method with <a href="javascript:call_link('abapmethod_by_db_proc.html')" class="blue"><span class="qtext">METHOD meth
BY DATABASE PROCEDURE|FUNCTION</span></a>. It applies when specified either in the declaration or in the implementation of the method, or both.
</P>
<P>
The option <span class="qtext">READ-ONLY</span> must be specified at least once in the implementation of an
<a href="javascript:call_link('abenamdp_function_glosry.html')" class="grey" title="Glossary Entry">AMDP</a> function or an
<a href="javascript:call_link('abenamdp_hdb_l_internal.html')" class="blue">L procedure</a>. If the addition <span class="qtext">AMDP
OPTIONS</span> is used in the declaration of a method with a <span class="qtext">RETURNING</span> parameter, the option <span class="qtext">READ-ONLY</span> must already be specified in the declaration. <br><br>
</P>
<A NAME="@@CDS SESSION CLIENT@@METHODS@@"></A>
<A NAME="@@CURRENT@@METHODS@@"></A>
<A NAME="@@CDS SESSION CLIENT@@CLASS-METHODS@@"></A>
<A NAME="@@CURRENT@@CLASS-METHODS@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... CDS SESSION CLIENT clnt<i class=bn>|</i>CURRENT</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If the option <span class="qtext">CDS SESSION CLIENT</span> is used, the
<a href="javascript:call_link('abensession_variable_glosry.html')" class="grey" title="Glossary Entry">session variable</a> of the database that can be addressed in the CDS DDL of the
<a href="javascript:call_link('abencds_ddl_glosry.html')" class="grey" title="Glossary Entry">ABAP CDS</a> under the name <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue">
<span class="qtext400">$session.client</span></a> is supplied with a value when the AMDP method is called from ABAP. In the
<a href="javascript:call_link('abenhana_database_glosry.html')" class="grey" title="Glossary Entry">SAP HANA database</a> this
is the ABAP-specific session variable <a href="javascript:call_link('abenhana_session_variables.html')" class="blue"><span class="qtext400">CDS_CLIENT</span></a>. The value is determined as follows:
</P>
<ul class="disc">
<li>
The name of an input parameter of the current method can be specified for <span class="qtext">clnt</span>. Its type must be compatible with the built in type
<a href="javascript:call_link('abenddic_builtin_types.html')" class="blue">CLNT</a> in ABAP Dictionary. The session variable
is set to the value passed to this parameter during the call, or to the value of the replacement parameter declared with <a href="javascript:call_link('abapmethods_parameters.html')" class="blue"><span class="qtext">DEFAULT</span></a>.
<br><br></li>
<li>
If <span class="qtext">CURRENT</span> is specified, the session variable is set to its default value,
that is, to the nominal value of the ABAP system field <a href="javascript:call_link('abensystem_fields.html')" class="blue"><span class="qtext">sy-mandt</span></a> or the
<a href="javascript:call_link('abenclient_glosry.html')" class="grey" title="Glossary Entry">client</a> of the current
<a href="javascript:call_link('abenlogon_glosry.html')" class="grey" title="Glossary Entry">logon</a>. In this case there can be no input parameters with the name <span class="qtext">current</span>.
<br></li>
</ul>
<P>
The session variable is only set when the AMDP method is called from ABAP. If the associated database
procedure or function is called from another AMDP method or from a database procedure or function that is not managed by AMDP, the session variable is not affected.
</P>
<P>
If the database procedure or function of an AMDP method that is declared with the option <span class="qtext">CDS
SESSION CLIENT</span> is called from an AMDP procedure or function implementation or during a <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a> statement, the following rules apply:
</P>
<ul class="disc">
<li>
AMDP method as call target
<br></li>
</ul>
<ul class="circlem2">
<li>The implementation of an AMDP method that is declared with the addition <span class="qtext">CURRENT</span>
can only be called in implementations of methods with the addition <span class="qtext">CURRENT</span>,
and not during the execution of a <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a>
statement with the addition <a href="javascript:call_link('abapselect_client.html')" class="blue"><span class="qtext">USING CLIENT</span></a>.</li>
</ul>
<ul class="circlem2">
<li>The implementation of an AMDP method declared with <span class="qtext">clnt</span> can only be called
in implementations of methods where the addition <span class="qtext">CURRENT</span> or <span class="qtext">clnt</span>
is specified, and during the execution of a <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a>
statement with the addition <a href="javascript:call_link('abapselect_client.html')" class="blue"><span class="qtext">USING CLIENT</span></a>.</li>
</ul>
<ul class="circlem2">
<li>The implementation of an AMDP method that is declared without any additions can be called from any
implementations and during the execution of any <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a> statements.</li>
</ul>
<ul class="disc">
<li>
AMDP method as caller
<br></li>
</ul>
<ul class="circlem2">
<li>The implementation of an AMDP method that is declared with the addition <span class="qtext">CURRENT</span> can call any implementations.</li>
</ul>
<ul class="circlem2">
<li>The implementation of an AMDP method declared with <span class="qtext">clnt</span> cannot call any implementations of methods where <span class="qtext">CURRENT</span> is specified.</li>
</ul>
<ul class="circlem2">
<li>The implementation of an AMDP method that is declared without any additions can only call other implementations without additions.</li>
</ul>
<P>
A call can occur during a <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a> statement if it directly or indirectly accesses a
<a href="javascript:call_link('abencds_table_function_glosry.html')" class="grey" title="Glossary Entry">CDS table function</a>, because this is implemented as an
<a href="javascript:call_link('abenamdp_table_function_glosry.html')" class="grey" title="Glossary Entry">AMDP table function</a>.
</P>
<P>
If an AMDP method accesses the <a href="javascript:call_link('abencds_database_view_glosry.html')" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="javascript:call_link('abencds_view_glosry.html')" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="javascript:call_link('abencds_client_handling.html')" class="blue">client handling</a> is defined by the annotation
<a href="javascript:call_link('abencds_client_handling.html')" class="blue"><span class="qtext400">@ClientHandling.algorithm:
#SESSION_VARIABLE</span></a>, it must be declared with the option <span class="qtext">CDS SESSION CLIENT</span>. If not, a syntax error occurs.
</P>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
The option <span class="qtext">CDS SESSION CLIENT</span> is mainly required if an AMDP method accesses the
<a href="javascript:call_link('abencds_database_view_glosry.html')" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="javascript:call_link('abencds_view_glosry.html')" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="javascript:call_link('abencds_client_handling.html')" class="blue">client handling</a> is determined by the annotation
<a href="javascript:call_link('abencds_client_handling.html')" class="blue"><span class="qtext400">@ClientHandling.algorithm:
#SESSION_VARIABLE</span></a>. In database views like this, the session variable associated with <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue">
<span class="qtext400">$session.client</span></a> is usually evaluated in comparisons with a client
column. If the option <span class="qtext">CDS SESSION CLIENT</span> is not used when calling AMDP methods
(or the addition <a href="javascript:call_link('abapselect_client.html')" class="blue"><span class="qtext">USING CLIENT</span></a>
in ABAP SQL), the default value for the session variable would be the nominal value of the ABAP system
field <a href="javascript:call_link('abensystem_fields.html')" class="blue"><span class="qtext">sy-mandt</span></a>. If the session variable is set when an AMDP method is called, the
<a href="javascript:call_link('abencds_database_view_glosry.html')" class="grey" title="Glossary Entry">CDS database views</a> that are used select the data of the required
<a href="javascript:call_link('abenclient_glosry.html')" class="grey" title="Glossary Entry">client</a>. If, in the implementation
of the AMDP method, the client ID that is selected when the CDS database view is accessed does not match the value of the session variable, the results set is empty.
<br><br></li>
<li>
If <span class="qtext">CDS SESSION CLIENT</span> is used for an AMDP method, the AMDP framework sets
the session variable belonging to <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue"><span class="qtext400">$session.client</span></a>
exactly once when this method is called from ABAP. The following recommendations apply:
<br></li>
</ul>
<ul class="circlem2">
<li>The value of the input parameter marked with <span class="qtext">clnt</span> should be treated as
a constant and should not be changed when executing the implementation, so that it always matches the
value of the session variable. When calling other implementations of AMDP methods that are declared
with <span class="qtext">CDS SESSION CLIENT</span>, only the client ID that matches the value of the session variable should be passed.</li>
</ul>
<ul class="circlem2">
<li>The value of the session variable should not be overwritten using database methods.</li>
</ul>
<dl>

<dd>
Whether the input parameter is used explicitly in self-programmed conditions or implicitly in CDS database views, this ensures that the data of the same
<a href="javascript:call_link('abenclient_glosry.html')" class="grey" title="Glossary Entry">client</a> is accessed.
</dd>
</dl>
<ul class="disc">
<li>
The rules governing how AMDP methods declared with the option <span class="qtext">CDS SESSION CLIENT</span> call each other support the previous point:
<br></li>
</ul>
<ul class="circlem2">
<li>In a call chain that leads to a method with the addition <span class="qtext">CURRENT</span>, the
session variable that belongs to <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue"><span class="qtext400">$session.client</span></a>
can only have the nominal value of the ABAP system field <a href="javascript:call_link('abensystem_fields.html')" class="blue"><span class="qtext">sy-mandt</span></a>.</li>
</ul>
<ul class="circlem2">
<li>In a call chain that leads to a method that specifies <span class="qtext">clnt</span>, the session
variable that belongs to <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue"><span class="qtext400">$session.client</span></a> can have a value defined explicitly by <span class="qtext">clnt</span>.</li>
</ul>
<ul class="disc">
<li>In AMDP methods that do not access a <a href="javascript:call_link('abencds_database_view_glosry.html')" class="grey" title="Glossary Entry">CDS database view</a> of a
<a href="javascript:call_link('abencds_view_glosry.html')" class="grey" title="Glossary Entry">CDS view</a> whose
<a href="javascript:call_link('abencds_client_handling.html')" class="blue">client handling</a> is defined by the annotation
<a href="javascript:call_link('abencds_client_handling.html')" class="blue"><span class="qtext400">@ClientHandling.algorithm:
#SESSION_VARIABLE</span></a>, the option <span class="qtext">CDS SESSION CLIENT</span> can be used to
set <a href="javascript:call_link('abencds_f1_session_variable.html')" class="blue"><span class="qtext400">$session.client</span></a>
to a particular value, but this is generally not necessary. Instead of accessing the session variables for the client ID in the implementation, these should be passed to an input parameter and this should then be used (see the
<a href="javascript:call_link('abenamdp_abexa.html')" class="blue">executable example</a>).</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The following implementation of an AMDP method accesses the
<a href="javascript:call_link('abencds_database_view_glosry.html')" class="grey" title="Glossary Entry">CDS database view</a> <span class="lnkgrey">DEMO_CDS_PRJCT0A</span> of a client-specific CDS view:
</p>
<dl><dd>
<span class="qtext">METHOD get_spfli_view BY DATABASE PROCEDURE FOR HDB <br>&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LANGUAGE SQLSCRIPT <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;USING demo_cds_prjct0a. <br>
&nbsp;&nbsp;connections&nbsp;&nbsp;= select * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from DEMO_CDS_PRJCT0A; <br>ENDMETHOD.</span>
</dd></dl>
<p>
The <a href="javascript:call_link('abenddl_source_code_glosry.html')" class="grey" title="Glossary Entry">DDL source code</a> used to define the actual
<a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entity</a> DEMO_CDS_SPFLI_CLIENT_0A is as follows:
</p>
<dl><dd>
<span class="qtext400">@AbapCatalog.sqlViewName: 'DEMO_CDS_PRJCT0A' <br>@AccessControl.authorizationCheck: #NOT_ALLOWED <br>
@ClientHandling.type: #CLIENT_DEPENDENT <br>@ClientHandling.algorithm: #SESSION_VARIABLE <br>define view demo_cds_spfli_client_0a <br>
&nbsp;&nbsp;as select from <br>&nbsp;&nbsp;&nbsp;&nbsp;spfli <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key spfli.carrid, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key spfli.connid, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spfli.cityfrom, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spfli.cityto <br>&nbsp;&nbsp;&nbsp;&nbsp;}</span>
</dd></dl>
<p>
The client handling is defined using the annotation <span class="qtext400">@ClientHandling.algorithm:
#SESSION_VARIABLE</span>. For this reason, the version of the view in the database contains the following <span class="qtext400">WHERE</span> condition (in this case for the SAP HANA database):
</p>
<dl><dd>
<span class="qtext400">WHERE ( "SPFLI"."MANDT" = SESSION_CONTEXT( 'CDS_CLIENT') )</span>
</dd></dl>
<p>
This <span class="qtext400">WHERE</span> condition applies each time the view is accessed. If the <span class="qtext400">
SELECT</span> statement in the above AMDP method had its own <span class="qtext400">WHERE</span> condition
for the client column <span class="qtext400">MANDT</span> and this selected a client other than the
session variable <span class="qtext400">CDS_CLIENT</span>, the results set would be empty. For this
reason, accessing such a CDS database view in an AMDP method causes the syntax check to issue a warning
by default. This warning can be bypassed by using the addition <span class="qtext">AMDP OPTIONS CDS SESSION CLIENT</span> when declaring the method in the class <span class="lnkgrey">CL_DEMO_AMDP_SESSION_CLIENT</span>:
</p>
<p>
<span class="qtext">CLASS cl_demo_amdp_session_client DEFINITION <br>&nbsp;&nbsp;PUBLIC <br>&nbsp;&nbsp;FINAL <br>
&nbsp;&nbsp;CREATE PUBLIC. <br> <br>&nbsp;&nbsp;PUBLIC SECTION. <br>&nbsp;&nbsp;&nbsp;&nbsp;INTERFACES if_amdp_marker_hdb . <br>
&nbsp;&nbsp;&nbsp;&nbsp;TYPES t_connections TYPE STANDARD TABLE OF demo_cds_prjct0a <br>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH EMPTY KEY. <br>
&nbsp;&nbsp;&nbsp;&nbsp;METHODS get_spfli_view <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AMDP OPTIONS READ-ONLY <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CDS SESSION CLIENT clnt <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING VALUE(clnt)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE sy-mandt <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING VALUE(connections) TYPE t_connections <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RAISING&nbsp;&nbsp; cx_amdp_error.</span>
</p>
<p>
When the method is called from ABAP, the session variable <span class="qtext400">CDS_CLIENT</span> is
set to the value passed to the input parameter <span class="qtext">clnt</span>. The program <span class="lnkgrey">DEMO_AMDP_SESSION_CLIENT</span>
calls the AMDP method and it is possible to enter different values for the client ID. The data of the client in question is selected.
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abapmethods_amdp_options.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:33 GMT -->
</html>
