<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENST_TT_LOOP -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenst_tt_loop.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:55 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="ST - tt:loop, Internal Tables">
<meta name="keywords" content="ABAP, Simple Transformations, loop">
<title>
ST - tt:loop, Internal Tables - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abenst_tt_loop.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abenst_tt_loop.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_communication.html')" class="blue">Data Interfaces and Communication Interfaces</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_xml.html')" class="blue">ABAP and XML</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_xml_trafos.html')" class="blue">Transformations for XML</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_st.html')" class="blue">ST - Simple Transformations</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenst_serial_deserial.html')" class="blue">ST - Serialization and Deserialization</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenst_abap_values.html')" class="blue">ST - Transformation of ABAP Values</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@loop@@!ABAP_ST_ELEMENT!@@"></A>
<p><span class="h1">
ST - tt:loop, Internal Tables
</span></p>
<A name="@@ITOC@@ABENST_TT_LOOP_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext400">&lt;tt:loop <i class=bn>[</i>ref="node"<i class=bn>]</i> <i class=bn>[</i>name="alias"<i class=bn>]</i>> <br>&nbsp;&nbsp;... <br>&lt;/tt:loop></span>
</p>
<p><span class="h4">
Effect
</span></p>
<p>
Internal tables are serialized and deserialized within a loop defined by <span class="qtext400">tt:loop</span> that sets the <a href="javascript:call_link('abenst_tt_ref.html')" class="blue">current node</a> to the current table row.
</p>
<p>
The optional attribute <span class="qtext400">ref</span> can be used to define the current node for
the command. If <span class="qtext400">ref</span> is not specified, the current node of the surrounding element is used. The ABAP data object that is bound to the current node must be an internal table.
</p>
<p>
The <span class="qtext400">name</span> attribute can be used to define an <span class="qtext400">alias</span>
for the current node within the loop. In the <span class="qtext400">tt:loop</span> loop, the current
node can then be addressed with <span class="qtext400">$alias</span>. When nested loops are used, the
alias permits access to the current nodes of outer loops. If only one loop is used and in the outermost
loop, <span class="qtext400">$alias</span> is equivalent to <span class="qtext400">$ref</span> when entering the loop.
</p>
<A name="@@ITOC@@ABENST_TT_LOOP_2"></A>
<p><span class="h3">
Serialization
</span></p>
<p>
In serializations, a loop is run for the entire internal table. If the internal table is blank, processing
continues after the element. In each loop pass, the current node of a data node is set and the current
ABAP table row is bound to the data node. The content of element <span class="qtext400">tt:loop</span>, which can contain any template elements, is processed for each data node.
</p>
<A name="@@ITOC@@ABENST_TT_LOOP_3"></A>
<p><span class="h3">
Deserialization
</span></p>
<p>
In deserializations, the ABAP table is initialized and the content of element <span class="qtext400">tt:loop</span>
is also executed in a loop. The XML data continues to be processed until a position is reached that
cannot be processed with the content of the element. A new row is created in the bound ABAP table for
each loop pass and is in turn bound to the current node. The XML values that are deserialized in the current loop pass are passed on to the current table row.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>If it must be possible to deserialize a transformation, it must be possible to end loop executions
properly, especially in the case of nested <span class="qtext400">tt:loop</span> loops. This is the
case when the content of a <span class="qtext400">tt:loop</span> element can be synchronized with the
sections to be deserialized. If the XML elements in a loop are not sufficient, the entire loop body
can be enclosed with a literal XML element, for example, which defines a hierarchy level that can be analyzed in deserializations.</li>
</ul>
<ul class="disc">
<li>In a simple transformation, a data node must be handled either exclusively as an internal table or not at all. In particular, this applies to dividing a template into different transformation directions.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
In the following symmetrical simple transformation, the internal table that is bound to the <span class="qtext400">ROOT</span>
data roots and its table-like component <span class="qtext400">values</span> are serialized and deserialized
in two nested <span class="qtext400">tt:loop</span> loops. For demonstration purposes, an alias called
<span class="qtext400">line</span> is defined in the outermost loop and is addressed in the loop using
<span class="qtext400">$line</span>. Since <span class="qtext400">$line</span> is not addressed in the inner loop, the definition of the alias name would not be necessary here.
</p>
<dl><dd>
<span class="qtext400">&lt;tt:transform <br>&nbsp;&nbsp;xmlns:tt="http://www.sap.com/transformation-templates"> <br>
&nbsp;&nbsp;&lt;tt:root name="ROOT"/> <br>&nbsp;&nbsp;&lt;tt:template> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tab1> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:loop ref=".ROOT" name="line"> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;key> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:value ref="$line.key" /> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/key> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tab2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:loop ref="$line.values"> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tt:value /> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/value> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tt:loop> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tab2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tt:loop> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tab1> <br>&nbsp;&nbsp;&lt;/tt:template> <br>&lt;/tt:transform></span>
</dd></dl>
<p>
The following ABAP program can call the transformation:
</p>
<dl><dd>
<span class="qtext">TYPES: BEGIN OF line, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; key&nbsp;&nbsp;&nbsp;&nbsp;TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; values TYPE TABLE OF i WITH EMPTY KEY, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; END OF line. <br>
 <br>DATA itab TYPE TABLE OF line WITH EMPTY KEY. <br>DATA result LIKE itab. <br> <br>itab = <br>&nbsp;&nbsp;VALUE #( FOR j = 2 UNTIL j > 4 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( key&nbsp;&nbsp;&nbsp;&nbsp;= j <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; values = VALUE #( ( j ** 2 ) <br>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( j ** 3 ) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( j ** 4 ) ) ) ). <br>
 <br>CALL TRANSFORMATION id <br>&nbsp;&nbsp;SOURCE root = itab <br>&nbsp;&nbsp;RESULT XML DATA(xml_xstring). <br>
 <br>cl_abap_browser=>show_xml( EXPORTING xml_xstring = xml_xstring ). <br> <br>CALL TRANSFORMATION id <br>&nbsp;&nbsp;SOURCE XML xml_string <br>&nbsp;&nbsp;RESULT root = result.</span>
</dd></dl>
<p>
The result of the serialization is the following:
</p>
<dl><dd>
<span class="qtext400">&lt;tab1> <br>&nbsp;&nbsp;&lt;key>2&lt;/key> <br>&nbsp;&nbsp;&lt;tab2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>4&lt;/value> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>8&lt;/value> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>16&lt;/value> <br>&nbsp;&nbsp;&lt;/tab2> <br>
&nbsp;&nbsp;&lt;key>3&lt;/key> <br>&nbsp;&nbsp;&lt;tab2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>9&lt;/value> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>27&lt;/value> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>81&lt;/value> <br>
&nbsp;&nbsp;&lt;/tab2> <br>&nbsp;&nbsp;&lt;key>4&lt;/key> <br>&nbsp;&nbsp;&lt;tab2> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>16&lt;/value> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>64&lt;/value> <br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;value>256&lt;/value> <br>&nbsp;&nbsp;&lt;/tab2> <br>&lt;/tab1></span>
</dd></dl>
<p>
The transformation is <a href="javascript:call_link('abenst_symmetry.html')" class="blue">symmetrical</a>. After deserialization, <span class="qtext400">result</span> has the same content as <span class="qtext400">itab</span>.
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abenst_tt_loop.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:55 GMT -->
</html>
