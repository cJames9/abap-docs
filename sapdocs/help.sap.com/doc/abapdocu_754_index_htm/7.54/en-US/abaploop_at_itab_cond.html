<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABAPLOOP_AT_ITAB_COND -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abaploop_at_itab_cond.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:50 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="LOOP AT itab - cond">
<title>
LOOP AT itab - cond - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abaploop_at_itab_cond.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abaploop_at_itab_cond.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab.html')" class="blue">Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentable_processing_statements.html')" class="blue">Processing Statements for Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abaploop_at_itab_variants.html')" class="blue">LOOP AT itab</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abaploop_at_itab.html')" class="blue">LOOP AT itab - Basic Form</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@loop_key@@LOOP AT itab@@"></A>
<p><span class="h1">
LOOP AT itab - cond <br><br>
</span></p>
<P>
<a href="javascript:call_link('abaploop_at_itab_shortref.html')" class="blue">Quick Reference</a> <br><br>
</P>
<p><span class="h2">
<span class="bold">Syntax</span>
</span></p>
<P>
<span class="qtext"> ... <i class=bn>[</i>USING KEY <a href="javascript:call_link('abenkeyname.html')" class="blue">keyname</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>FROM idx1<i class=bn>]</i> <i class=bn>[</i>TO idx2<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;<i class=bn>[</i>WHERE <a href="javascript:call_link('abenlogexp.html')" class="blue">log_exp</a><i class=bn>|</i>(cond_syntax)<i class=bn>]</i> ...</span> <br><br>
</P>
<p><span class="h3">
Extras:
</span></p>
<P>
   <A HREF="#!ABAP_ADDITION_1@1@" class="blue"> 1. <span class="qtext">... USING KEY keyname</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_2@2@" class="blue"> 2. <span class="qtext">... <i class=bn>[</i>FROM idx1<i class=bn>]</i> <i class=bn>[</i>TO idx2<i class=bn>]</i></span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_3@3@" class="blue"> 3. <span class="qtext">... WHERE log_exp</span> </A> <br>
<br><A HREF="#!ABAP_ADDITION_4@4@" class="blue"> 4. <span class="qtext">... WHERE (cond_syntax)</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
<span class="qtext">USING KEY <a href="javascript:call_link('abenkeyname.html')" class="blue">keyname</a></span> is used to determine
the table key with which the loop is executed. The table rows to be read in a <span class="qtext">LOOP</span> loop can also be limited using optional conditions. If no conditions are declared, all table rows are read.
</P>
<P>
Within the loop, the key being used can be addressed using the predefined <span class="qtext">loop_key</span>.
This is possible in all statements where the table key <a href="javascript:call_link('abenkeyname.html')" class="blue"><span class="qtext">
keyname</span></a> is used and where it can be declared explicitly. This type of statement must then
be executed in the loop itself. Including the statement in a procedure that is called in the loop is not sufficient. <br><br>
</P>
<A NAME="@@USING KEY@@LOOP AT itab@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_1@1@"></A> <span class="bold">Addition 1</span>
</span></p>
<P>
<span class="qtext">... USING KEY keyname</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
The addition <span class="qtext">USING KEY</span> can be used to specify a table key <a href="javascript:call_link('abenkeyname.html')" class="blue">
<span class="qtext">keyname</span></a> with which the processing is carried out. The specified table key influences the order in which the table rows are accessed, and the evaluation of the remaining conditions.
</P>
<P>
If the <a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table
key</a> is specified using the name <span class="qtext">primary_key</span>, the processing behaves in the same way as when no key is explicitly specified. If a
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a> is specified, the order in which the rows are accessed is as follows:
</P>
<ul class="disc">
<li>
<span class="bold"><a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">Sorted key</a> specified</span> <br>
The rows are processed by ascending row number in the
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a>
In each loop pass, the system field <span class="qtext">sy-tabix</span> contains the row number of the current row in the associated secondary table index. <br>
<br></li>
<li>
<span class="bold"><a href="javascript:call_link('abenhash_key_glosry.html')" class="grey" title="Glossary Entry">Hash key</a> specified</span> <br>
The rows are processed in the order in which they were inserted into the table. In each loop pass, the system field <span class="qtext">sy-tabix</span> contains the value 0.
<br></li>
</ul>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
Unlike the processing of a hashed table when a primary key is used, a preceding sort using the statement <span class="qtext">SORT</span> has no influence on the processing order when a secondary hash key is specified.
<br><br></li>
<li>
If a secondary table key is specified, any <span class="qtext">WHERE</span> condition also specified must be
<a href="javascript:call_link('abenitab_where_optimization.html')" class="blue">optimizable</a>. Otherwise a syntax error occurs or an exception is raised. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The example demonstrates the difference between loops across a standard table of random numbers where
a sorted secondary table key is specified and those where it is not. The first loop returns the rows in the order they were appended. The second loop returns the rows sorted in ascending order.
</p>
<p class="qtextml1">
<span class="qtext">
DATA(rnd) = cl_abap_random_int=>create( seed = + sy-uzeit <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min&nbsp;&nbsp;= 1 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max&nbsp;&nbsp;= 100 ). <br>
 <br>DATA itab TYPE STANDARD TABLE OF i WITH EMPTY KEY <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITH NON-UNIQUE SORTED KEY key COMPONENTS table_line. <br>
itab = VALUE #( FOR i = 1 UNTIL i > 10 ( rnd->get_next( ) ) ). <br> <br>DATA output1 TYPE TABLE OF i WITH EMPTY KEY. <br>
LOOP AT itab INTO DATA(number1). <br>&nbsp;&nbsp;output1 = VALUE #( BASE output1 ( number1 ) ). <br>ENDLOOP. <br>
cl_demo_output=>write( output1 ). <br> <br>DATA output2 TYPE TABLE OF i WITH EMPTY KEY. <br>LOOP AT itab INTO DATA(number2) USING KEY key. <br>
&nbsp;&nbsp;output2 = VALUE #( BASE output2 ( number2 ) ). <br>ENDLOOP. <br>cl_demo_output=>display( output2 ). <br><br>
</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<P>
<a href="javascript:call_link('abenloop_at_itab_key_abexa.html')" class="blue">Loop Across Internal Table with Key Specified</a> <br><br>
</P>
<A NAME="@@FROM idx@@LOOP AT itab@@"></A>
<A NAME="@@TO idx@@LOOP AT itab@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_2@2@"></A> <span class="bold">Addition 2</span>
</span></p>
<P>
<span class="qtext">... <i class=bn>[</i>FROM idx1<i class=bn>]</i> <i class=bn>[</i>TO idx2<i class=bn>]</i></span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If these additions are used, only the table rows from row number <span class="qtext">idx1</span>, or
up to row number <span class="qtext">idx2</span>, are respected if the table index used. If only <span class="qtext">
FROM</span> is specified, all rows of the table from row number <span class="qtext">idx1</span> up to
and including the last row are taken into account. If only <span class="qtext">TO</span> is specified, all rows in the table from the first row up to row number <span class="qtext">idx2</span> are respected.
</P>
<P>
If the addition <span class="qtext">USING KEY</span> is not used, or the
<a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table key</a>
is specified in <span class="qtext">keyname</span>, the additions <span class="qtext">FROM</span> and <span class="qtext">TO</span> can only be used for
<a href="javascript:call_link('abenindex_table_glosry.html')" class="grey" title="Glossary Entry">index tables</a>. In this case, they refer to the row numbers of the
<a href="javascript:call_link('abenprimary_table_index_glosry.html')" class="grey" title="Glossary Entry">primary table index</a>.
</P>
<P>
If a <a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted</a>
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary key</a> is
specified in <span class="qtext">keyname</span> after <span class="qtext">USING KEY</span>, the additions
<span class="qtext">FROM</span> and <span class="qtext">TO</span> can be used for all table categories and refer to the row numbers of the
<a href="javascript:call_link('abensecondary_table_index_glosry.html')" class="grey" title="Glossary Entry">secondary table index</a>.
</P>
<P>
<span class="qtext">idx1</span> and <span class="qtext">idx2</span> are
<a href="javascript:call_link('abennumerical_expr_position_glosry.html')" class="grey" title="Glossary Entry">numeric expression positions</a> of operand type <span class="qtext">i</span>. The following restrictions apply:
</P>
<ul class="disc">
<li>
If the value of <span class="qtext">idx1</span> is less than or equal to 0, it is set to 1 in the statement
<span class="qtext">LOOP</span>. If the value of <span class="qtext">idx1</span> is greater than the total number of table rows, no processing takes place. <br>
<br></li>
<li>
If the value of <span class="qtext">idx2</span> is less than or equal to 0, the statement <span class="qtext">LOOP</span>
is not executed. If the value of <span class="qtext">idx2</span> is greater than the number of table rows, it is set to the number of table rows. <br>
<br></li>
<li>
If the value of <span class="qtext">idx2</span> is less than the value of <span class="qtext">idx1</span>, no processing takes place.
<br></li>
</ul>
<P>
The value of <span class="qtext">idx1</span> is evaluated once when the loop is entered. Any changes
to <span class="qtext">idx1</span> during loop processing are ignored. In contrast, the value of <span class="qtext">
idx2</span> is evaluated in each loop pass and any changes made to <span class="qtext">idx2</span> during loop processing are respected.
</P>
<p><span class="h4">
Note
</span></p>
<P>
To determine when loop processing is exited and whether the value specified in <span class="qtext">idx2</span>
has been reached, the current row number is evaluated. Note that this number can be changed if rows
are inserted or deleted during a loop pass as described in <a href="javascript:call_link('abaploop_at_itab.html')" class="blue"><span class="qtext">
LOOP</span></a>. As a result, there may be more loop passes (if rows are inserted) or fewer loop passes
(if rows are deleted) than is specified by the difference between <span class="qtext">idx2</span> and <span class="qtext">idx1</span>. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<p>
Determine the primary index of a particular table row using the built-in function <a href="javascript:call_link('abenline_index_function.html')" class="blue">
<span class="qtext">line_index</span></a> and a loop across the internal table from this row.
</p>
<p class="qtextml1">
<span class="qtext">
DATA itab TYPE SORTED TABLE OF scarr <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH UNIQUE KEY carrid. <br>
 <br>SELECT * <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM scarr <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTO TABLE itab. <br>
 <br>DATA(idx) = line_index( itab[ carrid = 'LH' ] ). <br>IF idx = 0. <br>&nbsp;&nbsp;RETURN. <br>ENDIF. <br> <br>LOOP AT itab FROM idx ASSIGNING FIELD-SYMBOL(&lt;fs>). <br>&nbsp;&nbsp;... <br>ENDLOOP. <br><br>
</span>
</p>
<A NAME="@@WHERE@@LOOP AT itab@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_3@3@"></A> <span class="bold">Addition 3</span>
</span></p>
<P>
<span class="qtext">... WHERE log_exp</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Static <span class="qtext">WHERE</span> condition. All rows are processed for which the condition after
<span class="qtext">WHERE</span> is met. If a static <span class="qtext">WHERE</span> condition is specified,
the row type of the internal table must be known statically. <span class="qtext">WHERE</span> can be specified for all table categories.
</P>
<P>
A <a href="javascript:call_link('abenlogical_expression_glosry.html')" class="grey" title="Glossary Entry">logical expression</a>
<a href="javascript:call_link('abenlogexp.html')" class="blue"><span class="qtext">log_exp</span></a> can be specified after <span class="qtext">WHERE</span>, in which the first operand of each
<a href="javascript:call_link('abenrelational_expression_glosry.html')" class="grey" title="Glossary Entry">relational expression</a> is a
<a href="javascript:call_link('abenitab_components.html')" class="blue">component</a> of the internal table. The following can be specified as relational expressions:
</P>
<ul class="disc">
<li>
All <a href="javascript:call_link('abenlogexp_comp.html')" class="blue">comparison expressions</a>
<br><br></li>
<li>
The following <a href="javascript:call_link('abenpredicate_expression_glosry.html')" class="grey" title="Glossary Entry">predicate expressions</a>:
<br></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abenlogexp_initial.html')" class="blue"><span class="qtext">IS <i class=bn>[</i>NOT<i class=bn>]</i> INITIAL</span></a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abenlogexp_bound.html')" class="blue"><span class="qtext">IS <i class=bn>[</i>NOT<i class=bn>]</i> BOUND</span></a></li>
</ul>
<ul class="circlem2">
<li><a href="javascript:call_link('abenlogexp_instance_of.html')" class="blue"><span class="qtext">IS <i class=bn>[</i>NOT<i class=bn>]</i> INSTANCE OF</span></a></li>
</ul>
<P>
No other <a href="javascript:call_link('abenpredicate.html')" class="blue">predicates</a> can be specified. The components of
the internal table must be specified as individual operands and not as part of an expression. You cannot
use parenthesized character-like data objects to specify a component dynamically here. The remaining operands of a relational expression are
<a href="javascript:call_link('abengeneral_expression_positions.html')" class="blue">general expression positions</a> at which any
<a href="javascript:call_link('abenlogexp_rules.html')" class="blue">suitable</a> individual operands or
<a href="javascript:call_link('abenexpression_glosry.html')" class="grey" title="Glossary Entry">expressions</a> can be specified, but no components of the internal table. The specified components can have any data type. The usual
<a href="javascript:call_link('abenlogexp_rules.html')" class="blue">comparison rules</a> apply to the evaluation. Here, a different
<a href="javascript:call_link('abenlogexp_rules_expr_char.html')" class="blue">rule</a> applies to a string expression on the right side than to general logical expressions.
</P>
<ul class="disc">
<li>When <a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">standard tables</a>
are accessed without a secondary key being specified, the access is not optimized. This means that all
rows of the internal table are tested for the logical expression of the <span class="qtext">WHERE</span> addition.</li>
</ul>
<ul class="disc">
<li>When using a <a href="javascript:call_link('abensorted_key_glosry.html')" class="grey" title="Glossary Entry">sorted key</a> or a
<a href="javascript:call_link('abenhash_key_glosry.html')" class="grey" title="Glossary Entry">hash key</a> (that is, when accessing a
<a href="javascript:call_link('abensorted_table_glosry.html')" class="grey" title="Glossary Entry">sorted table</a>, a
<a href="javascript:call_link('abenhashed_table_glosry.html')" class="grey" title="Glossary Entry">hashed table</a>, or a
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a>),
an attempt is made to optimize the access as described under <a href="javascript:call_link('abenitab_where_optimization.html')" class="blue">
Optimization of the <span class="qtext">WHERE</span> Condition</a>. If the corresponding prerequisites are not met:</li>
</ul>
<ul class="circlem2">
<li>the entire logical expression (or a part of the expression) can be transformed to a key access,</li>
</ul>
<ul class="circlem2">
<li>the transformable part of the logical expression has the same result as the resulting key access,</li>
</ul>
<dl><dd>
no optimization takes place when a sorted table or a hashed table is accessed using the
<a href="javascript:call_link('abenprimary_table_key_glosry.html')" class="grey" title="Glossary Entry">primary table key</a>. Any access using a
<a href="javascript:call_link('abensecondary_table_key_glosry.html')" class="grey" title="Glossary Entry">secondary table key</a>
produces a syntax error or exception. In the part of the logical expression relevant for the optimization,
the static <span class="qtext">WHERE</span> condition cannot specify any duplicate or overlapping keys.
Duplicate key components can, however, be specified in the part of the logical expression whose relational expressions do not make a contribution to the optimized access. <br><br>
</dd></dl>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>
When using a <span class="qtext">WHERE</span> condition, note that the
<a href="javascript:call_link('abenlogexp_rules.html')" class="blue">comparison rules</a> for incompatible data types apply when
comparing incompatible data objects. Here, the data types involved determine which operand is converted.
If the additions <a href="javascript:call_link('abapread_table_key.html')" class="blue"><span class="qtext">WITH TABLE KEY</span></a>
and <a href="javascript:call_link('abapread_table_free.html')" class="blue"><span class="qtext">WITH KEY</span></a> of the statement <span class="qtext">READ</span> are used or if the appropriate
<a href="javascript:call_link('abentable_exp_itab_line.html')" class="blue">keys are specified</a> in
<a href="javascript:call_link('abentable_expressions.html')" class="blue">table expressions</a>, however, the content of the
specified data objects is always converted to the data type of the columns before the comparison. This can produce varying results.
<br><br></li>
<li>
If possible, all operands of the logical expression should be in
<a href="javascript:call_link('abencompatible_glosry.html')" class="grey" title="Glossary Entry">compatible</a> pairs, so enabling
the <a href="javascript:call_link('abenitab_where_optimization.html')" class="blue"><span class="qtext">WHERE</span> condition to be optimized</a>.
<br><br></li>
<li>
If a comparison expression with a <a href="javascript:call_link('abenranges_table_glosry.html')" class="grey" title="Glossary Entry">
ranges table</a> is specified after <a href="javascript:call_link('abenlogexp_select_option.html')" class="blue"><span class="qtext">IN</span></a>
as a logical expression, note that the expression at the initial table is always true and then all rows are edited. <br>
<br></li>
<li>
The logical expression declared after <span class="qtext">WHERE</span> is evaluated once when the loop is entered. Any changes to the second operand during loop processing are ignored. <br><br>
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
The following example demonstrates the differences in behavior of a <span class="qtext">WHERE</span>
condition and a key access with <span class="qtext">WITH TABLE KEY</span>. In <span class="qtext">LOOP AT itab WHERE</span>, the rule for the
<a href="javascript:call_link('abenlogexp_character.html')" class="blue">comparison of character-like data types</a> applies.
The short column content <span class="qtext400">"AA"</span> is first padded with blanks to change the
length to 4. It is then compared to <span class="qtext400">"AAXX"</span>. No matching row is found. With <span class="qtext">READ TABLE itab WITH TABLE KEY</span>, the content of <span class="qtext">text_long</span> is
<a href="javascript:call_link('abenconversion_type_c.html')" class="blue">converted</a> to the value <span class="qtext400">"AA"</span>
before the comparison, by cutting off two characters, and then compared to the column content. The result is produced without errors.
</P>
<p class="qtextml1">
<span class="qtext">
DATA text_short TYPE c LENGTH 2. <br>DATA text_long&nbsp;&nbsp;TYPE c LENGTH 4. <br> <br>DATA itab LIKE TABLE OF text_short WITH NON-UNIQUE KEY table_line. <br>
 <br>text_short = 'AA'. <br>text_long&nbsp;&nbsp;= 'AAXX'. <br> <br>APPEND text_short TO itab. <br> <br>
LOOP AT itab INTO text_short WHERE table_line = text_long. <br>ENDLOOP. <br>cl_demo_output=>write( |LOOP: { sy-subrc }| ). <br>
 <br>READ TABLE itab INTO text_short WITH TABLE KEY table_line = text_long. <br>cl_demo_output=>display( |READ: { sy-subrc }| ). <br><br>
</span>
</p>
<p><span class="h3">
<A NAME="!ABAP_ADDITION_4@4@"></A> <span class="bold">Addition 4</span>
</span></p>
<P>
<span class="qtext">... WHERE (cond_syntax)</span>   <br><!-- /A -->
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Dynamic <span class="qtext">WHERE</span> condition. <span class="qtext">cond_syntax</span> can be specified as a character-like data object or
<a href="javascript:call_link('abenstandard_table_glosry.html')" class="grey" title="Glossary Entry">standard table</a> with
character-like row type that, when the statement is executed and with the following exceptions, contains
the syntax of a logical expression (in accordance with the rules of the static <span class="qtext">WHERE</span>
condition) or is initial. The following are not supported in a dynamic <span class="qtext">WHERE</span> condition:
</P>
<ul class="disc">
<li>
<a href="javascript:call_link('abenstring_expression_glosry.html')" class="grey" title="Glossary Entry">String expressions</a> and <a href="javascript:call_link('abenbit_expression_glosry.html')" class="grey" title="Glossary Entry">bit expressions</a>
<br><br></li>
<li>
<a href="javascript:call_link('abenstring_function_glosry.html')" class="grey" title="Glossary Entry">String functions</a> and <a href="javascript:call_link('abenbit_function_glosry.html')" class="grey" title="Glossary Entry">bit functions</a>
<br><br></li>
<li>
<a href="javascript:call_link('abentimestamp_function_glosry.html')" class="grey" title="Glossary Entry">Time stamp functions</a> with the exception of <span class="qtext">utclong_current</span>
<br><br></li>
<li>
<a href="javascript:call_link('abenconstructor_expression_glosry.html')" class="grey" title="Glossary Entry">Constructor expressions</a>
<br><br></li>
<li>
<a href="javascript:call_link('abentable_expression_glosry.html')" class="grey" title="Glossary Entry">Table expressions</a>
<br></li>
</ul>
<P>
The syntax in <span class="qtext">cond_syntax</span> is not case-sensitive (as in the static syntax).
When an internal table is specified, the syntax can be distributed across multiple rows. If <span class="qtext">cond_syntax</span>
is initial when the statement is executed, the logical expression is true. Invalid logical expressions raises an exception from the class <span class="lnkgrey">CX_SY_ITAB_DYN_LOOP</span>.
</P>
<p><span class="h4">
Security Note
</span></p>
<p>
 If used wrongly, dynamic programming techniques can present a serious security risk. Any dynamic content
that is passed to a program from the outside must be checked thoroughly or escaped before being used
in dynamic statements. This can be done using the system class <span class="lnkgrey">CL_ABAP_DYN_PRG</span> or the predefined function <a href="javascript:call_link('abenescape_functions.html')" class="blue"><span class="qtext">escape</span></a>. See
<a href="javascript:call_link('abendynamic_programming_scrty.html')" class="blue">Security Risks Caused by Input from Outside</a>.
</p>
<p><span class="h4">
Note
</span></p>
<P>
The dynamic <span class="qtext">WHERE</span> condition is not evaluated for a blank table for optimization
reasons. Therefore, if an internal table is blank, and a logical expression has errors, no exception is raised. <br><br>
</P>
<p><span class="h4">
Example
</span></p>
<P>
Gets rows with certain row numbers in the primary table index that meet a condition. Demonstrates the static and dynamic declaration of a <span class="qtext">WHERE</span> condition.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: BEGIN OF line, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col1 TYPE i, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col2 TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END OF line. <br> <br>DATA itab LIKE SORTED TABLE OF line WITH UNIQUE KEY table_line. <br>
 <br>DATA output TYPE TABLE OF string WITH EMPTY KEY. <br> <br>DATA num TYPE i VALUE 400. <br>DATA dref TYPE REF TO i. <br>
DATA cond TYPE string. <br> <br>itab = VALUE #( FOR j = 1 UNTIL j > 30 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( col1 = j <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col2 = j ** 2 ) ). <br>
 <br>dref = REF #( num ). <br> <br>LOOP AT itab INTO line FROM 10 TO 25 WHERE col2 > dref->*. <br>&nbsp;&nbsp;APPEND CONV string( line-col2 ) TO output. <br>
ENDLOOP. <br> <br>APPEND INITIAL LINE TO output. <br> <br>cond = 'col2 > dref->*'. <br> <br>LOOP AT itab INTO line FROM 10 TO 25 WHERE (cond). <br>
&nbsp;&nbsp;APPEND CONV string( line-col2 ) TO output. <br>ENDLOOP. <br> <br>cl_demo_output=>display_data( output ). <br><br>
</span>
</p>
<br>
<br>
<br>
<span class="trans"
onMouseover="this.innerHTML='<br>Current version: 0211. Translated version: 0210.<br>'"
onMouseout="this.innerHTML='<br>This translation does not reflect the current version of the documentation.<br>'"
>
<br>This translation does not reflect the current version of the documentation.<br>
</span><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abaploop_at_itab_cond.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:50 GMT -->
</html>
