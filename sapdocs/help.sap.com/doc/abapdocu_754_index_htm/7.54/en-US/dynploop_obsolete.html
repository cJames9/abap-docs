<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- DYNPLOOP_OBSOLETE -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/dynploop_obsolete.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:44 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="LOOP - Step Loop">
<title>
LOOP - Step Loop - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=dynploop_obsolete.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=dynploop_obsolete.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_obsolete.html')" class="blue">Obsolete Language Elements</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abengui_obsolete.html')" class="blue">Obsolete User Dialogs</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abendynpro_obsolet.html')" class="blue">Obsolete statements of the screen flow logic</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abensteploop.html')" class="blue">Obsolete Processing of Step Loops</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@LOOP@@!ABAP_DYNP_STATEMENT_OB!@@"></A>
<p><span class="h1">
LOOP - Step Loop <br><br>
</span></p>
<p><span class="h2">
<span class="bold">Obsolete Syntax</span>
</span></p>
<P>
<span class="qtext">LOOP <i class=bn>[</i>AT itab CURSOR top_line <i class=bn>[</i>INTO wa<i class=bn>]</i> <i
class=bn>[</i>FROM n1<i class=bn>]</i> <i class=bn>[</i>TO n2<i class=bn>]</i><i class=bn>]</i>.</span> <br><span class="qtext">&nbsp;&nbsp;...</span> <br><span class="qtext">ENDLOOP.</span> <br><br>
</P>
<p><span class="h2">
Variants:
</span></p>
<P>
   <A HREF="#!ABAP_VARIANT_1@1@" class="blue"> 1. <span class="qtext">LOOP.</span> </A> <br><br><A HREF="#!ABAP_VARIANT_2@2@" class="blue"> 2. <span class="qtext">LOOP AT itab CURSOR top_line <i
class=bn>[</i>INTO wa<i class=bn>]</i> <i class=bn>[</i>FROM n1<i class=bn>]</i> <i class=bn>[</i>TO n2<i class=bn>]</i>.</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
Defines a loop in the <a href="javascript:call_link('abendynpro_flow_logic_glosry.html')" class="grey" title="Glossary Entry">dynpro flow logic</a> that is not associated with a
<a href="javascript:call_link('abentable_control_glosry.html')" class="grey" title="Glossary Entry">table control</a>. The loop processes the groups specified for the corresponding
<a href="javascript:call_link('abenstep_loop_glosry.html')" class="grey" title="Glossary Entry">step loop</a> sequentially by
executing a loop pass for each group. The statement block between <span class="qtext">LOOP</span> and
<span class="qtext">ENDLOOP</span> can contain the keywords <a href="javascript:call_link('dynpfield.html')" class="blue"><span class="qtext">
FIELD</span></a>, <a href="javascript:call_link('dynpmodule.html')" class="blue"><span class="qtext">MODULE</span></a>, and <a href="javascript:call_link('dynpchain.html')" class="blue">
<span class="qtext">CHAIN</span></a> (as well as the obsolete <a href="javascript:call_link('dynpfield_value_select.html')" class="blue"><span class="qtext">
SELECT</span> and <span class="qtext">VALUES</span></a>) of the flow logic. Nesting of loops is not possible. Loops can either be executed with or without reference to an internal table.
</P>
<P>
If step loops are defined in a dynpro, a loop must be defined for each step loop both in the the PBO
processing block as well as in the PAI processing block. The assignment of loops to step loops is derived
from the alignment of the step loops on the screen; the rows are valuated with primary priority, and the columns with secondary priority.
</P>
<P>
<span class="bold">System Fields</span><br>
</P>
<P>
Within a loop pass, the system field <span class="qtext">sy-stepl</span> contains the row number of
the displayed group, counted from the uppermost visible row. The system field <span class="qtext">sy-loopc</span> contains the number of group rows displayed on a screen.
</P>
<p><span class="h4">
Note
</span></p>
<P>
This use of the statement <span class="qtext">LOOP</span> in the dynpro flow logic is obsolete. It should
only be used with the addition <a href="javascript:call_link('dynploop.html')" class="blue"><span class="qtext">WITH CONTROL</span></a>, where it is associated with a
<a href="javascript:call_link('abentable_control_glosry.html')" class="grey" title="Glossary Entry">table control</a>. <br><br>
</P>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_1@1@"></A> <span class="bold">Variant 1</span>
</span></p>
<P>
<span class="qtext">LOOP.</span> <br><span class="qtext">&nbsp;&nbsp;...</span><br><!-- /A --> <br><span class="qtext">ENDLOOP.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If the addition <span class="qtext">AT itab</span> is not specified, the contents of the dynpro fields
belonging to the current group of the step loop are transported during a loop pass from (at event PBO) or to (at event PAI) data objects with the same name in the ABAP program.
</P>
<p><span class="h4">
Note
</span></p>
<P>
For step loop fields that are defined with reference to ABAP Dictionary, the data objects with the same
name in the ABAP program must be declared using <a href="javascript:call_link('abaptables.html')" class="blue"><span class="qtext">TABLES</span></a>, as is the case with normal dynpro fields. Otherwise, no data transport takes place.
</P>
<p><span class="h4">
Example
</span></p>
<P>
 In the layout of the dynpro screen, there are two dynpro fields <span class="qtext">wa-col1</span>
and <span class="qtext">wa-col2</span> that are grouped together to a group of a step loop. The dynpro flow logic contains the following statements:
</P>
<P>
<span class="qtext">PROCESS BEFORE OUTPUT. <br>&nbsp;&nbsp;... <br>&nbsp;&nbsp;LOOP. <br>&nbsp;&nbsp;&nbsp;&nbsp;MODULE tab_out. <br>
&nbsp;&nbsp;ENDLOOP. <br>&nbsp;&nbsp;... <br> <br>PROCESS AFTER INPUT. <br>&nbsp;&nbsp;... <br>&nbsp;&nbsp;LOOP. <br>&nbsp;&nbsp;&nbsp;&nbsp;MODULE tab_in. <br>&nbsp;&nbsp;ENDLOOP. <br>&nbsp;&nbsp;...</span>
</P>
<P>
Loops are run on the step loop and, in the loops for PBO and PAI, the dialog modules <span class="qtext">tab_out</span>
and <span class="qtext">tab_in</span> are called. The following program section shows how the respective
ABAP program fills the step loop fields in the PBO module <span class="qtext">tab_out</span> from an
internal table <span class="qtext">itab</span>. It also shows how, in the PAI module <span class="qtext">tab_in</span>, it modifies the internal table in accordance with the user specifications in the step loop.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: BEGIN OF wa, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col1 TYPE i, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col2 TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; END OF wa, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; itab LIKE STANDARD TABLE OF wa. <br>
 <br>... <br> <br>MODULE tab_out OUTPUT. <br>&nbsp;&nbsp;IF itab IS INITIAL. <br>&nbsp;&nbsp;&nbsp;&nbsp;itab = VALUE #( FOR j = 1 UNTIL j > 40 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( col1 = j <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col2 = j ** 2 ) ). <br>
&nbsp;&nbsp;ENDIF. <br>&nbsp;&nbsp;wa = itab[ sy-stepl ]. <br>ENDMODULE. <br> <br>... <br> <br>MODULE tab_in INPUT. <br>&nbsp;&nbsp;MODIFY itab FROM wa INDEX sy-stepl. <br>ENDMODULE. <br><br>
</span>
</p>
<A NAME="@@CURSOR@@LOOP - obsolete@@"></A>
<p><span class="h2">
<A NAME="!ABAP_VARIANT_2@2@"></A> <span class="bold">Variant 2</span>
</span></p>
<P>
<span class="qtext">LOOP AT itab CURSOR top_line <i class=bn>[</i>INTO wa<i class=bn>]</i> <i class=bn>[</i>FROM n1<i class=bn>]</i> <i class=bn>[</i>TO n2<i class=bn>]</i>.</span> <br>
<span class="qtext">&nbsp;&nbsp;...</span><br><!-- /A --> <br><span class="qtext">ENDLOOP.</span> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<P>
If the addition <span class="qtext">AT itab</span> is specified, an internal table <span class="qtext">itab</span>
of the corresponding ABAP program is sequentially processed parallel to the processing of the step loop.
For each group of the step loop, a row in the internal table is processed. The internal table <span class="qtext">itab</span> must be an
<a href="javascript:call_link('abenindex_table_glosry.html')" class="grey" title="Glossary Entry">index table</a>.
</P>
<P>
A scroll bar continues to be generated for the display of the corresponding step loop. This bar makes
it possible to scroll between the rows of the internal table <span class="qtext">itab</span> and to
display the corresponding rows in the step loop. Each scrolling action raises the event PAI. So that
scrolling functions correctly, the addition <span class="qtext">AT itab</span> must be specified both in the PBO as well as in the PAI processing block.
</P>
<P>
The additions <span class="qtext">CURSOR</span>, <span class="qtext">INTO</span>, <span class="qtext">TO</span>, and <span class="qtext">FROM</span> can only be specified in the PBO, not in the PAI processing block.
</P>
<ul class="disc">
<li>
The addition <span class="qtext">CURSOR</span> controls at which row of the internal table processing
begins at PBO time, that is the content of which row is be displayed first in the step loop. For <span class="qtext">
top_line</span>, a global data object of the ABAP program with the type <span class="qtext">i</span>
must be specified. If the content of the <span class="qtext">top_line</span> is less than 1 or the value
of <span class="qtext">n1</span>, it is implicitly set to 1 or to the value of <span class="qtext">n1</span>.
If it is larger than the number of rows in the internal table or larger than the value of <span class="qtext">n2</span>,
the step loop is not displayed. In each PAI event, <span class="qtext">top_line</span> is set to the index of the first displayed table row.
<br><br></li>
<li>
The addition <span class="qtext">INTO</span> is used to specify a work area <span class="qtext">wa</span>
to which the current row of the internal table is assigned at PBO time. If the addition <span class="qtext">wa</span> is not specified, an internal table with a
<a href="javascript:call_link('abenheader_line_glosry.html')" class="grey" title="Glossary Entry">header line</a> is used. This
is then used implicitly instead of <span class="qtext">wa</span>. The content of <span class="qtext">wa</span>
or of the header line is transported after the statement to the fields of the same name in the current
group of the step loop. The work area <span class="qtext">wa</span> must be a global data object of
the ABAP program that matches the row type of the internal table. At PAI time, on the other hand, only
the work area <span class="qtext">wa</span> or the header line of the internal table is supplied through the contents of the step loop fields. The content of the internal table is not modified automatically.
<br><br></li>
<li>
The additions <span class="qtext">FROM</span> and <span class="qtext">TO</span> can be used to limit
the internal table rows to be processed. Sequential editing of the table begins with the row whose index
is contained in <span class="qtext">n1</span> and ends with the row whose index is contained in <span class="qtext">
n2</span>. If the additions are not specified, processing begins with the first row and ends with the
last row. For <span class="qtext"> n1</span> and <span class="qtext">n2</span>, global data objects
of the ABAP program with the type <span class="qtext">i</span> must be specified. The value of <span class="qtext">
n2</span> must be larger than the value of <span class="qtext">n1</span> and it must be within the number
of rows in the internal table. If the value of <span class="qtext">n1</span> is less than or equal to 0, it is set to 1 implicitly.
<br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<P>
In the layout of the dynpro screen, there are two dynpro fields <span class="qtext">wa-col1</span> and
<span class="qtext">wa-col2</span> that are grouped together to a group of a step loop. The dynpro flow logic contains the following statements:
</P>
<p class="qtextml1">
<span class="qtext">
PROCESS BEFORE OUTPUT. <br>&nbsp;&nbsp;... <br>&nbsp;&nbsp;MODULE tab_init. <br>&nbsp;&nbsp;LOOP AT itab CURSOR top_line INTO wa. <br>
&nbsp;&nbsp;ENDLOOP. <br>&nbsp;&nbsp;... <br> <br>PROCESS AFTER INPUT. <br>&nbsp;&nbsp;... <br>&nbsp;&nbsp;MODULE get_first_line. <br>
&nbsp;&nbsp;LOOP AT itab. <br>&nbsp;&nbsp;&nbsp;&nbsp;MODULE tab_in. <br>&nbsp;&nbsp;ENDLOOP. <br>&nbsp;&nbsp;...
</span>
</p>
<P>
Parallel loops are executed through the step loop and the internal <span class="qtext">itab</span> table.
At PBO time, no dialog module is called in the loop. Instead, the module <span class="qtext">tab_init</span>
is called beforehand to edit the internal table <span class="qtext">itab</span>. At PAI, the module
<span class="qtext">tab_in</span> is called in the loop to modify the internal table in accordance with
the user specifications in the step loop. Beforehand, the module <span class="qtext">get_first_line</span>
is called to store the index of the first displayed table row in the helper variable <span class="qtext">line</span>.
This is necessary since the content of <span class="qtext">top_line</span> is changed when the user scrolls further. The following program section shows the dialog modules of the corresponding ABAP program.
</P>
<p class="qtextml1">
<span class="qtext">
DATA: BEGIN OF wa, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col1 TYPE i, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col2 TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; END OF wa, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; itab LIKE TABLE OF wa. <br>
 <br>DATA: top_line&nbsp;&nbsp;TYPE i, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;&nbsp;&nbsp;&nbsp; TYPE i, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idx&nbsp;&nbsp;TYPE i. <br> <br>... <br> <br>MODULE tab_init OUTPUT. <br>
&nbsp;&nbsp;IF itab IS INITIAL. <br>&nbsp;&nbsp;&nbsp;&nbsp;itab = VALUE #( FOR j = 1 UNTIL j > 40 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ( col1 = j <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; col2 = j ** 2 ) ). <br>
&nbsp;&nbsp;ENDIF. <br>ENDMODULE. <br> <br>... <br> <br>MODULE get_first_line INPUT. <br>&nbsp;&nbsp;line = top_line. <br>
ENDMODULE. <br> <br>MODULE tab_in INPUT. <br>&nbsp;&nbsp;idx = sy-stepl + line - 1. <br>&nbsp;&nbsp;MODIFY itab FROM wa INDEX idx. <br>ENDMODULE.
</span>
</p>
<br>
<br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/dynploop_obsolete.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:44 GMT -->
</html>
