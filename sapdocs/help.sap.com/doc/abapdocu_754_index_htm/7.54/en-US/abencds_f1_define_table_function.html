<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENCDS_F1_DEFINE_TABLE_FUNCTION -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abencds_f1_define_table_function.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:45 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="ABAP CDS - DEFINE TABLE FUNCTION">
<meta name="keywords" content="ABAP, CDS, DEFINE TABLE FUNCTION">
<title>
ABAP CDS - DEFINE TABLE FUNCTION - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abencds_f1_define_table_function.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abencds_f1_define_table_function.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_dictionary.html')" class="blue">ABAP - Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds.html')" class="blue">ABAP CDS in ABAP Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenddic_cds_entities.html')" class="blue">ABAP CDS - Data Definitions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_ddl_syntax.html')" class="blue">ABAP CDS - DDL for Data Definitions</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@DEFINE TABLE FUNCTION@@!ABAP_CDS_STATEMENT!@@"></A>
<A NAME="@@IMPLEMENTED BY METHOD@@!ABAP_CDS_DEFINE_TABFNC!@@"></A>
<p><span class="h1">
ABAP CDS - DEFINE TABLE FUNCTION
</span></p>
<A name="@@ITOC@@ABENCDS_F1_DEFINE_TABLE_FUNCTION_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext400"><i class=bn>[</i><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">@entity_annot1</a><i class=bn>]</i> <br>
<i class=bn>[</i><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">@entity_annot2</a><i class=bn>]</i> <br>
... <br><i class=bn>[</i><a href="javascript:call_link('abencds_f1_function_annotations.html')" class="blue">@function_annot1</a><i class=bn>]</i> <br>
<i class=bn>[</i><a href="javascript:call_link('abencds_f1_function_annotations.html')" class="blue">@function_annot2</a><i class=bn>]</i> <br>
... <br><i class=bn>[</i>DEFINE<i class=bn>]</i> TABLE FUNCTION cds_entity <br>&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_func_parameter_list.html')" class="blue">parameter_list</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:call_link('abencds_f1_return_list.html')" class="blue">element_list</a> <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMPLEMENTED BY METHOD amdp_function <i class=bn>[</i>;<i class=bn>]</i></span>
</p>
<p><span class="h4">
Effect
</span></p>
<p>
Defines a <a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entity</a> <span class="qtext400">cds_entity</span> as a
<a href="javascript:call_link('abencds_table_function_glosry.html')" class="grey" title="Glossary Entry">CDS table function</a> in the
<a href="javascript:call_link('abencds_ddl_glosry.html')" class="grey" title="Glossary Entry">CDS DDL</a>. In platform-specific SQL, the CDS table function is implemented in an
<a href="javascript:call_link('abenamdp_method_glosry.html')" class="grey" title="Glossary Entry">AMDP method</a> <span class="qtext400">amdp_function</span>, which is created using the
<a href="javascript:call_link('abenamdp_glosry.html')" class="grey" title="Glossary Entry">AMDP framework</a> in the database system as an
<a href="javascript:call_link('abenamdp_table_function_glosry.html')" class="grey" title="Glossary Entry">AMDP table function</a>. The name <span class="qtext400">cds_entity</span> must comply with the naming conventions for
<a href="javascript:call_link('abenddic_data_types.html')" class="blue">dictionary types</a> and can have a maximum of 30 characters.
</p>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue"><span class="qtext400">@entity_annot</span></a>
and <a href="javascript:call_link('abencds_f1_function_annotations.html')" class="blue"><span class="qtext400">@function_annot</span></a> are used to specify optional
<a href="javascript:call_link('abencds_annotation_glosry.html')" class="grey" title="Glossary Entry">annotations</a> for the CDS table function.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_func_parameter_list.html')" class="blue"><span class="qtext400">parameter_list</span></a>
is used to declare a list of optional input parameters for the CDS table function. These also define the input parameters of the AMDP table function.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_return_list.html')" class="blue"><span class="qtext400">element_list</span></a>
is used to declare the elements of the CDS table function. These also define the columns of the tabular return value of the AMDP table function.</li>
</ul>
<ul class="disc">
<li>When <span class="qtext400">amdp_function</span> is used, an
<a href="javascript:call_link('abenamdp_function_method_glosry.html')" class="grey" title="Glossary Entry">AMDP function implementation</a> must be specified for an
<a href="javascript:call_link('abenamdp_table_function_glosry.html')" class="grey" title="Glossary Entry">AMDP table function</a> in the form <span class="qtext400">amdp_class=>amdp_method</span>. Here <span class="qtext400">amdp_class</span> is an
<a href="javascript:call_link('abenamdp_class_glosry.html')" class="grey" title="Glossary Entry">AMDP class</a> and <span class="qtext400">amdp_method</span> is an
<a href="javascript:call_link('abenamdp_function_methods.html')" class="blue">AMDP function implementation</a> contained in this
class. When this function implementation is declared, the current CDS table function is specified after
the addition <a href="javascript:call_link('abapclass-methods_for_tabfunc.html')" class="blue"><span class="qtext">FOR TABLE
FUNCTION</span></a>. The AMDP function implementation must not exist when the CDS table function is
created and activated. The name of an AMDP function implementation <span class="qtext400">amdp_function</span> can be specified in a single CDS table function only.</li>
</ul>
<p>
A CDS table function returns a tabular results set. Like any
<a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entity</a>, it can be used as a data source in other CDS entities or ABAP SQL read
<a href="javascript:call_link('abenopen_sql_glosry.html')" class="grey" title="Glossary Entry">statements</a>. The prerequisite for use is that the specified AMDP function implementation exists and is active.
</p>
<p>
A CDS table function is located in the namespace of the
<a href="javascript:call_link('abenddic_data_types.html')" class="blue">data types</a> in ABAP Dictionary and in the namespace of the global
<a href="javascript:call_link('abenobject_type_glosry.html')" class="grey" title="Glossary Entry">object types</a> in the <a href="javascript:call_link('abenclass_library_glosry.html')" class="grey" title="Glossary Entry">class library</a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>Table functions constitute a database extension that is not supported by all database systems. However,
the CDS DDL in ABAP CDS allows table functions to be created and accessed independently of the database
system. If <a href="javascript:call_link('abapselect.html')" class="blue"><span class="qtext">SELECT</span></a> is used to access
a table function or a view that contains table functions as data sources but the current database system
does not support them, a non-handleable exception of the class <span class="lnkgrey">CX_SY_SQL_UNSUPPORTED_FEATURE</span> is raised.</li>
</ul>
<ul class="disc">
<li>In an ABAP program, it is possible to use the method USE_FEATURES of the class
<a href="javascript:call_link('abencl_abap_dbfeatures.html')" class="blue">CL_ABAP_DBFEATURES</a> to check whether the current
database system supports table functions. This requires the constant AMDP_TABLE_FUNCTION of the class to be passed to the method in an internal table.</li>
</ul>
<ul class="disc">
<li>If a <a href="javascript:call_link('abencds_role_glosry.html')" class="grey" title="Glossary Entry">CDS role</a> is defined
for a CDS entity using the CDS-DCL statement <a href="javascript:call_link('abencds_f1_define_role.html')" class="blue"><span class="qtext400">DEFINE ROLE</span></a>, implicit
<a href="javascript:call_link('abencds_access_control_glosry.html')" class="grey" title="Glossary Entry">access control</a> applies
by default when the CDS entity is accessed using ABAP SQL. CDS access control can be switched off using
the value <span class="qtext400">#NOT_ALLOWED</span> for the annotation <a href="javascript:call_link('abencds_f1_function_annotations.html')" class="blue"><span
 class="qtext400">@AccessControl.authorizationCheck</span></a> and using the addition <a href="javascript:call_link('abapselect_data_source.html')" class="blue">
<span class="qtext">WITH PRIVILEGED ACCESS</span></a> in the <a href="javascript:call_link('abapfrom_clause.html')" class="blue"><span class="qtext">FROM</span></a> clause of an ABAP SQL query.</li>
</ul>
<ul class="disc">
<li>The <a href="javascript:call_link('abenddl_source_code_glosry.html')" class="grey" title="Glossary Entry">DDL source code</a>
of a CDS table function does not need to have the same name as the CDS table function, but it is advisable to use the name of the CDS table function.</li>
</ul>
<ul class="disc">
<li>After a piece of DDL source code is transported, the combination of its name and the name of the CDS table function view is defined and can no longer be modified by being renamed.</li>
</ul>
<ul class="disc">
<li>No classic ABAP Dictionary <a href="javascript:call_link('abenddic_structures.html')" class="blue">structure</a> visible in the
<a href="javascript:call_link('abenddic_tools.html')" class="blue">tools</a> for classic structures is created for an CDS table function.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The following DDL source code shows a <a href="javascript:call_link('abencds_func_client_handling.html')" class="blue">client-specific</a>
CDS table function. It contains an input parameter (with the annotation<a href="javascript:call_link('abencds_f1_parameter_annotations.html')" class="blue">
<span class="qtext400">@Environment.systemField</span></a> and the predefined value <a href="javascript:call_link('abencds_f1_parameter_annotations.html')" class="blue">
<span class="qtext400">#CLIENT</span></a>) for the client, which is implicitly supplied with the ID of the current client when used as a
<a href="javascript:call_link('abapselect_data_source.html')" class="blue">data source</a> of the ABAP SQL statement <a href="javascript:call_link('abapselect.html')" class="blue">
<span class="qtext">SELECT</span></a>. For more information about how to use this function, see the executable example for <a href="javascript:call_link('abenamdp_functions_abexa.html')" class="blue">AMDP Functions</a>.
</p>
<dl><dd>
<span class="qtext400">@ClientHandling.type: #CLIENT_DEPENDENT <br>define table function DEMO_CDS_GET_SCARR_SPFLI_INPCL <br>
&nbsp;&nbsp;with parameters <br>&nbsp;&nbsp;&nbsp;&nbsp;@Environment.systemField: #CLIENT <br>&nbsp;&nbsp;&nbsp;&nbsp;clnt&nbsp;&nbsp; :abap.clnt, <br>
&nbsp;&nbsp;&nbsp;&nbsp;carrid :s_carr_id <br>&nbsp;&nbsp;returns <br>&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;&nbsp; :s_mandt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;carrname :s_carrname; <br>&nbsp;&nbsp;&nbsp;&nbsp;connid&nbsp;&nbsp; :s_conn_id; <br>
&nbsp;&nbsp;&nbsp;&nbsp;cityfrom :s_from_cit; <br>&nbsp;&nbsp;&nbsp;&nbsp;cityto&nbsp;&nbsp; :s_to_city; <br>
&nbsp;&nbsp;} <br>&nbsp;&nbsp;implemented by method <br>&nbsp;&nbsp;&nbsp;&nbsp;CL_DEMO_AMDP_FUNCTIONS_INPCL=&gt;GET_SCARR_SPFLI_FOR_CDS;</span>
</dd></dl>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abencds_f1_function_annotations.html')" class="blue">ABAP CDS - DEFINE TABLE FUNCTION, function_annot</a><br>
<a href="javascript:call_link('abencds_f1_func_parameter_list.html')" class="blue">ABAP CDS - DEFINE TABLE FUNCTION, parameter_list</a><br>
<a href="javascript:call_link('abencds_f1_return_list.html')" class="blue">ABAP CDS - DEFINE TABLE FUNCTION, element_list</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abencds_f1_define_table_function.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:45 GMT -->
</html>
