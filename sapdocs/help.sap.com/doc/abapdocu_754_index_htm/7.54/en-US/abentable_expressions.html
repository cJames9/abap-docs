<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENTABLE_EXPRESSIONS -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abentable_expressions.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:32 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="table_exp - Table Expressions">
<meta name="keywords" content="ABAP, Internal Tables, Expressions, Table Expressions">
<title>
table_exp - Table Expressions - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abentable_expressions.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abentable_expressions.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_reference.html')" class="blue">ABAP &#x2212; Reference</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_data_working.html')" class="blue">Processing Internal Data</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenitab.html')" class="blue">Internal Tables</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abentable_processing_expr_func.html')" class="blue">Expressions and Functions for Internal Tables</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@[ ]@@!ABAP_TABLE_EXPR!@@"></A>
<p><span class="h1">
table_exp - Table Expressions
</span></p>
<A name="@@ITOC@@ABENTABLE_EXPRESSIONS_1"></A>
<p><span class="h2">
Syntax
</span></p>
<p>
<span class="qtext">... itab[ <a href="javascript:call_link('abentable_exp_itab_line.html')" class="blue">itab_line</a> ]<a href="javascript:call_link('abentable_exp_chaining.html')" class="blue"><i
class=bn>[</i>-comp<i class=bn>|</i>[ ... ]<i class=bn>|</i>->comp<i class=bn>]</i></a> ...</span>
</p>
<p><span class="h4">
Effect
</span></p>
<p>
A table expression consists of an internal table <span class="qtext">itab</span>, followed directly by a row
(<a href="javascript:call_link('abentable_exp_itab_line.html')" class="blue"><span class="qtext">itab_line</span></a>) specified in square brackets <span class="qtext">[
]</span>. A chaining <a href="javascript:call_link('abentable_exp_chaining.html')" class="blue"><span class="qtext">-comp<i class=bn>|</i>[ ... ]<i
class=bn>|</i>->comp</span></a> can be appended to this row. The expression searches for the specified row in the internal table.
</p>
<ul class="disc">
<li>If no chaining is specified, the whole row is returned as the result of the corresponding row type.</li>
</ul>
<ul class="disc">
<li>If a <a href="javascript:call_link('abentable_exp_chaining.html')" class="blue">chaining</a> is specified, the following is possible:</li>
</ul>
<ul class="circlem2">
<li>The structure component selector <span class="qtext">-</span> can be used to access the component <span class="qtext">comp</span> in the read row.</li>
</ul>
<ul class="circlem2">
<li>Square brackets <span class="qtext">[ ... ]</span> can be used to chain multiple table expressions.</li>
</ul>
<ul class="circlem2">
<li>The object component selector <span class="qtext">-></span> can be used to access a component <span class="qtext">comp</span> of the object referenced by the preceding expression.</li>
</ul>
<p>
The result of a table expression can be used as follows:
</p>
<ul class="disc">
<li>Reading positions</li>
</ul>
<ul class="circlem2">
<li>A table expression can be specified in <a href="javascript:call_link('abengeneral_expression_positions.html')" class="blue">general expression positions</a> and
<a href="javascript:call_link('abenfunctional_positions.html')" class="blue">functional operand positions</a> with an appropriate
<a href="javascript:call_link('abenoperand_type_glosry.html')" class="grey" title="Glossary Entry">operand type</a>. The result is used here as an operand. The
<a href="javascript:call_link('abentable_exp_result.html')" class="blue">type of the result</a> cannot be controlled in these operand positions using
<a href="javascript:call_link('abenconstructor_operator_glosry.html')" class="grey" title="Glossary Entry">constructor operators</a>. A
<a href="javascript:call_link('abentable_exp_optional_default.html')" class="blue">default value</a> can be specified for rows not found.</li>
</ul>
<ul class="circlem2">
<li>A table expression can be specified as a special
<a href="javascript:call_link('abapassign_mem_area_writable_exp.html')" class="blue">expression variant</a> for the memory area in the statement <a href="javascript:call_link('abapassign.html')" class="blue"><span class="qtext">ASSIGN</span></a>.</li>
</ul>
<ul class="circlem2">
<li>A table expression can be specified as an argument of the
<a href="javascript:call_link('abentable_function_glosry.html')" class="grey" title="Glossary Entry">table function</a> <a href="javascript:call_link('abenline_index_function.html')" class="blue"><span class="qtext">line_index</span></a> and the
<a href="javascript:call_link('abenpredicate_function_glosry.html')" class="grey" title="Glossary Entry">predicate function</a> <a href="javascript:call_link('abenline_exists_function.html')" class="blue"><span class="qtext">line_exists</span></a>.</li>
</ul>
<ul class="disc">
<li>Writing positions</li>
</ul>
<ul class="circlem2">
<li>A table expression can be specified as a <a href="javascript:call_link('abenwritable_expression_glosry.html')" class="grey" title="Glossary Entry">writable expression</a> in
<a href="javascript:call_link('abenresult_position_glosry.html')" class="grey" title="Glossary Entry">result positions</a>.  Once found, the row in question can be modified directly here.</li>
</ul>
<p>
The internal table <span class="qtext">itab</span> must be specified directly using its name, a field symbol, or a dereferenced data reference as described under
<a href="javascript:call_link('abendata_objects_usage_reading.html')" class="blue">Reading Positions</a>. In a table with
<a href="javascript:call_link('abenheader_line_glosry.html')" class="grey" title="Glossary Entry">header line</a>, the table body is addressed and not the header line.
</p>
<p>
If the specified row is not found, a handleable expression of the class <span class="lnkgrey">CX_SY_ITAB_LINE_NOT_FOUND</span> is raised in all operand positions, except when
</p>
<ul class="disc">
<li>a <a href="javascript:call_link('abentable_exp_optional_default.html')" class="blue">default value</a> is specified in the definition of the <a href="javascript:call_link('abentable_exp_result.html')" class="blue">type of the result</a>,</li>
</ul>
<ul class="disc">
<li>a table expression is used in the statement <a href="javascript:call_link('abapassign_mem_area_writable_exp.html')" class="blue"><span class="qtext">ASSIGN</span></a>, where <span class="qtext">sy-subrc</span> is set to the value 4,</li>
</ul>
<ul class="disc">
<li>when used in the predicate function <a href="javascript:call_link('abenline_exists_function.html')" class="blue"><span class="qtext">line_exists</span></a>, where the truth value "false" is returned,</li>
</ul>
<ul class="disc">
<li>when used in the table function <a href="javascript:call_link('abenline_index_function.html')" class="blue"><span class="qtext">line_index</span></a>, where the value <span class="qtext400">0</span> is returned.</li>
</ul>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>In table expressions, the empty square brackets <span class="qtext">[]</span> cannot be specified behind <span class="qtext">itab</span>. In other operand positions, these empty brackets distinguish the table body from
<a href="javascript:call_link('abenheader_line_glosry.html')" class="grey" title="Glossary Entry">header lines</a>.</li>
</ul>
<ul class="disc">
<li>Functions and constructor expressions cannot currently be specified for <span class="qtext">itab</span>, but the table expressions shown under
<a href="javascript:call_link('abentable_exp_chaining.html')" class="blue">Chainings</a> are possible.</li>
</ul>
<ul class="disc">
<li>A table expression cannot be followed directly by a
<a href="javascript:call_link('abenoffset_length_specific_glosry.html')" class="grey" title="Glossary Entry">
specified offset/length</a> <a href="javascript:call_link('abenoffset_length.html')" class="blue"><span class="qtext">+off(len)</span></a>, but this is possible after a
<a href="javascript:call_link('abentable_exp_chaining.html')" class="blue">chaining</a> whose final place is a suitable structure component after a structure component selector.</li>
</ul>
<ul class="disc">
<li>Duplicate selections (multiple reads performed on the same row of an internal table in different
expressions) must be avoided. In these cases, a selection should be made before the statement and the result referenced by a field symbol or reference variable.</li>
</ul>
<ul class="disc">
<li>The exception class <span class="lnkgrey">CX_SY_ITAB_LINE_NOT_FOUND</span> contains attributes for
displaying the row number in the index or key used when a row cannot be accessed. If only index accesses
are used in statements with multiple table expressions, it is not possible to distinguish which expression was unsuccessful.</li>
</ul>
<ul class="disc">
<li>Each table expression can be view as a short form for a variant of the statement <a href="javascript:call_link('abapread_table.html')" class="blue">
<span class="qtext">READ TABLE</span></a> that enables reads to be performed on rows of internal tables in operand positions.</li>
</ul>
<ul class="disc">
<li>In writing positions, the same <a href="javascript:call_link('abapread_table_outdesc.html')" class="blue">restrictions</a> with respect to modifying key fields apply to table expressions whose
<a href="javascript:call_link('abentable_exp_result.html')" class="blue">result</a> is a field symbol or temporary reference
variable as to other field symbols or data reference variables that point to rows of internal tables.
More specifically, table expressions that return a row of a sorted table or hashed table to writing
positions (like the left side of an assignment) or as actual parameters for output parameters always raise an exception.</li>
</ul>
<ul class="disc">
<li>In the case of read-only internal tables (such as an input parameter passed by reference), no table expressions can be specified in a writing position. This restriction also applies if a
<a href="javascript:call_link('abentable_exp_chaining.html')" class="blue">chaining</a> is used and the content of the table itself is not actually modified.</li>
</ul>
<ul class="disc">
<li>Unlike <a href="javascript:call_link('abapread_table.html')" class="blue"><span class="qtext">READ TABLE</span></a>, a table
expression does not modify the value of the system field <span class="qtext">sy-tabix</span> (except
when used in the statement <a href="javascript:call_link('abapassign_mem_area_writable_exp.html')" class="blue"><span class="qtext">ASSIGN</span></a>).</li>
</ul>
<ul class="disc">
<li>Like the statement <a href="javascript:call_link('abapread_table.html')" class="blue"><span class="qtext">READ TABLE</span></a>,
a table expression is a single row read. If multiple rows of an internal table are to be read, the statement
<a href="javascript:call_link('abaploop_at_itab.html')" class="blue"><span class="qtext">LOOP</span></a> or a <a href="javascript:call_link('abenfor.html')" class="blue">
<span class="qtext">FOR</span> expression</a> generally displays better performance than using table expressions in a loop.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abenmesh_path_expression.html')" class="blue">Mesh path expressions</a> are a special form of table expression that can be used in exactly the same way as table expressions. <br><br></li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The content of the component <span class="qtext">carrid</span> of the row of the internal table <span class="qtext">
carrier_tab</span> is passed to the method <span class="qtext">get_spfli</span>. In this table, the component <span class="qtext">carrname</span> of the
<a href="javascript:call_link('abensecondary_key_glosry.html')" class="grey" title="Glossary Entry">secondary key</a> <span class="qtext">name</span> has a specific value.
</p>
<p class="qtextml1">
<span class="qtext">
DATA carrier_tab TYPE HASHED TABLE OF scarr <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH UNIQUE KEY carrid <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WITH NON-UNIQUE SORTED KEY name COMPONENTS carrname. <br>
 <br>SELECT * FROM scarr INTO TABLE @carrier_tab. <br> <br>TRY. <br>&nbsp;&nbsp;&nbsp;&nbsp;DATA(flight_tab) = cl_demo_spfli=>get_spfli( <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carrier_tab[ KEY name <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMPONENTS carrname = 'United Airlines' ]-carrid ). <br>
&nbsp;&nbsp;&nbsp;&nbsp;cl_demo_output=>display( flight_tab ). <br>&nbsp;&nbsp;CATCH cx_sy_itab_line_not_found. <br>&nbsp;&nbsp;&nbsp;&nbsp;cl_demo_output=>display( `Nothing found` ). <br>ENDTRY.
</span>
</p>
<p><span class="h4">
Example
</span></p>
<p>
Here, the first calculation with table rows is a bad example of how to use table expressions. The same selection is made three times in the same statement. The second calculation shows how this can be avoided by using an
<a href="javascript:call_link('abapassign_mem_area_writable_exp.html')" class="blue">assignment to a field symbol</a>.
</p>
<p class="qtextml1">
<span class="qtext">
DATA itab TYPE TABLE OF i. <br>itab = VALUE #( ( 3 ) ( 5 ) ). <br> <br>"Bad example <br>itab[ table_line = 3 ] = <br>
&nbsp;&nbsp;itab[ table_line = 3 ] * itab[ table_line = 3 ]. <br> <br>"Good example <br>ASSIGN itab[ table_line = 5 ] TO FIELD-SYMBOL(&lt;fs>). <br>&lt;fs> = &lt;fs> * &lt;fs>.
</span>
</p>
<p><span class="h4">
Examples
</span></p>
<p>
The program <span class="lnkgrey">DEMO_TABLE_EXPRESSIONS</span> shows further examples of how to use table expressions. <br><br>
</p>
<p><span class="h4">
<a href="javascript:call_link('abenabap_language_exceptions.html')" class="blue">Exceptions</a>
</span></p>
<P>
<span class="bold">Handleable Exceptions</span>
</P>
<P>
<span class="lnkgrey">CX_SY_ITAB_LINE_NOT_FOUND</span>
</P>
<ul class="disc">
<li>
<span class="italic">Cause:</span> The specified table row was not found. <br><span class="italic">Runtime error:</span> <span class="qtext">ITAB_LINE_NOT_FOUND</span>
<br></li>
</ul>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abentable_exp_itab_line.html')" class="blue">table_exp - itab_line</a><br>
<a href="javascript:call_link('abentable_exp_result.html')" class="blue">table_exp - Result</a><br>
<a href="javascript:call_link('abentable_exp_chaining.html')" class="blue">table_exp - Chainings</a><br>
<a href="javascript:call_link('abentable_exp_optional_default.html')" class="blue">table_exp - default</a><br>
<a href="javascript:call_link('abentable_exp_lhs.html')" class="blue">table_exp - Writing Positions</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abentable_expressions.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:32 GMT -->
</html>
