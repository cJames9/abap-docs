<!doctype HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="EN">
<!-- ABENCDS_F1_ANNOTATE_VIEW -->

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abencds_f1_annotate_view.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:33 GMT -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="SAP">
<meta name="description" content="ABAP CDS - ANNOTATE ENTITY, VIEW">
<meta name="keywords" content="ABAP, CDS, ANNOTATE ENTITY">
<title>
ABAP CDS - ANNOTATE ENTITY, VIEW - ABAP Keyword Documentation
</title>
<link rel="icon" href="ABAPIcon.ico" type="image/ico">
<link rel="shortcut icon" href="ABAPIcon.ico">
<LINK rel="stylesheet" href="abap_docu.css" type="text/css">
<script language="javascript" type="text/javascript" src="functions.js"></script>
<script type="text/JavaScript">
function urlToClipboard(id){
 try{ var loc = top.location.href;}
 catch(e){ alert( "URL cannnot be determined" ); return; }
 var field = document.getElementById(id);
 field.focus();
 if ( loc.search( ".htm" ) == -1 && loc.search( ".HTM" ) == -1  ){ loc = loc + "index.htm"; }
 if (   loc.search( "index.html" ) != -1
     || loc.search( "INDEX-2.html" ) != -1 ){
   var off = loc.search( "file=" );
   if ( off == -1  ){
     field.value = loc + "?file=abencds_f1_annotate_view.htm"; }
   else {
     field.value = loc.substring( 0, off ) + "file=abencds_f1_annotate_view.htm";
   }
 }
 else {
    field.value = loc; }
 field.setSelectionRange(0, field.value.length);
 var r = confirm( "Copy URL to clipboard?\n\n" + field.value + "\n\nCopy to clipboard does not work in all browsers." );
 if (r == true) {
   try{
     document.execCommand("copy");
   }
     catch(e){ alert( "URL could not be copied to clipboard" ); }
 }
 window.scrollTo(0,0);
}
</script>
</head>
<body>
<div class="all">
<div style="float:right;">
<input type="button" value="URL"
style="font-size:10px; width:30px; height:18px; padding:0; "
onclick="urlToClipboard('url')" title="Copy URL to Clipboard" ></div>
<p>
<input name="query" id="query" value="" type="text" title="Suchbegriff" size="30" maxlength="30" onkeyup="getInput()">&nbsp;
<input type="button" value="Search"
style="font-size:12px; width:50px; height:18px; padding:0"
onclick="call_search('search.html')" title="Search in ABAP Keyword Documentation" >
<hr style="width:100%;height:1px"></p>
<p class="copyright">AS ABAP Release 754, &copy;Copyright 2019 SAP SE. All rights reserved.</p>
<span class="path">
<a href="javascript:call_link('abenabap.html')" class="blue">ABAP Keyword Documentation</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abenabap_dictionary.html')" class="blue">ABAP - Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds.html')" class="blue">ABAP CDS in ABAP Dictionary</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_annotations.html')" class="blue">ABAP CDS - Annotations</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_anno_usage.html')" class="blue">ABAP CDS - Specifying Annotations</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_meta_data_extensions.html')" class="blue">ABAP CDS Metadata Extensions</a>&nbsp;&rarr;&nbsp;
<a href="javascript:call_link('abencds_f1_ddlx_syntax.html')" class="blue">ABAP CDS - DDL for Metadata Extensions</a>&nbsp;&rarr;&nbsp;
</span>
<A NAME="@@ANNOTATE VIEW@@!ABAP_CDS_STATEMENT!@@"></A>
<A NAME="@@ANNOTATE ENTITY@@!ABAP_CDS_STATEMENT!@@"></A>
<A NAME="@@WITH@@!ABAP_CDS_ANNOTATE_VIEW!@@"></A>
<A NAME="@@WITH@@!ABAP_CDS_ANNOTATE_ENTI!@@"></A>
<p><span class="h1">
ABAP CDS - ANNOTATE ENTITY, VIEW
</span></p>
<p><span class="h2">
<span class="bold">Syntax Forms</span>
</span></p>
<P>
 <br><span class="bold">ANNOTATE ENTITY</span> <br>
</P>
<p>
1. <span class="qtext400"><a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue">@Metadata.layer: #CORE<i
class=bn>|</i>#LOCALIZATION<i class=bn>|</i>#INDUSTRY<i class=bn>|</i>#PARTNER<i class=bn>|</i>#CUSTOMER</a> <br>
 <br>&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">@entity_annot1</a><i class=bn>]</i> <br>
&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">@entity_annot2</a><i class=bn>]</i> <br>
&nbsp;&nbsp; ... <br> <br>&nbsp;&nbsp; ANNOTATE ENTITY cds_entity WITH <br>&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>VARIANT variant<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue">parameter_list</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; { <i class=bn>[</i><a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue">element_list</a><i class=bn>]</i> }<i class=bn>[</i>;<i class=bn>]</i></span> <br>
 <br> <br><span class="bold">ANNOTATE VIEW</span> <br>
</p>
<p>
2. <span class="qtext400"><a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue">@Metadata.layer: #CORE<i
class=bn>|</i>#LOCALIZATION<i class=bn>|</i>#INDUSTRY<i class=bn>|</i>#PARTNER<i class=bn>|</i>#CUSTOMER</a> <br>
 <br>&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">@entity_annot1</a><i class=bn>]</i> <br>
&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">@entity_annot2</a><i class=bn>]</i> <br>
&nbsp;&nbsp; ... <br>&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue">@view_annot1</a><i class=bn>]</i> <br>
&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue">@view_annot2</a><i class=bn>]</i> <br>
&nbsp;&nbsp; ... <br> <br>&nbsp;&nbsp; ANNOTATE VIEW cds_entity WITH <br>&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i>VARIANT variant<i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; <i class=bn>[</i><a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue">parameter_list</a><i class=bn>]</i> <br>
&nbsp;&nbsp;&nbsp;&nbsp; { <i class=bn>[</i><a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue">element_list</a><i class=bn>]</i> }<i class=bn>[</i>;<i class=bn>]</i></span> <br><br>
</p>
<p><span class="h3">
Addition:
</span></p>
<P>
   <A HREF="#!ABAP_ONE_ADD@1@" class="blue"> <span class="qtext">... VARIANT variant</span> </A> <br><br>
</P>
<p><span class="h4">
Effect
</span></p>
<p>
Defines a <a href="javascript:call_link('abencds_metadata_extension_glosry.html')" class="grey" title="Glossary Entry">CDS metadata extension</a> (MDE for short) in dedicated
<a href="javascript:call_link('abenddlx_source_code_glosry.html')" class="grey" title="Glossary Entry">DDLX source code</a>.
</p>
<ul class="disc">
<li><span class="qtext400">ANNOTATE ENTITY</span></li>
</ul>
<dl><dd>
Defines an MDE for any <a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entity</a> except
<a href="javascript:call_link('abencds_table_function_glosry.html')" class="grey" title="Glossary Entry">CDS table functions</a>.
</dd></dl>
<ul class="disc">
<li><span class="qtext400">ANNOTATE VIEW</span></li>
</ul>
<dl><dd>
Defines an MDE specifically for a <a href="javascript:call_link('abencds_view_glosry.html')" class="grey" title="Glossary Entry">CDS view</a>.
</dd></dl>
<p>
The CDS metadata extension adds metadata to a CDS entity as
<a href="javascript:call_link('abencds_annotation_glosry.html')" class="grey" title="Glossary Entry">CDS annotations</a>. The entity in question must exist, be specified using the name of its
<a href="javascript:call_link('abencds_entity_glosry.html')" class="grey" title="Glossary Entry">CDS entity</a> <span class="qtext400">cds_entity</span>,
and contains the annotation <a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue"><span class="qtext400">Metadata.allowExtensions</span></a>
with the default value <span class="qtext400">true</span> in its source code. A CDS entity can have more than one CDS metadata extension.
</p>
<p>
The annotation <a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue"><span class="qtext400">@Metadata.layer</span></a>
must be specified with one of the displayed enumeration symbols in front of the statement <span class="qtext400">ANNOTATE</span> to define the layer of the metadata extension. In the
<a href="javascript:call_link('abencds_meta_data_extension_eval.html')" class="blue">analysis of metadata extensions</a>, the
layer determines the priority of the metadata if there are multiple metadata extensions for the same CDS entity that is associated with the same
<a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">CDS variant</a> or not associated
with any variants. The enumeration symbols are displayed with the lowest priority ones on the left and
the highest priority on the right. <span class="qtext400">#CORE</span> therefore has the lowest, and
<span class="qtext400">#CUSTOMER</span> the highest priority. If multiple CDS metadata extensions with
none or the same CDS variant are assigned to the same layer, a syntax check warning is issued for annotations specified more than one, and the system uses the annotation of the first metadata extension found.
</p>
<p>
The annotations added to the extended entity are defined as follows. A metadata extension must contain at least one of these.
</p>
<ul class="disc">
<li>Annotations in front of the statement <span class="qtext400">ANNOTATE</span></li>
</ul>
<ul class="circlem2">
<li>Only entity annotations <span class="qtext400">@entity_annot</span> can be specified in front of the statement <span class="qtext400">ANNOTATE ENTITY</span>. Valid
<a href="javascript:call_link('abencds_annotations_sap.html')" class="blue">SAP annotations</a> must be in the
<a href="javascript:call_link('abencds_annotations_scopes.html')" class="blue">scope</a> of the
<a href="javascript:call_link('abencds_f1_entity_annotations.html')" class="blue">entity annotations</a>. They are added to the entity annotations of the extended entity.</li>
</ul>
<ul class="circlem2">
<li>Entity annotations and view annotations <span class="qtext400">@view_annot</span> can be specified in front of the statement <span class="qtext400">ANNOTATE VIEW</span>. Valid
<a href="javascript:call_link('abencds_annotations_sap.html')" class="blue">SAP annotations</a> must be in the
<a href="javascript:call_link('abencds_annotations_scopes.html')" class="blue">scope</a> of the
<a href="javascript:call_link('abencds_f1_view_entity_annotations.html')" class="blue">view annotations</a>. They are added to the view annotations of the extended view.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue"><span class="qtext400">parameter_list</span></a> is used to specify annotations for the parameters of the extended entity.</li>
</ul>
<ul class="disc">
<li><a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue"><span class="qtext400">element_list</span></a>
is used specify annotations for the elements of <span class="qtext400">SELECT</span> list of the extended entity.</li>
</ul>
<p>
In metadata extensions, only those annotations can be specified for which this is permitted in their
<a href="javascript:call_link('abencds_anno_definition_glosry.html')" class="grey" title="Glossary Entry">annotation definition</a> using the annotation <a href="javascript:call_link('abencds_f1_define_anno_annos.html')" class="blue"><span
 class="qtext400">@MetadataExtension.usageAllowed:true</span></a>. In the CDS metadata extension, an
annotation can be used in the same scope defined using <a href="javascript:call_link('abencds_f1_define_anno_annos.html')" class="blue"><span class="qtext400">
@Scope</span></a> as in a data definition. All other annotations produce syntax errors.
</p>
<p>
These annotations of a metadata extensions are respected in the
<a href="javascript:call_link('abencds_annotations_analysis.html')" class="blue">evaluation of annotations</a> with the methods
of the class <span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span> except for GET_DIRECT_ANNOS_, in accordance with the layers defined by the annotation <span class="qtext400">@Metadata.layer</span> and in accordance with the used
<a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">CDS variants</a>. Here the
annotations of a metadata extension always have a higher priority than the annotations specified in
the source code of the CDS entity. These are only respected if they are not overridden by a corresponding annotation of a metadata extension. For the exact description of the evaluation, see section
<a href="javascript:call_link('abencds_meta_data_extension_eval.html')" class="blue">evaluation of metadata extensions</a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li>Unlike the specification of annotations in the source code of the extended CDS entity, it is not possible to have any arbitrary annotations in metadata extensions; it is only possible to have
<a href="javascript:call_link('abencds_annotations_sap.html')" class="blue">SAP annotations</a>. The syntax check for a metadata extension checks the validity of its specification with respect to the
<a href="javascript:call_link('abencds_anno_definition_glosry.html')" class="grey" title="Glossary Entry">annotation definition</a>:</li>
</ul>
<ul class="circlem2">
<li>the name of an annotation</li>
</ul>
<ul class="circlem2">
<li>the validity of the <a href="javascript:call_link('abenannotation_value_glosry.html')" class="grey" title="Glossary Entry">annotation values</a>, the type, and (for enumerations) the enumeration symbol</li>
</ul>
<ul class="circlem2">
<li>the <a href="javascript:call_link('abencds_annotations_scopes.html')" class="blue">scope</a></li>
</ul>
<ul class="circlem2">
<li>whether any <a href="javascript:call_link('abenannotation_array_glosry.html')" class="grey" title="Glossary Entry">annotation
arrays</a> are specified correctly (they must only be specified using square brackets). The format <span class="qtext400">
@annot: value</span> is not possible. <span class="qtext400">@annot: [value]</span> must be used instead. The array can contain only similar elements (in accordance with its definition).</li>
</ul>
<ul class="disc">
<li>The annotations (of a CDS entity) specified in metadata extensions does not have any effect on the
activation or the behavior at runtime. They are only respected by the class <span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span>.</li>
</ul>
<ul class="disc">
<li>The program <span class="lnkgrey">ABAP_DOCU_MDE_ANNOS</span> shows all annotations that can be specified in metadata extensions.</li>
</ul>
<p><span class="h4">
Example
</span></p>
<p>
The following metadata extension named DEMO_CDS_METADATA_EXTENSION adds annotations with original language "German" to the CDS view DEMO_CDS_PARAMETERS from the executable example for
<a href="javascript:call_link('abenselect_cds_para_abexa.html')" class="blue">CDS views with parameters</a>. The program <span class="lnkgrey">
DEMO_CDS_META_DATA_EXTENSIONS</span> reads the annotations of the view with the methods of the classes
<span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span> and <span class="lnkgrey">CL_DD_DDL_ANALYZE</span>.
The method GET_ANNOS of the class CL_DD_DDL_ANNOTATION_SERVICE covers both the annotations specified
in the metadata extension and the translations into the current text environment language. The method GET_ANNOTATIONS of the class CL_DD_DDL_ANALYZE only evaluates the specifications in the view DEMO_CDS_PARAMETERS.
</p>
<dl><dd>
<span class="qtext400">@Metadata.layer:#INDUSTRY <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
@EndUserText.label: 'Demo f&#x00FC;r View mit Parametern' <br> <br>annotate view demo_cds_parameters with <br>
&nbsp;&nbsp;parameters <br>&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.label: 'Untere Entfernungsgrenze' <br>&nbsp;&nbsp;&nbsp;&nbsp;p_distance_l, <br>
&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.label: 'Obere Entfernungsgrenze' <br>&nbsp;&nbsp;&nbsp;&nbsp;p_distance_u, <br>
&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.label: 'Einheit der Entfernung' <br>&nbsp;&nbsp;&nbsp;&nbsp;p_unit <br>
{ <br>&nbsp;&nbsp;@EndUserText.label: 'Fluggesellschaft' <br>&nbsp;&nbsp;carrid; <br>&nbsp;&nbsp;@EndUserText.label: 'Flugverbindung' <br>
&nbsp;&nbsp;connid; <br>&nbsp;&nbsp;@EndUserText.label: 'Abflug in Stadt' <br>&nbsp;&nbsp;cityfrom; <br>
&nbsp;&nbsp;@EndUserText.label: 'Ankunft in Stadt' <br>&nbsp;&nbsp;cityto; <br>&nbsp;&nbsp;@EndUserText.label: 'Flugstrecke' <br>
&nbsp;&nbsp;distance; <br>&nbsp;&nbsp;@EndUserText.label: 'Einheit der Flugstrecke' <br>&nbsp;&nbsp;distid; <br>};</span>
</dd></dl>
<p><span class="h4">
Example
</span></p>
<p>
The following metadata extension DEMO_CDS_MDE_FOR_ABSTR_ENT adds entity annotations and element annotations to the
<a href="javascript:call_link('abenabstract_entity_glosry.html')" class="grey" title="Glossary Entry">abstract CDS entity</a> DEMO_CDS_ABSTRACT_ENTITY_ELEM from the example for its
<a href="javascript:call_link('abencds_f1_absent_list_annotation.html')" class="blue">element annotations</a>.
</p>
<dl><dd>
<span class="qtext400">@Metadata.layer: #CORE <br>@EndUserText.label : 'Label from MDE' <br>annotate entity demo_cds_abstract_entity_elem with <br>
&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;@EndUserText.quickInfo: 'Quickinfo from MDE' <br>&nbsp;&nbsp;&nbsp;&nbsp;col2; <br>&nbsp;&nbsp;}</span> <br><br>
</dd></dl>
<A NAME="@@VARIANT@@!ABAP_CDS_ANNOTATE_VIEW!@@"></A>
<p><span class="h3">
<A NAME="!ABAP_ONE_ADD@1@"></A> <span class="bold">Addition</span>
</span></p>
<P>
<span class="qtext">... VARIANT variant</span> <!-- /A -->  <br>
</P>
<p><span class="h4">
Effect
</span></p>
<p>
Joins the metadata extension with a <a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">
CDS variant</a>. An existing CDS variant must be specified for <span class="qtext400">variant</span>.
This entry is not case sensitive. If there are multiple metadata extensions for the same CDS entity
contained in the layer defined with annotation <span class="qtext400">@Metadata.layer</span>, these
extensions should be assigned to CDS variants, because otherwise a warning is raised by the syntax check for duplicate annotations.
</p>
<p>
In <a href="javascript:call_link('abencds_annotations_analysis.html')" class="blue">evaluations of annotations</a> using the
class <span class="lnkgrey">CL_DD_DDL_ANNOTATION_SERVICE</span>, the CDS variant can be specified to
select the metadata extension. The class collects the annotations that it returned, in accordance with the layers and variants in line with the hierarchy described under the
<a href="javascript:call_link('abencds_meta_data_extension_eval.html')" class="blue">evaluation of metadata extensions</a>.
</p>
<p><span class="h4">
Notes
</span></p>
<ul class="disc">
<li><a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">CDS variants</a> are created in the
<a href="javascript:call_link('abencds_variant_glosry.html')" class="grey" title="Glossary Entry">ADT</a> and this creation process is documented there too.</li>
</ul>
<ul class="disc">
<li>From a technical perspective, the annotations specified in metadata extensions for a CDS entity are similar to the annotations specified in the
<a href="javascript:call_link('abenddl_source_code_glosry.html')" class="grey" title="Glossary Entry">DDL source code</a>, separated by layers and variants in separate system tables and made accessible using an API. Annotations with
<a href="javascript:call_link('abencds_annotations_analysis.html')" class="blue">translatable texts</a> are also stored here in tables, which are connected to translation. The class CL_DD_DDL_ANNOTATION_SERVICE evaluates the system tables.</li>
</ul>
<p><span class="h4">
Caution
</span></p>
<p>
<span class="bold">CDS variants are not currently released for general use. It is not possible to define standalone CDS variants and the use of CDS variants in metadata extensions produces a syntax check warning.</span>
</p>
<p><span class="h4">
Executable Example
</span></p>
<p>
<a href="javascript:call_link('abencds_annotate_view_abexa.html')" class="blue">CDS Metadata Extensions with CDS Variants</a>
</p>
<br>
<br>
<!-- POSTFIX --><span class="h4">Continue</span><br>
<a href="javascript:call_link('abencds_f1_metadata_ext_annos.html')" class="blue">ABAP CDS - ANNOTATE, metadata_extension_annot</a><br>
<a href="javascript:call_link('abencds_f1_annotate_view_para_list.html')" class="blue">ABAP CDS - ANNOTATE, parameter_list</a><br>
<a href="javascript:call_link('abencds_f1_annotate_view_sele_list.html')" class="blue">ABAP CDS - ANNOTATE, element_list</a><br>
<br>
<br>
</DIV>
<fieldset style="opacity:0">
<input id="url" type="text" />
</fieldset>
</BODY>

<!-- Mirrored from help.sap.com/doc/abapdocu_754_index_htm/7.54/en-US/abencds_f1_annotate_view.htm by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 Feb 2024 14:51:33 GMT -->
</html>
